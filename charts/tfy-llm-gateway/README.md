# llm-gateway helm chart by Truefoundry
LLM-Gateway Helm Chart 

## Parameters

### Configuration for LLM Gateway

| Name                                          | Description                                                                     | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| --------------------------------------------- | ------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `global.resourceTier`                         | Resource deployment type                                                        | `medium`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `global.controlPlaneURL`                      | Control plane URL                                                               | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.controlPlaneChartVersion`             | Control plane version                                                           | `0.98.2`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `global.gatewayChartVersion`                  | Gateway version                                                                 | `0.104.0-rc.1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `global.imagePullSecrets`                     | Existing truefoundry image pull secret name                                     | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.affinity`                             | Affinity rules for pod scheduling on a node                                     | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.labels`                               | Global labels                                                                   | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.annotations`                          | Global annotations                                                              | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.podLabels`                            | Global pod labels                                                               | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.podAnnotations`                       | Global pod annotations                                                          | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.deploymentLabels`                     | Global deployment labels                                                        | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.deploymentAnnotations`                | Global deployment annotations                                                   | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.serviceAnnotations`                   | Global service annotations                                                      | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.serviceLabels`                        | Global service labels                                                           | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.tolerations`                          | Tolerations for pod scheduling on a node                                        | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.nodeSelector`                         | Node selector                                                                   | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.serviceAccount.name`                  | Service account name                                                            | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.serviceAccount.labels`                | Service account labels                                                          | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.serviceAccount.annotations`           | Service account annotations                                                     | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `global.image.registry`                       | Global image registry override                                                  | `tfy.jfrog.io`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `global.namespaceOverride`                    | Namespace override (defaults to .Release.Namespace if not set)                  | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `image.registry`                              | Image registry for tfyLLMGateway (defaults to global.image.registry if not set) | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `image.repository`                            | Image repository for tfyLLMGateway                                              | `tfy-private-images/tfy-llm-gateway`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `image.tag`                                   | Image tag for the tfyLLMGateway                                                 | `v0.104.0-rc.1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `fullnameOverride`                            | Full name override for the tfy-llm-gateway                                      | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `environmentName`                             | The environment name                                                            | `default`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `envSecretName`                               | The environment secret name                                                     | `tfy-llm-gateway-env-secret`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `imagePullPolicy`                             | Image pull policy                                                               | `IfNotPresent`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `nameOverride`                                | Name override                                                                   | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `podAnnotations`                              | Pod annotations                                                                 | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `commonAnnotations`                           | Common annotations                                                              | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `podSecurityContext`                          | Pod security context                                                            | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `commonLabels`                                | Common labels                                                                   | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `podLabels`                                   | Pod annotations                                                                 | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `deploymentLabels`                            | Deployment labels                                                               | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `deploymentAnnotations`                       | Deployment annotations                                                          | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `securityContext`                             | Security context configuration                                                  | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `imagePullSecrets`                            | Image pull secrets                                                              | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `healthcheck.enabled`                         | Enable healthcheck                                                              | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `healthcheck.readiness.port`                  | Port to probe                                                                   | `8787`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `healthcheck.readiness.path`                  | Path to probe                                                                   | `/`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `healthcheck.readiness.initialDelaySeconds`   | Initial delay in seconds                                                        | `30`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `healthcheck.readiness.periodSeconds`         | Period in seconds                                                               | `10`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `healthcheck.readiness.timeoutSeconds`        | Timeout in seconds                                                              | `5`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `healthcheck.readiness.successThreshold`      | Success threshold                                                               | `1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `healthcheck.readiness.failureThreshold`      | Failure threshold                                                               | `3`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `healthcheck.liveness.port`                   | Port to probe                                                                   | `8787`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `healthcheck.liveness.path`                   | Path to probe                                                                   | `/`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `healthcheck.liveness.initialDelaySeconds`    | Initial delay in seconds                                                        | `600`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `healthcheck.liveness.periodSeconds`          | Period in seconds                                                               | `10`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `healthcheck.liveness.timeoutSeconds`         | Timeout in seconds                                                              | `5`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `healthcheck.liveness.successThreshold`       | Success threshold                                                               | `1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `healthcheck.liveness.failureThreshold`       | Failure threshold                                                               | `3`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `nodeSelector`                                | Node selector                                                                   | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `tolerations`                                 | Tolerations                                                                     | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `affinity`                                    | Affinity                                                                        | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `topologySpreadConstraints`                   | Topology spread constraints                                                     | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `terminationGracePeriodSeconds`               | Termination grace period in seconds                                             | `300`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `podDisruptionBudget.enabled`                 | Enable PodDisruptionBudget                                                      | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `podDisruptionBudget.annotations`             | PDB annotations                                                                 | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `podDisruptionBudget.labels`                  | PDB labels                                                                      | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `podDisruptionBudget.maxUnavailable`          | Maximum number of unavailable replicas                                          | `30%`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `ingress.enabled`                             | Enable ingress configuration                                                    | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `ingress.annotations`                         | Ingress annotations                                                             | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `ingress.labels`                              | Ingress labels                                                                  | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `ingress.ingressClassName`                    | Ingress class name                                                              | `istio`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `ingress.tls`                                 | Ingress TLS configuration                                                       | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `ingress.hosts`                               | Ingress hosts                                                                   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `istio.virtualservice.enabled`                | Enable virtual service                                                          | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `istio.virtualservice.annotations`            | Virtual service annotations                                                     | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `istio.virtualservice.labels`                 | Virtual service labels                                                          | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `istio.virtualservice.gateways`               | Virtual service gateways                                                        | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `istio.virtualservice.hosts`                  | Virtual service hosts                                                           | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `istio.virtualservice.retries.enabled`        | Enable retries                                                                  | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `istio.virtualservice.retries.attempts`       | Retries attempts                                                                | `3`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `istio.virtualservice.retries.retryOn`        | Retries retry on                                                                | `gateway-error`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `service.type`                                | Service type                                                                    | `ClusterIP`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `service.port`                                | Service port                                                                    | `8787`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `service.annotations`                         | Service annotations                                                             | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `service.labels`                              | Service labels                                                                  | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `serviceAccount.create`                       | Create service account                                                          | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `serviceAccount.annotations`                  | Service account annotations                                                     | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `serviceAccount.labels`                       | Service account labels                                                          | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `serviceAccount.name`                         | Service account name                                                            | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `serviceAccount.automountServiceAccountToken` | Automount service account token this will only be used if create is true        | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `extraVolumes`                                | Extra volumes                                                                   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `extraVolumeMounts`                           | Extra volume mounts                                                             | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `dnsConfig`                                   | DNS config                                                                      | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `rbac.enabled`                                | Enable rbac                                                                     | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `autoscaling.enabled`                         | Enable autoscaling                                                              | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `autoscaling.minReplicas`                     | Minimum number of replicas                                                      | `3`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `autoscaling.maxReplicas`                     | Maximum number of replicas                                                      | `100`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `autoscaling.targetCPUUtilizationPercentage`  | Target CPU utilization percentage                                               | `60`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `rollout.enabled`                             | Enable rollout (rolling update)                                                 | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `rollout.maxUnavailable`                      | Maximum number of unavailable replicas during rolling update                    | `0`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `rollout.maxSurge`                            | Maximum number of surge replicas during rolling update                          | `100%`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `serviceMonitor.enabled`                      | Enable service monitor                                                          | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `serviceMonitor.additionalLabels`             | Additional labels for the service monitor                                       | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `serviceMonitor.additionalAnnotations`        | Additional annotations for the service monitor                                  | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `oidc.enabled`                                | Enable OIDC configuration                                                       | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `oidc.config`                                 | OIDC configuration                                                              | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `redis.enabled`                               | Enable Redis dependency                                                         | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `redis.auth.enabled`                          | Enable Redis authentication                                                     | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `redis.image.tag`                             | Image tag                                                                       | `8.4.0`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `redis.image.registry`                        | Image registry                                                                  | `public.ecr.aws`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `redis.image.pullPolicy`                      | Image pull policy                                                               | `IfNotPresent`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `redis.image.repository`                      | Image repository                                                                | `docker/library/redis`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `redis.master.configmap`                      | Redis master configmap configuration                                            | `# Basic Redis config appendonly yes                     # Enable AOF appendfsync everysec               # Standard durability vs performance balance # AOF Rewrite (Consolidation) Settings auto-aof-rewrite-percentage 100    # Default threshold auto-aof-rewrite-min-size 64mb     # Minimum size before rewriting # Force AOF rewrite every 24 hours using system-based triggering # by setting an active-expire-cycle to help reduce fragmentation # and using cron-trigger for rewrite via Redis "CONFIG SET" supported: aof-rewrite-incremental-fsync yes # Optional: reduce memory fragmentation in long-running single-pod Redis maxmemory-policy noeviction` |
| `redis.master.persistence.size`               | Persistence volume size                                                         | `8Gi`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `redis.master.persistence.enabled`            | Enable persistence                                                              | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `redis.master.persistence.accessModes`        | Persistence access modes                                                        | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `redis.master.persistence.storageClass`       | Persistence storage class                                                       | `gp3`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `redis.resources.limits.cpu`                  | CPU limit                                                                       | `2000m`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `redis.resources.limits.memory`               | Memory limit                                                                    | `6000Mi`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `redis.resources.requests.cpu`                | CPU request                                                                     | `1000m`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `redis.resources.requests.memory`             | Memory request                                                                  | `4000Mi`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `redis.architecture`                          | Redis architecture                                                              | `standalone`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `redis.replicaCount`                          | Redis replica count                                                             | `1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
