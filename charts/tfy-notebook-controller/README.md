# Tfy-notebook-controller helm chart packaged by TrueFoundry

This Helm chart package, provided by TrueFoundry, contains configurations and resources for deploying the Tfy Notebook Controller. The Tfy Notebook Controller manages and orchestrates notebooks within your Kubernetes environment.                                                              

## Parameters

### tfy-notebook-controller configurations

| Name                                                                                         | Description                                                                                                             | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| -------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `labels.app`                                                                                 | Label for the application.                                                                                              | `notebook-controller`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `labels.kustomize.component`                                                                 | Label for the Kustomize component.                                                                                      | `notebook-controller`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `namespaceOverride`                                                                          | Namespace override for the notebook controller.                                                                         | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `istioGateway`                                                                               | Istio Gateway for the notebook controller.                                                                              | `istio-system/tfy-wildcard`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `image.pullPolicy`                                                                           | Pull Policy for notebook controller.                                                                                    | `IfNotPresent`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `image.repository`                                                                           | Image repository for the notebook controller.                                                                           | `public.ecr.aws/truefoundrycloud/tfy-notebook-controller`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `image.tag`                                                                                  | Image tag for the notebook controller.                                                                                  | `6df7e07ca442a53583ce3bcb507f249b15818152`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `resources.limits.cpu`                                                                       | CPU limit for the notebook controller.                                                                                  | `100m`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `resources.limits.memory`                                                                    | Memory limit for the notebook controller.                                                                               | `256Mi`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `resources.limits.ephemeral-storage`                                                         | Ephemeral storage limit for the notebook controller.                                                                    | `256Mi`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `resources.requests.cpu`                                                                     | CPU request for the notebook controller.                                                                                | `50m`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `resources.requests.memory`                                                                  | Memory request for the notebook controller.                                                                             | `128Mi`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `resources.requests.ephemeral-storage`                                                       | Ephemeral storage request for the notebook controller.                                                                  | `128Mi`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `tolerations`                                                                                | list of tolerations                                                                                                     | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `affinity`                                                                                   | Affinity for the notebook controller deployment                                                                         | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `notebookBaseDomainUrl`                                                                      | Base domain URL for the notebook.                                                                                       | `<to_be_provided>`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `oauth.enabled`                                                                              | Secret key used for OAuth2 authentication. This key should be kept confidential.                                        | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `oauth.type`                                                                                 | Secret key used for OAuth2 authentication. This key should be kept confidential.                                        | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `oauth.clientId`                                                                             | Secret key used for OAuth2 authentication. This key should be kept confidential.                                        | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `oauth.tokenEndpoint`                                                                        | Secret key used for OAuth2 authentication. This key should be kept confidential.                                        | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `oauth.authorizationEndpoint`                                                                | Secret key used for OAuth2 authentication. This key should be kept confidential.                                        | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `oauth.jwksUri`                                                                              | Secret key used for OAuth2 authentication. This key should be kept confidential.                                        | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `oauth.clientSecret`                                                                         | Secret key used for OAuth2 authentication. This key should be kept confidential.                                        | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `oauth.hmac`                                                                                 | HMAC key used for encoding/decoding tokens in OAuth2. This key is crucial for maintaining token integrity and security. | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sdsServer.replicas`                                                                         | Number of replicas of sds server                                                                                        | `2`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `sdsServer.image`                                                                            | image for sds-server                                                                                                    | `public.ecr.aws/truefoundrycloud/sds-server:7221b24abf2ce9b5104fae6bcb9115ba8416de58`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `sdsServer.affinity`                                                                         | Node affinity for sds-server                                                                                            | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sdsServer.command`                                                                          | Command and arguments to start the sds-server application.                                                              | `["/app/sds-server","--port","8000","--file","/secrets/secrets.yaml"]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `sdsServer.readinessProbe.tcpSocket.port`                                                    | Port for TCP socket used in readiness probe                                                                             | `8000`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `sdsServer.readinessProbe.initialDelaySeconds`                                               | Initial delay before performing readiness probe                                                                         | `15`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sdsServer.readinessProbe.periodSeconds`                                                     | Frequency of performing readiness probe                                                                                 | `10`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sdsServer.livenessProbe.tcpSocket.port`                                                     | Port for TCP socket used in liveness probe                                                                              | `8000`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `sdsServer.livenessProbe.initialDelaySeconds`                                                | Initial delay before performing liveness probe                                                                          | `15`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sdsServer.livenessProbe.periodSeconds`                                                      | Frequency of performing liveness probe                                                                                  | `10`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sdsServer.deploymentStrategy.type`                                                          | Type of deployment strategy                                                                                             | `RollingUpdate`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `sdsServer.deploymentStrategy.rollingUpdate.maxSurge`                                        | Max pods above desired number                                                                                           | `1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `sdsServer.deploymentStrategy.rollingUpdate.maxUnavailable`                                  | Max pods unavailable during update                                                                                      | `1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `sdsServer.ports[0].containerPort`                                                           | The port on which the container is listening.                                                                           | `8000`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `sdsServer.ports[0].name`                                                                    | The name assigned to this port.                                                                                         | `port-8000`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `sdsServer.ports[0].protocol`                                                                | The protocol used by this port (TCP/UDP).                                                                               | `TCP`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `sdsServer.resources.limits.cpu`                                                             | The maximum CPU resources allocated.                                                                                    | `0.02`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `sdsServer.resources.limits.ephemeral-storage`                                               | The maximum ephemeral storage allocated.                                                                                | `20M`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `sdsServer.resources.limits.memory`                                                          | The maximum memory resources allocated.                                                                                 | `50M`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `sdsServer.resources.requests.cpu`                                                           | The minimum CPU resources requested.                                                                                    | `0.01`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `sdsServer.resources.requests.ephemeral-storage`                                             | The minimum ephemeral storage requested.                                                                                | `10M`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `sdsServer.resources.requests.memory`                                                        | The minimum memory resources requested.                                                                                 | `30M`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `sdsServer.tolerations`                                                                      | Spot tolerations for the notebook controller deployment.                                                                | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sdsServer.topologySpreadConstraints[0].labelSelector.matchLabels.truefoundry.com/component` | Component label for the sds-server.                                                                                     | `{"replicas":2,"image":"public.ecr.aws/truefoundrycloud/sds-server:7221b24abf2ce9b5104fae6bcb9115ba8416de58","affinity":{},"command":["/app/sds-server","--port","8000","--file","/secrets/secrets.yaml"],"readinessProbe":{"tcpSocket":{"port":8000},"initialDelaySeconds":15,"periodSeconds":10},"livenessProbe":{"tcpSocket":{"port":8000},"initialDelaySeconds":15,"periodSeconds":10},"deploymentStrategy":{"type":"RollingUpdate","rollingUpdate":{"maxSurge":1,"maxUnavailable":1}},"ports":[{"containerPort":8000,"name":"port-8000","protocol":"TCP"}],"resources":{"limits":{"cpu":0.02,"ephemeral-storage":"20M","memory":"50M"},"requests":{"cpu":0.01,"ephemeral-storage":"10M","memory":"30M"}},"tolerations":[{"effect":"NoSchedule","key":"cloud.google.com/gke-spot","operator":"Equal","value":"true"},{"effect":"NoSchedule","key":"kubernetes.azure.com/scalesetpriority","operator":"Equal","value":"spot"}],"topologySpreadConstraints":[{"labelSelector":{"matchLabels":{"truefoundry.com/component":"sds-server"}},"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway"}]}` |
| `sdsServer.topologySpreadConstraints[0].maxSkew`                                             | Define the maximum skew of pods across topology domains.                                                                | `1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `sdsServer.topologySpreadConstraints[0].topologyKey`                                         | The key for the node labels used in determining the topology spread.                                                    | `topology.kubernetes.io/zone`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `sdsServer.topologySpreadConstraints[0].whenUnsatisfiable`                                   | Behavior policy when spreading constraints cannot be satisfied.                                                         | `ScheduleAnyway`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
