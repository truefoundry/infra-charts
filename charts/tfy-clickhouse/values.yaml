## @section tfyClickhouse parameters

## Global Config
global:
  ## @param global.resourceTier Resource deployment type
  resourceTier: "medium"
  ## @param global.affinity [object] Affinity rules for pod scheduling on a node
  affinity: {}
  ## @param global.tolerations [array] Tolerations for pod scheduling on a node
  tolerations: []
  ## @param global.nodeSelector [object] Node selector
  nodeSelector: {}

## @section altinity-clickhouse-operator
altinity-clickhouse-operator:
  enabled: true
  metrics:
    image:
      repository: tfy.jfrog.io/tfy-mirror/altinity/metrics-exporter
      tag: 0.23.7
  operator:
    image:
      repository: tfy.jfrog.io/tfy-mirror/altinity/clickhouse-operator
      tag: 0.23.7
  imagePullSecrets: []
  serviceMonitor:
    enabled: true
    additionalLabels:
      release: prometheus
  serviceAccount:
    create: true
    automountServiceAccountToken: false
## @section zookeeper
zookeeper:
  ## @param zookeeper.enabled Enable zookeeper deployment
  enabled: true
  ## @param zookeeper.replicaCount Number of zookeeper replicas
  replicaCount: 1
  ## @param zookeeper.image [object] zookeeper image
  image:
    registry: "tfy.jfrog.io/tfy-mirror"
    repository: bitnami/zookeeper
    tag: 3.8.1-debian-11-r0
    pullSecrets: []
  ## @param zookeeper.serviceAccount zookeeper service account
  serviceAccount:
    ## @param zookeeper.serviceAccount.create Enable creation of ServiceAccount for ZooKeeper pod
    create: true
    ## @param zookeeper.serviceAccount.name The name of the ServiceAccount to use.
    name: truefoundry-zookeeper
    ## @param zookeeper.serviceAccount.automountServiceAccountToken Automount service account token
    automountServiceAccountToken: false
  ## @param zookeeper.automountServiceAccountToken Automount service account token
  automountServiceAccountToken: false

## @section clickhouse
clickhouse:
  enabled: true
  clusterName: clickhouse
  auth:
    user: user
    secretName: truefoundry-clickhouse-secret
    passwordKey: "CLICKHOUSE_PASSWORD"
  shardsCount: 1
#  replicasCount: 1
  zookeeperHost: "{{ .Release.Name }}-zookeeper-headless"
  zookeeperPort: '2181'
  labels: {}
  image: 
    repository: tfy.jfrog.io/tfy-mirror/clickhouse/clickhouse-server
    tag: 24.7.3.42-alpine
  annotations: {}
  imagePullSecrets: []
  podSecurityContext: {}
  containerSecurityContext: {}
  serviceAccount:
    create: true
    name: truefoundry-clickhouse
    automountServiceAccountToken: false
#  resources:
#    requests:
#      memory: 4Gi
#      cpu: 1
#      ephemeralStorage: 5Gi
#    limits:
#      memory: 8Gi
#      cpu: 2
#      ephemeralStorage: 10Gi
  storage:
    storageClassName: ''
#    size: 100Gi
  nodeSelector: {}
  tolerations: {}
  affinity: {}
  topologySpreadConstraints:
    - maxSkew: 1
      topologyKey: kubernetes.io/hostname
      whenUnsatisfiable: ScheduleAnyway
  virtualService:
    enabled: false
    gatewayName: 'istio-system/tfy-wildcard'
    host: ''