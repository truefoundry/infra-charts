## @section ALB Configuration
## Configuration for AWS Application Load Balancer
##
alb:
  ## @param alb.ingress.enabled Enable ALB ingress
  ##
  ingress:
    enabled: false
    ## @param alb.ingress.ingressClassName Ingress class name for ALB
    ##
    ingressClassName: alb
    ## @param alb.ingress.annotations Additional annotations for the ALB ingress
    ##
    annotations: {}
    ## @param alb.ingress.flyte.enabled Enable HTTP2 ALB ingress path for Flyte
    ##
    flyte:
      enabled: true
    ## @param alb.ingress.additionalHttp2Paths Additional HTTP2 paths to be configured
    ## Example:
    ## additionalHttp2Paths:
    ##   - path: /test123
    ##     pathType: Prefix
    ##     servicePort: 80
    ##     serviceName: test-service
    additionalHttp2Paths: []
## @section Gateway Configuration
## Configuration for the Gateway component
##
gateway:
  autoscaling:
    ## @param gateway.autoscaling.minReplicas Minimum number of replicas for autoscaling the Gateway.
    ##
    minReplicas: 3
    ## @param gateway.autoscaling.maxReplicas Maximum number of replicas for autoscaling the Gateway.
    ##
    maxReplicas: 100
    ## @param gateway.autoscaling.targetCPUUtilizationPercentage CPU utilization percentage wrt requests for scaling gateway pods
    ##
    targetCPUUtilizationPercentage: 70

  ## @param gateway.resources [object] Resource section for the gateway pods
  ##
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 1024Mi

## @section tfyGateway Configuration for the tfyGateway.
##
tfyGateway:
  ## @param tfyGateway.name Name of the tfyGateway.
  ##
  name: ''
  ## @param tfyGateway.labels Labels for the tfyGateway.
  ##
  labels: {}
  ## @param tfyGateway.annotations Annotations for the tfyGateway.
  ##
  annotations: {}
  spec:
    selector:
      ## @param tfyGateway.spec.selector.istio Selector to enable istio for tfyGateway
      istio: '{{ .Release.Name }}'
    servers:
      ## @param tfyGateway.spec.servers[0].hosts List of hosts for the first server.
      ##
      - hosts: []
        ## Configuration for the port of the first server.
        ##
        ## @param tfyGateway.spec.servers[0].port.name Name of the port.
        ##
        ## @param tfyGateway.spec.servers[0].port.number Port number for http.
        ##
        ## @param tfyGateway.spec.servers[0].port.protocol Protocol of the port.
        ##
        ## @param tfyGateway.spec.servers[0].port.tls.httpsRedirect TLS configuration for the port.
        ##
        port:
          name: http-tfy-wildcard
          number: 80
          protocol: HTTP
          tls:
            httpsRedirect: true
      ## @param tfyGateway.spec.servers[1].hosts List of hosts for the second server.
      ##
      - hosts: []
        ## Configuration for the port of the second server.
        ##
        ## @param tfyGateway.spec.servers[1].port.name Name of the port.
        ##
        ## @param tfyGateway.spec.servers[1].port.number Port number for https.
        ##
        ## @param tfyGateway.spec.servers[1].port.protocol Protocol of the port.
        ##
        port:
          name: https-tfy-wildcard
          number: 443
          protocol: HTTPS

## @section telemetry Configuration for the telemetry.
##
telemetry:
  ## @param telemetry.enabled Enable telemetry.
  ##
  enabled: false
  ## @param telemetry.accessLogging [array] Access logging for the telemetry.
  ##
  accessLogging:
    - providers:
      - name: envoy

## @section awsElbControllerChecker Job that verifies aws-load-balancer-controller deployment has 2 pods up.
##
awsElbControllerChecker:
  ## @param awsElbControllerChecker.enabled Enable the aws-load-balancer-controller checker job.
  ##
  enabled: true
  ## @param awsElbControllerChecker.deploymentName Name of the aws-load-balancer-controller deployment to check.
  ##
  deploymentName: ""
  ## @param awsElbControllerChecker.namespace Namespace where the aws-load-balancer-controller deployment runs.
  ##
  namespace: ""
  ## @param awsElbControllerChecker.waitTimeoutSeconds Time in seconds to wait for aws-load-balancer-controller pods to come up (default 3 mins).
  ##
  waitTimeoutSeconds: 180
  image:
    ## @param awsElbControllerChecker.image.repository Repository for the checker job (helm-kubectl-based).
    repository: tfy.jfrog.io/tfy-mirror/dtzar/helm-kubectl
    ## @param awsElbControllerChecker.image.tag Tag for the checker job (helm-kubectl-based).
    ##
    tag: "3.19.1"
    ## @param awsElbControllerChecker.image.pullPolicy Pull policy for the checker job (helm-kubectl-based).
    ##
    pullPolicy: IfNotPresent
  ## @param awsElbControllerChecker.serviceAccount.create Create a dedicated ServiceAccount for the checker job.
  ## @param awsElbControllerChecker.serviceAccount.name Name of existing ServiceAccount to use when create is false.
  ##
  serviceAccount:
    create: true
    name: ""
  ## @param awsElbControllerChecker.resources Resource limits/requests for the checker job.
  ##
  resources: {}
  ## @param awsElbControllerChecker.backoffLimit Number of retries before the job is marked failed.
  ##
  backoffLimit: 3
