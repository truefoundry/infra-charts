apiVersion: karpenter.sh/v1alpha5
kind: Provisioner
metadata:
  name: {{ .Values.provisioners.defaultProvisionerSpec.name }}-{{ .Values.karpenter.settings.aws.clusterName }}
  namespace: karpenter
spec:
{{ toYaml .Values.provisioners.defaultProvisionerSpec | indent 2 }}
  providerRef:
    name: default
{{- if not .Values.provisioners.defaultProvisionerSpec.consolidation.enabled }}
  ttlSecondsAfterEmpty: 30
{{- end }}