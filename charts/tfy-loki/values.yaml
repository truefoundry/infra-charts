loki:
  enabled: true
  loki:
    storage:
      type: filesystem
    compactor:
      shared_store: filesystem
      retention_enabled: true
    auth_enabled: false
    commonConfig:
      replication_factor: 1
    limits_config:
      retention_period: 168h
      max_query_lookback: 168h
      split_queries_by_interval: 10h
      max_entries_limit_per_query: 30000
  test:
    enabled: false
  gateway:
    enabled: false
  monitoring:
    rules:
      enabled: false
    dashboards:
      enabled: false
    lokiCanary:
      enabled: false
    selfMonitoring:
      enabled: false
      grafanaAgent:
        installOperator: false
    serviceMonitor:
      enabled: false
  singleBinary:
    replicas: 1
    resources:
      requests:
        cpu: 0.03
        memory: 250Mi
    persistence:
      size: 50Gi

promtail:
  enabled: true
  config:
    clients:
      - url: http://loki:3100/loki/api/v1/push
    snippets:
      extraRelabelConfigs:
        - regex: __meta_kubernetes_pod_label_(.+)
          action: labelmap
  resources:
    requests:
      cpu: 40m
      memory: 100Mi
      ephemeral-storage: 256Mi
  tolerations:
    - key: node-role.kubernetes.io/master
      effect: NoSchedule
      operator: Exists
    - key: node-role.kubernetes.io/control-plane
      effect: NoSchedule
      operator: Exists
    - effect: NoSchedule
      operator: Exists
    - key: CriticalAddonsOnly
      operator: Exists
    - effect: NoExecute
      operator: Exists
