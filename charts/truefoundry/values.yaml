###################################################################################################################
####################################### global Truefoundry global values ##########################################
###################################################################################################################
## @section Global prameters for Truefoundry
global:
  # Resource deployment tier for the control plane, there are 3 tiers available
  # 1. small - for dev and testing purposes
  # 2. medium - for small production workloads
  # 3. large - for large production workloads
  ## @param global.resourceTier Resource deployment tier for the control plane, either small, medium or large accepted
  resourceTier: "medium"
  # The below are installation secrets that will be provided as is.
  # These are customised for your account. Please use the provided values as is.
  # If you have an existing imagepullsecret, set this to its name
  ## imagePullSecrets:
  ## - name: "truefoundry-image-pull-secret"
  ## @param global.imagePullSecrets [array] List of image pull secrets
  imagePullSecrets: []
  ## @param global.truefoundryImagePullConfigJSON JSON config for image pull secret
  truefoundryImagePullConfigJSON: ""
  ## @param global.tenantName Name of the tenant
  tenantName: ""
  ## @param global.controlPlaneURL URL of the control plane
  controlPlaneURL: "http://truefoundry-truefoundry-frontend-app.truefoundry.svc.cluster.local:5000"
  ## @param global.controlPlaneChartVersion Version of control-plane chart
  controlPlaneChartVersion: 0.118.2
  # If you have an existing truefoundry-creds secret, provide the name here.
  # This will ignore `.global.database` and `.global.tfyApiKey` values.
  ## @param global.existingTruefoundryCredsSecret Name of the existing truefoundry creds secret
  existingTruefoundryCredsSecret: ""
  ## global.ingress Ingress configuration for the control plane
  ingress:
    ## @param global.ingress.enabled Bool to enable ingress for the control plane
    enabled: false
    ## @param global.ingress.annotations [object] Annotations for the control plane ingress
    annotations: {}
    ## @param global.ingress.labels [object] Labels for the control plane ingress
    labels: {}
    ## @param global.ingress.ingressClassName Ingress class name for the control plane
    ingressClassName: nginx
    ## @param global.ingress.tls TLS settings for the control plane
    tls: []
    ## @param global.ingress.hosts Hosts for the control plane
    hosts: []
    ## global.ingress.workflow Ingress configuration for workflow admin service
    workflow:
      ## @param global.ingress.workflow.annotations [object] Annotations for the workflow ingress
      annotations: {}
      ## @param global.ingress.workflow.labels [object] Labels for the workflow ingress
      labels: {}
  ## global.virtualservice Istio configuration for the control plane
  virtualservice:
    ## @param global.virtualservice.enabled Bool to enable virtual service for the control plane
    enabled: false
    ## @param global.virtualservice.annotations [object] Annotations for the control plane virtual service
    annotations: {}
    ## @param global.virtualservice.labels [object] Labels for the control plane virtual service
    labels: {}
    ## @param global.virtualservice.gateways Gateways for the control plane virtual service
    gateways: []
    ## @param global.virtualservice.hosts Hosts for the control plane virtual service
    hosts: []
  ## global.proxy Global proxy configuration
  proxy:
    ## @param global.proxy.enabled Bool to enable proxy for the control plane
    enabled: false
    ## @param global.proxy.servicefoundryServerHost Servicefoundry server host for service routing
    servicefoundryServerHost: >-
      {{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local
    ## @param global.proxy.mlfoundryHost mlfoundry server host for service routing
    mlfoundryHost: >-
      {{ .Release.Name }}-mlfoundry-server.{{ include "global.namespace" . }}.svc.cluster.local
    ## @param global.proxy.tfyWorkflowAdminHost tfy workflow admin host for service routing
    tfyWorkflowAdminHost: >-
      {{ .Release.Name }}-tfy-workflow-admin-server.{{ include "global.namespace" . }}.svc.cluster.local
    ## @param global.proxy.s3proxyHost s3 proxy host for service routing
    s3proxyHost: >-
      {{ .Release.Name }}-s3proxy.{{ include "global.namespace" . }}.svc.cluster.local
    ## @param global.proxy.tfyOtelCollectorHost otel collector host for service routing
    tfyOtelCollectorHost: >-
      {{ .Release.Name }}-tfy-otel-collector.{{ include "global.namespace" . }}.svc.cluster.local
    ## @param global.proxy.managedClusterOnboardingServiceURL managed cluster onboarding service host for service routing
    managedClusterOnboardingServiceURL: ""
    ## @param global.proxy.liveDemoTokenVendorURL LIVE DEMO TOKEN VENDOR URL
    liveDemoTokenVendorURL: ""
    ## @param global.proxy.trtEngineBuilderBaseURL TRT ENGINE BUILDER BASE URL
    trtEngineBuilderBaseURL: ""
    ## @param global.proxy.authServerURL AUTH SERVER URL
    authServerURL: "https://auth.truefoundry.com"
    ## @param global.proxy.tfyLLMAgentURL LLM agent URL for service routing
    tfyLLMAgentURL: ""
    ## global.proxy.tfyNats NATS settings for service routing
    tfyNats:
      ## @param global.proxy.tfyNats.host nats host for nats service
      host: >-
        {{ .Release.Name }}-tfy-nats.{{ include "global.namespace" . }}.svc.cluster.local
      ## @param global.proxy.tfyNats.port nats port for nats service
      port: 8080
    ## global.proxy.llmGateway LLM gateway settings for service routing
    llmGateway:
      ## @param global.proxy.llmGateway.external Make LLMGateway external
      external: false
      ## @param global.proxy.llmGateway.backendHost Backend Host for the LLM gateway
      backendHost: >-
        {{ .Release.Name }}-tfy-llm-gateway.{{ include "global.namespace" . }}.svc.cluster.local
      ## @param global.proxy.llmGateway.backendURL Backend URL for the LLM gateway
      backendURL: ""
      ## @param global.proxy.llmGateway.backendPort Backend Port for the LLM gateway
      backendPort: 8787
    ## global.proxy.tfyOtelCollector OTEL collector settings for service routing
    tfyOtelCollector:
      ## @param global.proxy.tfyOtelCollector.host OTEL collector host for OTEL collector service
      host: >-
        {{ .Release.Name }}-tfy-otel-collector.{{ include "global.namespace" . }}.svc.cluster.local
      ## @param global.proxy.tfyOtelCollector.port OTEL collector port for OTEL collector service
      port: 4318
    ## @param global.proxy.proxyServerHost Proxy server host for service routing
    proxyServerHost: >-
      {{ .Release.Name }}-tfy-controller.{{ include "global.namespace" . }}.svc.cluster.local
    ## @param global.proxy.tfyProxyHost tfy proxy host for service routing
    tfyProxyHost: >-
      {{ .Release.Name }}-tfy-proxy.{{ include "global.namespace" . }}.svc.cluster.local
    ## @param global.proxy.truefoundryFrontendAppHost truefoundry frontend app host for service routing
    truefoundryFrontendAppHost: >-
      {{ .Release.Name }}-truefoundry-frontend-app.{{ include "global.namespace" . }}.svc.cluster.local
  ## global.database Database configuration when dev mode is not enabled
  database:
    ## @param global.database.host Control plane database hostname when dev mode is not enabled
    host: ""
    ## @param global.database.name Control plane database name when dev mode is not enabled
    name: ""
    ## @param global.database.username Control plane database username when dev mode is not enabled
    username: ""
    ## @param global.database.password Control plane database password when dev mode is not enabled
    password: ""
  ## @param global.tfyApiKey API key for truefoundry
  tfyApiKey: ""
  ## global.image [object] Global image configuration
  image:
    ## @param global.image.registry Default registry for all images
    registry: "tfy.jfrog.io"
  ## @param global.nodeSelector Node selector for all services
  nodeSelector: {}
  ## @param global.affinity Affinity for all services
  affinity: {}
  ## @param global.labels [object] Labels for all services
  labels: {}
  ## @param global.annotations [object] Annotations for all services
  annotations: {}
  ## @param global.podLabels [object] Pod-specific labels for all services
  podLabels: {}
  ## @param global.podAnnotations [object] Pod-specific annotations for all services
  podAnnotations: {}
  ## @param global.serviceLabels [object] Service-specific labels for all services
  serviceLabels: {}
  ## @param global.serviceAnnotations [object] Service-specific annotations for all services
  serviceAnnotations: {}
  ## @param global.deploymentLabels [object] Deployment-specific labels for all services
  deploymentLabels: {}
  ## @param global.deploymentAnnotations [object] Deployment-specific annotations for all services
  deploymentAnnotations: {}
  ## @skip global.tolerations
  tolerations:
    - key: class.truefoundry.io/control-plane
      effect: NoSchedule
      operator: Exists
    - key: class.truefoundry.com/component
      value: control-plane
      effect: NoSchedule
      operator: Equal
    - key: "cloud.google.com/gke-spot"
      value: "true"
      effect: NoSchedule
      operator: Equal
    - key: kubernetes.azure.com/scalesetpriority
      value: spot
      effect: NoSchedule
      operator: Equal
  ## global.serviceAccount [object] Service account configuration
  serviceAccount:
    ## @param global.serviceAccount.create Bool to enable service account
    create: true
    ## @param global.serviceAccount.name Name of the service account
    name: truefoundry
    ## @param global.serviceAccount.annotations [object] Annotations for the service account
    annotations: {}
    ## @param global.serviceAccount.labels [object] Labels for the service account
    labels: {}
    ## @param global.serviceAccount.automountServiceAccountToken Automount service account token for the service account
    automountServiceAccountToken: true
  config:
    ## @param global.config.defaultCloudProvider Default Cloud provider
    defaultCloudProvider: ""
    storageConfiguration:
      ## @param global.config.storageConfiguration.awsS3BucketName AWS S3 bucket name
      awsS3BucketName: ""
      ## @param global.config.storageConfiguration.awsRegion AWS region
      awsRegion: ""
      ## @param global.config.storageConfiguration.awsAssumeRoleArn AWS assume role ARN
      awsAssumeRoleArn: ""
      ## @param global.config.storageConfiguration.awsAccessKeyId AWS access key ID
      ## For passing it as a secret, use the following format(refer - https://github.com/truefoundry/infra-charts/blob/main/charts/truefoundry/README.md#using-k8s-secret-for-additional-fields):
      ## awsAccessKeyId: ${k8s-secret/truefoundry-creds/awsAccessKeyId}
      awsAccessKeyId: ""
      ## @param global.config.storageConfiguration.awsSecretAccessKey AWS secret access key
      ## For passing it as a secret, use the following format(refer - https://github.com/truefoundry/infra-charts/blob/main/charts/truefoundry/README.md#using-k8s-secret-for-additional-fields):
      ## awsSecretAccessKey: ${k8s-secret/truefoundry-creds/awsSecretAccessKey}
      awsSecretAccessKey: ""
      ## @param global.config.storageConfiguration.awsEndpointURL AWS endpoint URL
      awsEndpointURL: ""
      ## @param global.config.storageConfiguration.awsAllowHttp AWS allow HTTP
      awsAllowHttp: ""
      ## @param global.config.storageConfiguration.azureBlobUri Azure blob URI
      azureBlobUri: ""
      ## @param global.config.storageConfiguration.azureBlobConnectionString Azure blob connection string
      ## For passing it as a secret, use the following format(refer - https://github.com/truefoundry/infra-charts/blob/main/charts/truefoundry/README.md#using-k8s-secret-for-additional-fields):
      ## azureBlobConnectionString: ${k8s-secret/truefoundry-creds/AZURE_BLOB_CONNECTION_STRING}
      azureBlobConnectionString: ""
      ## @param global.config.storageConfiguration.googleCloudProjectId Google cloud project ID
      googleCloudProjectId: ""
      ## @param global.config.storageConfiguration.googleCloudStorageBucketName Google cloud storage bucket name
      googleCloudStorageBucketName: ""
      ## @param global.config.storageConfiguration.googleCloudServiceAccountKeyFileContent Google cloud service account key file content
      ## For passing it as a secret, use the following format(refer - https://github.com/truefoundry/infra-charts/blob/main/charts/truefoundry/README.md#using-k8s-secret-for-additional-fields):
      googleCloudServiceAccountKeyFileContent: ""
  ## @param global.namespaceOverride Override namespace for the control plane (defaults to .Release.Namespace)
  namespaceOverride: ""
# tags These are used to enabled and disable certain infra components based on its purpose - https://helm.sh/docs/topics/charts/#tags-and-condition-fields-in-dependencies
tags:
  ## @param tags.llmGateway Bool to enable llmGateway infra
  llmGateway: false
  ## @param tags.llmGatewayRequestLogging Bool to enable observability (metrics and request logging) features in LLM gateway
  llmGatewayRequestLogging: false
  ## @param tags.tracing Bool to enable OTEL tracing feature
  tracing: false
## devMode  When enabled creates a dev installation of the control plane for testing purposes
devMode:
  ## @param devMode.enabled Bool to enable dev mode
  enabled: false
###################################################################################################################
####################################### Monitoring Config ##########################################################
###################################################################################################################
## @section Monitoring Config values
monitoring:
  ## @param monitoring.enabled Bool to enable monitoring for the control plane
  enabled: false
  ## @param monitoring.tenantNameOverride Override tenant name for the monitoring
  tenantNameOverride: ""
  ## @param monitoring.commonLabels [object] Common labels for monitoring resources
  commonLabels: {}
  ## @param monitoring.commonAnnotations [object] Common annotations for monitoring resources
  commonAnnotations: {}
  ## monitoring.alertManager [object] Alert manager configuration
  alertManager:
    ## @param monitoring.alertManager.enabled Bool to enable alert manager
    enabled: true
    ## @param monitoring.alertManager.name Name of the alert manager configuration
    name: tfy-control-plane-alert-manager
    ## @param monitoring.alertManager.labels [object] Labels for alert manager
    labels: {}
    ## @param monitoring.alertManager.annotations [object] Annotations for alert manager
    annotations: {}
    slackConfigs:
      ## @param monitoring.alertManager.slackConfigs.enabled Bool to enable Slack notifications
      enabled: true
      ## @param monitoring.alertManager.slackConfigs.channel Slack channel to send alerts to
      channel: "#customer-cp-alerts"
      apiURL:
        ## @param monitoring.alertManager.slackConfigs.apiURL.name Name of secret containing Slack API URL
        name: tfy-control-plane-alert-manager-secret
        ## @param monitoring.alertManager.slackConfigs.apiURL.key Key in secret containing Slack API URL
        key: API_URL
      ## @param monitoring.alertManager.slackConfigs.additionalSlackConfigs Additional Slack configurations
      additionalSlackConfigs: []
    ## @param monitoring.alertManager.additionalReceivers Additional alert receivers
    additionalReceivers: []
    secret:
      ## @param monitoring.alertManager.secret.create Bool to create secret for alert manager
      create: false
      ## @param monitoring.alertManager.secret.name Name of the secret
      name: tfy-control-plane-alert-manager-secret
      ## @param monitoring.alertManager.secret.data [object] Data to be stored in secret
      data:
        API_URL: ""
  ## monitoring.alertRules [object] Alert rules configuration
  alertRules:
    ## @param monitoring.alertRules.enabled Bool to enable alert rules
    enabled: true
    ## @param monitoring.alertRules.name Name of the alert rules configuration
    name: tfy-control-plane-alert-rules
    ## @param monitoring.alertRules.labels [object] Labels for alert rules
    labels: {}
    ## @param monitoring.alertRules.annotations [object] Annotations for alert rules
    annotations: {}
###################################################################################################################
####################################### Truefoundry bootstrap script ##############################################
###################################################################################################################
## @section Truefoundry bootstrap values
## truefoundryBootstrap Truefoundry bootstrap values
truefoundryBootstrap:
  ## @param truefoundryBootstrap.enabled Bool to enable truefoundry bootstrap
  enabled: true
  ## @param truefoundryBootstrap.serviceAccount.automountServiceAccountToken Automount service account token for the bootstrap container
  serviceAccount:
    automountServiceAccountToken: true
    ## @param truefoundryBootstrap.serviceAccount.name Name of the bootstrap service account (defaults to "truefoundry-bootstrap-job-sa")
    name: "truefoundry-bootstrap-job-sa"
    ## @param truefoundryBootstrap.serviceAccount.create Bool to create a service account for the bootstrap container
    create: true
    ## @param truefoundryBootstrap.serviceAccount.labels [object] Labels for the bootstrap service account
    labels: {}
    ## @param truefoundryBootstrap.serviceAccount.annotations [object] Annotations for the bootstrap service account
    annotations: {}
  ## @param truefoundryBootstrap.podSecurityContext Pod security context for the bootstrap container
  podSecurityContext: {}
  ## securityContext Security context for the bootstrap container
  securityContext:
    ## @param truefoundryBootstrap.securityContext.readOnlyRootFilesystem Read only root filesystem for the bootstrap container
    readOnlyRootFilesystem: true
  ## truefoundryBootstrap.image Truefoundry base bootstrap image
  image:
    ## @param truefoundryBootstrap.image.registry Registry for the bootstrap image (overrides global.registry if specified)
    registry: ""
    ## @param truefoundryBootstrap.image.repository Truefoundry bootstrap image repository (without registry)
    repository: "tfy-images/truefoundry-bootstrap"
    ## @param truefoundryBootstrap.image.tag Truefoundry bootstrap image tag
    tag: "0.1.5"
  ## @param truefoundryBootstrap.natsConfigmapName Truefoundry nats configmap name
  natsConfigmapName: "tfy-nats-accounts"
  ## @param truefoundryBootstrap.commonAnnotations [object] Common Annotations for the bootstrap job components
  commonAnnotations: {}
  ## @param truefoundryBootstrap.commonLabels [object] Common labels for the bootstrap job components
  commonLabels: {}
  ## @param truefoundryBootstrap.podAnnotations [object] Pod annotations for the bootstrap job
  podAnnotations: {}
  ## @param truefoundryBootstrap.podLabels [object] Pod labels for the bootstrap job
  podLabels: {}
  ## @param truefoundryBootstrap.extraEnvVars Extra environment variables for the bootstrap container
  extraEnvVars: []
  ## @param truefoundryBootstrap.extraVolumeMounts Extra volume mounts for the bootstrap container
  extraVolumeMounts: []
  ## @param truefoundryBootstrap.extraVolumes Extra volumes for the bootstrap container
  extraVolumes: []
  ## @param truefoundryBootstrap.affinity Affinity for the bootstrap container
  affinity: {}
  ## @param truefoundryBootstrap.nodeSelector Node selector for the bootstrap container
  nodeSelector: {}
  ## @param truefoundryBootstrap.tolerations Tolerations specific to the bootstrap container
  tolerations: []
  ## Image pull secrets for the bootstrap container
  ## @param truefoundryBootstrap.imagePullSecrets Image pull secrets for the bootstrap container
  ##
  imagePullSecrets: []
  ## @param truefoundryBootstrap.createdBuildkitServiceTlsCerts Bool to install TLS certificates
  createdBuildkitServiceTlsCerts: true
###################################################################################################################
####################################### Truefoundry Frontend App ##################################################
###################################################################################################################
## @section Truefoundry Frontend App values
truefoundryFrontendApp:
  ## @param truefoundryFrontendApp.enabled Bool to enable the frontend app
  enabled: true
  ## @param truefoundryFrontendApp.tolerations Tolerations specific to the frontend app
  tolerations: []
  ## @skip truefoundryFrontendApp.replicaCount Number of replicas for the frontend app
  #  replicaCount: 1
  ## truefoundryFrontendApp.image Image for the frontend app
  image:
    ## @param truefoundryFrontendApp.image.registry Registry for the frontend app image (overrides global.registry if specified)
    registry: ""
    ## @param truefoundryFrontendApp.image.repository Image repository for the frontend app (without registry)
    repository: "tfy-private-images/truefoundry-frontend-app"
    ## @param truefoundryFrontendApp.image.tag Image tag for the frontend app
    tag: "v0.118.1"
  ## @param truefoundryFrontendApp.envSecretName Secret name for the frontend app environment variables
  envSecretName: truefoundry-frontend-app-env-secret
  ## @param truefoundryFrontendApp.imagePullPolicy Image pull policy for the frontend app
  imagePullPolicy: IfNotPresent
  ## @param truefoundryFrontendApp.nameOverride Override name for the frontend app
  nameOverride: ""
  ## @param truefoundryFrontendApp.fullnameOverride Full name override for the frontend app
  fullnameOverride: ""
  ## @param truefoundryFrontendApp.podAnnotations Annotations for the frontend app pods
  podAnnotations: {}
  ## @param truefoundryFrontendApp.podLabels [object] Labels for the frontend app pods
  podLabels: {}
  ## @param truefoundryFrontendApp.podSecurityContext Security context for the frontend app pods
  podSecurityContext: {}
  ## @param truefoundryFrontendApp.commonLabels Common labels for the frontend app pods
  commonLabels: {}
  ## @param truefoundryFrontendApp.commonAnnotations [object] Common annotations for the frontend app pods
  commonAnnotations: {}
  ## @param truefoundryFrontendApp.deploymentLabels [object] Deployment-specific labels for the frontend app
  deploymentLabels: {}
  ## @param truefoundryFrontendApp.deploymentAnnotations [object] Deployment-specific annotations for the frontend app
  deploymentAnnotations: {}
  ## truefoundryFrontendApp.securityContext Security context for the frontend app
  securityContext:
    ## @param truefoundryFrontendApp.securityContext.readOnlyRootFilesystem Read only root filesystem for the frontend app
    readOnlyRootFilesystem: true
  ## @param truefoundryFrontendApp.resourceTierOverride Resource tier override for the truefoundryFrontendApp
  resourceTierOverride: ""
  ## @param truefoundryFrontendApp.resources Resource requests and limits for the frontend app
  resources: {}
  # resources:
  #  limits:
  #    cpu: 200m
  #    memory: 512Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 50m
  #    memory: 256Mi
  #    ephemeral-storage: 128Mi
  ## truefoundryFrontendApp.livenessProbe Liveness probe settings for the frontend app
  livenessProbe:
    ## @param truefoundryFrontendApp.livenessProbe.initialDelaySeconds Initial delay seconds for the liveness probe
    initialDelaySeconds: 600
    ## @param truefoundryFrontendApp.livenessProbe.periodSeconds Period seconds for the liveness probe
    periodSeconds: 30
    ## @param truefoundryFrontendApp.livenessProbe.timeoutSeconds Timeout seconds for the liveness probe
    timeoutSeconds: 5
    ## @param truefoundryFrontendApp.livenessProbe.failureThreshold Failure threshold for the liveness probe
    failureThreshold: 3
    ## @param truefoundryFrontendApp.livenessProbe.successThreshold Success threshold for the liveness probe
    successThreshold: 1
  ## truefoundryFrontendApp.readinessProbe Readiness probe settings for the frontend app
  readinessProbe:
    ## @param truefoundryFrontendApp.readinessProbe.initialDelaySeconds Initial delay seconds for the readiness probe
    initialDelaySeconds: 30
    ## @param truefoundryFrontendApp.readinessProbe.periodSeconds Period seconds for the readiness probe
    periodSeconds: 30
    ## @param truefoundryFrontendApp.readinessProbe.timeoutSeconds Timeout seconds for the readiness probe
    timeoutSeconds: 5
    ## @param truefoundryFrontendApp.readinessProbe.failureThreshold Failure threshold for the readiness probe
    failureThreshold: 3
    ## @param truefoundryFrontendApp.readinessProbe.successThreshold Success threshold for the readiness probe
    successThreshold: 1
  ## @param truefoundryFrontendApp.nodeSelector Node selector for the frontend app
  nodeSelector: {}
  ## @param truefoundryFrontendApp.affinity Affinity settings for the frontend app
  affinity: {}
  ## @param truefoundryFrontendApp.topologySpreadConstraints Topology spread constraints for the frontend app
  topologySpreadConstraints: []
  ## truefoundryFrontendApp.service Service settings for the frontend app
  service:
    ## @param truefoundryFrontendApp.service.type Service type for the frontend app
    type: ClusterIP
    ## @param truefoundryFrontendApp.service.port Service port for the frontend app
    port: 5000
    ## @param truefoundryFrontendApp.service.annotations Annotations for the frontend app service
    annotations: {}
    ## @param truefoundryFrontendApp.service.labels [object] Labels for the frontend app service
    labels: {}
  ## truefoundryFrontendApp.ingress Ingress settings for the frontend app
  ingress:
    ## @param truefoundryFrontendApp.ingress.enabled Enable ingress for the frontend app
    enabled: false
    ## @param truefoundryFrontendApp.ingress.annotations Annotations for the frontend app ingress
    annotations: {}
    ## @param truefoundryFrontendApp.ingress.labels Labels for the frontend app ingress
    labels: {}
    ## @param truefoundryFrontendApp.ingress.ingressClassName Ingress class name for the frontend app
    ingressClassName: istio
    ## @param truefoundryFrontendApp.ingress.tls TLS settings for the frontend app
    tls: []
    ## @param truefoundryFrontendApp.ingress.hosts Hosts for the frontend app
    hosts: []
  ## truefoundryFrontendApp.istio Istio virtual service settings for the frontend app
  istio:
    ## truefoundryFrontendApp.istio.virtualservice Enable virtual service for the frontend app
    virtualservice:
      ## @param truefoundryFrontendApp.istio.virtualservice.enabled Enable virtual service for the frontend app
      enabled: false
      ## @param truefoundryFrontendApp.istio.virtualservice.annotations Annotations for the frontend app virtual service
      annotations: {}
      ## @param truefoundryFrontendApp.istio.virtualservice.gateways Gateways for the frontend app virtual service
      gateways: []
      ## @param truefoundryFrontendApp.istio.virtualservice.hosts Hosts for the frontend app virtual service
      hosts: []
  ## @param truefoundryFrontendApp.servicefoundryServerHost Servicefoundry server host for the frontend app
  servicefoundryServerHost: >-
    {{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local
  ## @param truefoundryFrontendApp.mlfoundryHost mlfoundry server host for the frontend app
  mlfoundryHost: >-
    {{ .Release.Name }}-mlfoundry-server.{{ include "global.namespace" . }}.svc.cluster.local
  ## @param truefoundryFrontendApp.tfyWorkflowAdminHost tfy workflow admin host for the frontend app
  tfyWorkflowAdminHost: >-
    {{ .Release.Name }}-tfy-workflow-admin-server.{{ include "global.namespace" . }}.svc.cluster.local
  ## @param truefoundryFrontendApp.s3proxyHost s3 proxy host for the frontend app
  s3proxyHost: >-
    {{ .Release.Name }}-s3proxy.{{ include "global.namespace" . }}.svc.cluster.local
  ## @param truefoundryFrontendApp.tfyOtelCollectorHost otel collector host for the frontend app
  tfyOtelCollectorHost: >-
    {{ .Release.Name }}-tfy-otel-collector.{{ include "global.namespace" . }}.svc.cluster.local
  ## @param truefoundryFrontendApp.tfyNatsHost nats host for the frontend app
  tfyNatsHost: >-
    {{ .Release.Name }}-tfy-nats.{{ include "global.namespace" . }}.svc.cluster.local
  ## truefoundryFrontendApp.llmGateway LLM gateway settings for the frontend app
  llmGateway:
    ## @param truefoundryFrontendApp.llmGateway.external Make LLMGateway external
    external: false
    ## @param truefoundryFrontendApp.llmGateway.backendHost Backend Host for the LLM gateway
    backendHost: >-
      {{ .Release.Name }}-tfy-llm-gateway.{{ include "global.namespace" . }}.svc.cluster.local
    ## @param truefoundryFrontendApp.llmGateway.backendPort Backend Port for the LLM gateway
    backendPort: 8787
  ## @param truefoundryFrontendApp.proxyServerHost Proxy server host for the frontend app
  proxyServerHost: >-
    {{ .Release.Name }}-tfy-controller.{{ include "global.namespace" . }}.svc.cluster.local
  ## truefoundryFrontendApp.serviceAccount Service account settings for the frontend app
  serviceAccount:
    ## @param truefoundryFrontendApp.serviceAccount.create Bool to create a service account for the frontend app
    create: true
    ## @param truefoundryFrontendApp.serviceAccount.name Name of the frontend app service account
    name: "truefoundry-frontend-app"
    ## @param truefoundryFrontendApp.serviceAccount.annotations [object] Annotations for the frontend app service account
    annotations: {}
    ## @param truefoundryFrontendApp.serviceAccount.labels [object] Labels for the frontend app service account
    labels: {}
    ## @param truefoundryFrontendApp.serviceAccount.automountServiceAccountToken Automount service account token for the frontend app
    automountServiceAccountToken: false
  ## @param truefoundryFrontendApp.extraVolumes Extra volumes for the frontend app
  extraVolumes: []
  ## @param truefoundryFrontendApp.extraVolumeMounts Extra volume mounts for the frontend app
  extraVolumeMounts: []
  ## @param truefoundryFrontendApp.imagePullSecrets Image pull secrets for the frontend app
  ##
  imagePullSecrets: []
  ## @param truefoundryFrontendApp.env [object] Environment variables for the frontend app
  env:
    AUTH_SERVER_URL: https://auth.truefoundry.com
    NATS_URL: ws://{{ .Release.Name }}-tfy-nats.{{ include "global.namespace" . }}.svc.cluster.local:8080
    MLFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-mlfoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:5000
    SERVICEFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:3000
    TFY_CONTROLLER_URL: http://{{ .Release.Name }}-tfy-controller.{{ include "global.namespace" . }}.svc.cluster.local:8123
    DEBUGGING_AGENT_URL: http://tfy-llm-agent.{{ include "global.namespace" . }}.svc.cluster.local:8080
    TFY_OTEL_COLLECTOR_URL: http://{{ .Release.Name }}-tfy-otel-collector.{{ include "global.namespace" . }}.svc.cluster.local:4318
    TRT_ENGINE_BUILDER_BASE_URL: https://tfy-trt-llm-engine-builder.tfy-ctl-euwe1-production.production.truefoundry.com
###################################################################################################################
####################################### MLfoundry Server ##########################################################
###################################################################################################################
## @section mlfoundryServer Truefoundry mlfoundry server values
mlfoundryServer:
  ## @param mlfoundryServer.enabled Bool to enable the mlfoundry server
  enabled: true
  ## @param mlfoundryServer.tolerations Tolerations specific to the mlfoundry server
  tolerations: []
  ## @param mlfoundryServer.commonAnnotations [object] Annotations for the mlfoundry server
  commonAnnotations: {}
  ## @param mlfoundryServer.commonLabels [object] Common labels for the mlfoundry server pods
  commonLabels: {}
  ## @param mlfoundryServer.deploymentLabels [object] Deployment-specific labels for the mlfoundry server
  deploymentLabels: {}
  ## @param mlfoundryServer.deploymentAnnotations [object] Deployment-specific annotations for the mlfoundry server
  deploymentAnnotations: {}
  ## mlfoundryServer.image Image for the mlfoundry server
  image:
    ## @param mlfoundryServer.image.registry Registry for the mlfoundry server image (overrides global.registry if specified)
    registry: ""
    ## @param mlfoundryServer.image.repository Image repository for the mlfoundry server (without registry)
    repository: "tfy-private-images/mlfoundry-server"
    ## @param mlfoundryServer.image.tag Image tag for the mlfoundry server
    tag: "v0.116.0"
  ## @skip mlfoundryServer.replicaCount Number of replicas for the mlfoundry server
  # replicaCount: 1
  ## @param mlfoundryServer.environmentName Environment name for the mlfoundry server
  environmentName: default
  ## @param mlfoundryServer.envSecretName Secret name for the mlfoundry server environment variables
  envSecretName: mlfoundry-server-env-secret
  ## @param mlfoundryServer.imagePullPolicy Image pull policy for the mlfoundry server
  imagePullPolicy: IfNotPresent
  ## @param mlfoundryServer.nameOverride Override name for the mlfoundry server
  nameOverride: ""
  ## @param mlfoundryServer.fullnameOverride Full name override for the mlfoundry server
  fullnameOverride: ""
  ## @param mlfoundryServer.podAnnotations [object] Annotations for the mlfoundry server pods
  podAnnotations: {}
  ## @param mlfoundryServer.podLabels [object] Labels for the mlfoundry server pods
  podLabels: {}
  ## @param mlfoundryServer.podSecurityContext [object] Security context for the mlfoundry server pods
  podSecurityContext: {}
  ## mlfoundryServer.securityContext Security context for the mlfoundry server
  securityContext:
    ## @param mlfoundryServer.securityContext.readOnlyRootFilesystem Read only root filesystem for the mlfoundry server
    readOnlyRootFilesystem: true
  ## @param mlfoundryServer.resourceTierOverride Resource tier override for the mlfoundryServer
  resourceTierOverride: ""
  ## @param mlfoundryServer.resources [object] Resource requests and limits for the mlfoundry server
  resources: {}
  # resources:
  #  limits:
  #    cpu: 1200m
  #    memory: 2048Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 600m
  #    memory: 1024Mi
  #    ephemeral-storage: 128Mi
  ## mlfoundryServer.livenessProbe Liveness probe settings for the mlfoundry server
  livenessProbe:
    ## @param mlfoundryServer.livenessProbe.failureThreshold Liveness probe failure threshold for mlfoundry server
    failureThreshold: 3
    ## @param mlfoundryServer.livenessProbe.initialDelaySeconds Liveness probe initial delay for mlfoundry server
    initialDelaySeconds: 600
    ## @param mlfoundryServer.livenessProbe.periodSeconds Liveness probe period for mlfoundry server
    periodSeconds: 10
    ## @param mlfoundryServer.livenessProbe.successThreshold Liveness probe success threshold for mlfoundry server
    successThreshold: 1
    ## @param mlfoundryServer.livenessProbe.timeoutSeconds Liveness probe timeout for mlfoundry server
    timeoutSeconds: 1
  ## mlfoundryServer.readinessProbe Readiness probe settings for the mlfoundry server
  readinessProbe:
    ## @param mlfoundryServer.readinessProbe.failureThreshold Readiness probe failure threshold for mlfoundry server
    failureThreshold: 3
    ## @param mlfoundryServer.readinessProbe.initialDelaySeconds Readiness probe initial delay for mlfoundry server
    initialDelaySeconds: 30
    ## @param mlfoundryServer.readinessProbe.periodSeconds Readiness probe period for mlfoundry server
    periodSeconds: 10
    ## @param mlfoundryServer.readinessProbe.successThreshold Readiness probe success threshold for mlfoundry server
    successThreshold: 1
    ## @param mlfoundryServer.readinessProbe.timeoutSeconds Readiness probe timeout for mlfoundry server
    timeoutSeconds: 1
  ## @param mlfoundryServer.nodeSelector Node selector for the mlfoundry server
  nodeSelector: {}
  ## @param mlfoundryServer.affinity Affinity settings for the mlfoundry server
  affinity: {}
  ## @param mlfoundryServer.topologySpreadConstraints Topology spread constraints for the mlfoundry server
  topologySpreadConstraints: []
  ## mlfoundryServer.service Service settings for the mlfoundry server
  service:
    ## @param mlfoundryServer.service.type Service type for the mlfoundry server
    type: ClusterIP
    ## @param mlfoundryServer.service.port Service port for the mlfoundry server
    port: 5000
    ## @param mlfoundryServer.service.annotations Annotations for the mlfoundry server service
    annotations: {}
    ## @param mlfoundryServer.service.labels Labels for the mlfoundry server service
    labels: {}
  ## mlfoundryServer.serviceAccount Service account settings for the mlfoundry server
  serviceAccount:
    ## @param mlfoundryServer.serviceAccount.create Bool to create a service account for the mlfoundry server
    create: false
    ## @param mlfoundryServer.serviceAccount.name Name of the mlfoundry server service account
    name: ""
    ## @param mlfoundryServer.serviceAccount.annotations [object] Annotations for the mlfoundry server service account
    annotations: {}
    ## @param mlfoundryServer.serviceAccount.labels [object] Labels for the mlfoundry server service account
    labels: {}
    ## @param mlfoundryServer.serviceAccount.automountServiceAccountToken Automount service account token for the mlfoundry server
    automountServiceAccountToken: true
  ## @param mlfoundryServer.imagePullSecrets Image pull credentials for mlfoundry server
  imagePullSecrets: []
  ## @param mlfoundryServer.extraVolumes Extra volumes for the mlfoundry server
  extraVolumes: []
  ## @param mlfoundryServer.extraVolumeMounts Extra volume mounts for the mlfoundry server
  extraVolumeMounts: []
  ## @param mlfoundryServer.env [object] Environment variables for the mlfoundry server
  env:
    NUM_APP_WORKERS: "2"
    PROMETHEUS_FASTAPI_INSTRUMENTATOR: "1"
    PROMETHEUS_MULTIPROC_DIR: /tmp
    prometheus_multiproc_dir: /tmp
    DB_NAME: ${k8s-secret/truefoundry-creds/DB_NAME}
    DB_USERNAME: ${k8s-secret/truefoundry-creds/DB_USERNAME}
    DB_PASSWORD: ${k8s-secret/truefoundry-creds/DB_PASSWORD}
    DB_HOST: ${k8s-secret/truefoundry-creds/DB_HOST}
    DB_POSTGRES_SCHEMA: mlfoundry
    DB_PORT: "5432"
    DB_DIALECT: postgresql+psycopg2
    AUTH_SERVER_URL: https://auth.truefoundry.com
    MULTITENANT: "false"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    TFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    SERVICEFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:3000
    LLM_GATEWAY_URL: LM_GATEWAY_URL="{{ .Values.global.controlPlaneURL }}/api/llm"
    ENVIRONMENT: production
###################################################################################################################
####################################### Spark History Server #######################################################
###################################################################################################################
## @section sparkHistoryServer Truefoundry spark history server values
s3proxy:
  ## @param s3proxy.enabled Bool to enable the s3 proxy
  enabled: false
  ## @param s3proxy.tolerations Tolerations specific to the s3 proxy
  tolerations: []
  ## @skip s3proxy.replicaCount Number of replicas for the s3 proxy
  # replicaCount: 1
  ## @param s3proxy.annotations [object] Annotations for the s3 proxy
  annotations: {}
  ## s3proxy.image Image for the s3 proxy
  image:
    ## @param s3proxy.image.registry Registry for the s3 proxy image (overrides global.registry if specified)
    registry: ""
    ## @param s3proxy.image.repository Image repository for the s3 proxy (without registry)
    repository: "tfy-private-images/s3proxy"
    ## @param s3proxy.image.tag Image tag for the s3 proxy
    tag: "v0.57.0"
  ## @param s3proxy.environmentName Environment name for the s3 proxy
  environmentName: default
  ## @param s3proxy.envSecretName Secret name for the s3 proxy environment variables
  envSecretName: s3proxy-env-secret
  ## @param s3proxy.imagePullPolicy Image pull policy for the s3 proxy
  imagePullPolicy: IfNotPresent
  ## @param s3proxy.nameOverride Override name for the s3 proxy
  nameOverride: ""
  ## @param s3proxy.fullnameOverride Full name override for the s3 proxy
  fullnameOverride: ""
  ## @param s3proxy.podAnnotations Annotations for the s3 proxy pods
  podAnnotations: {}
  ## @param s3proxy.podSecurityContext Security context for the s3 proxy pods
  podSecurityContext: {}
  ## @param s3proxy.commonLabels Common labels for the s3 proxy pods
  commonLabels: {}
  ## @param s3proxy.commonAnnotations [object] Common annotations for the s3 proxy pods
  commonAnnotations: {}
  ## @param s3proxy.podLabels [object] Labels for the s3 proxy pods
  podLabels: {}
  ## @param s3proxy.deploymentLabels [object] Deployment-specific labels for the s3 proxy
  deploymentLabels: {}
  ## @param s3proxy.deploymentAnnotations [object] Deployment-specific annotations for the s3 proxy
  deploymentAnnotations: {}
  ## @param s3proxy.securityContext Security context for the s3 proxy
  securityContext: {}
  ## @param s3proxy.resourceTierOverride Resource tier override for the s3proxy
  resourceTierOverride: ""
  ## @skip s3proxy.resources [object] Resource requests and limits for the s3 proxy
  # resources:
  #  ## s3proxy.resources.limits Resource limits for the s3 proxy
  #  limits:
  #    ## @param s3proxy.resources.limits.cpu CPU limit for the s3 proxy
  #    cpu: 600m
  #    ## @param s3proxy.resources.limits.memory Memory limit for the s3 proxy
  #    memory: 1600Mi
  #    ## @param s3proxy.resources.limits.ephemeral-storage Ephemeral storage limit for the s3 proxy
  #    ephemeral-storage: 256Mi
  #  ## s3proxy.resources.requests Resource requests for the s3 proxy
  #  requests:
  #    ## @param s3proxy.resources.requests.cpu CPU request for the s3 proxy
  #    cpu: 400m
  #    ## @param s3proxy.resources.requests.memory Memory request for the s3 proxy
  #    memory: 800Mi
  #    ## @param s3proxy.resources.requests.ephemeral-storage Ephemeral storage request for the s3 proxy
  #    ephemeral-storage: 128Mi
  ## s3proxy.livenessProbe Liveness probe settings for the s3 proxy
  livenessProbe:
    ## @param s3proxy.livenessProbe.failureThreshold Liveness probe failure threshold for s3 proxy
    failureThreshold: 3
    ## @param s3proxy.livenessProbe.initialDelaySeconds Liveness probe initial delay for s3 proxy
    initialDelaySeconds: 600
    ## @param s3proxy.livenessProbe.periodSeconds Liveness probe period for s3 proxy
    periodSeconds: 10
    ## @param s3proxy.livenessProbe.successThreshold Liveness probe success threshold for s3 proxy
    successThreshold: 1
    ## @param s3proxy.livenessProbe.timeoutSeconds Liveness probe timeout for s3 proxy
    timeoutSeconds: 1
  ## s3proxy.readinessProbe Readiness probe settings for the s3 proxy
  readinessProbe:
    ## @param s3proxy.readinessProbe.failureThreshold Readiness probe failure threshold for s3 proxy
    failureThreshold: 3
    ## @param s3proxy.readinessProbe.initialDelaySeconds Readiness probe initial delay for s3 proxy
    initialDelaySeconds: 30
    ## @param s3proxy.readinessProbe.periodSeconds Readiness probe period for s3 proxy
    periodSeconds: 10
    ## @param s3proxy.readinessProbe.successThreshold Readiness probe success threshold for s3 proxy
    successThreshold: 1
    ## @param s3proxy.readinessProbe.timeoutSeconds Readiness probe timeout for s3 proxy
    timeoutSeconds: 1
  ## @param s3proxy.nodeSelector Node selector for the s3 proxy
  nodeSelector: {}
  ## @param s3proxy.affinity Affinity settings for the s3 proxy
  affinity: {}
  ## @param s3proxy.topologySpreadConstraints Topology spread constraints for the s3 proxy
  topologySpreadConstraints: []
  ## s3proxy.service Service settings for the s3 proxy
  service:
    ## @param s3proxy.service.type Service type for the s3 proxy
    type: ClusterIP
    ## @param s3proxy.service.port Service port for the s3 proxy
    port: 8080
    ## @param s3proxy.service.annotations Annotations for the s3 proxy service
    annotations: {}
    ## @param s3proxy.service.labels [object] Labels for the s3 proxy service
    labels: {}
    ## s3proxy.serviceAccount Service account settings for the s3 proxy
  serviceAccount:
    ## @param s3proxy.serviceAccount.create Bool to create the s3 proxy service account
    create: false
    ## @param s3proxy.serviceAccount.name Name of the s3 proxy service account
    name: ""
    ## @param s3proxy.serviceAccount.annotations [object] Annotations for the s3 proxy service account
    annotations: {}
    ## @param s3proxy.serviceAccount.labels [object] Labels for the s3 proxy service account
    labels: {}
  ## @param s3proxy.extraVolumes Extra volumes for the s3 proxy
  extraVolumes: []
  ## @param s3proxy.extraVolumeMounts Extra volume mounts for the s3 proxy
  extraVolumeMounts: []
  ## @param s3proxy.imagePullSecrets Image pull credentials for s3 proxy
  imagePullSecrets: []
  config:
    ## @param s3proxy.config.jcloudsEndpoint JClouds endpoint for the s3 proxy
    jcloudsEndpoint: https://s3.{{ .Values.global.config.storageConfiguration.awsRegion }}.amazonaws.com
    ## @param s3proxy.config.jcloudsProvider JClouds provider for the s3 proxy
    jcloudsProvider: aws-s3
  ## @param s3proxy.env [object] Environment variables for the s3 proxy
  env:
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:3000
###################################################################################################################
####################################### Servicefoundry Server #######################################################
###################################################################################################################
## @section servicefoundryServer Truefoundry servicefoundry server values
servicefoundryServer:
  ## @param servicefoundryServer.enabled Bool to enable the servicefoundry server
  enabled: true
  ## @param servicefoundryServer.tolerations Tolerations specific to the servicefoundry server
  tolerations: []
  ## @skip servicefoundryServer.replicaCount Number of replicas for the servicefoundry server
  # replicaCount: 1
  ## @param servicefoundryServer.commonAnnotations [object] Common annotations for the servicefoundry server components
  commonAnnotations: {}
  ## @param servicefoundryServer.commonLabels [object] Common labels for the servicefoundry server pods
  commonLabels: {}
  ## @param servicefoundryServer.deploymentLabels [object] Deployment-specific labels for the servicefoundry server
  deploymentLabels: {}
  ## @param servicefoundryServer.deploymentAnnotations [object] Deployment-specific annotations for the servicefoundry server
  deploymentAnnotations: {}
  ## servicefoundryServer.image Image for the servicefoundry server
  image:
    ## @param servicefoundryServer.image.registry Registry for the servicefoundry server image (overrides global.registry if specified)
    registry: ""
    ## @param servicefoundryServer.image.repository Image repository for the servicefoundry server (without registry)
    repository: "tfy-private-images/servicefoundry-server"
    ## @param servicefoundryServer.image.tag Image tag for the servicefoundry server
    tag: "v0.118.1"
  ## @param servicefoundryServer.environmentName Environment name for the servicefoundry server
  environmentName: default
  ## @param servicefoundryServer.envSecretName Secret name for the servicefoundry server environment variables
  envSecretName: servicefoundry-server-env-secret
  ## @param servicefoundryServer.imagePullPolicy Image pull policy for the servicefoundry server
  imagePullPolicy: IfNotPresent
  ## @param servicefoundryServer.nameOverride Override name for the servicefoundry server
  nameOverride: ""
  ## @param servicefoundryServer.fullnameOverride Full name override for the servicefoundry server
  fullnameOverride: ""
  ## @param servicefoundryServer.podSecurityContext [object] Security context for the servicefoundry server pods
  podSecurityContext: {}
  ## @param servicefoundryServer.podLabels [object] Pod-specific labels for the servicefoundry server
  podLabels: {}
  ## @param servicefoundryServer.podAnnotations [object] Pod-specific annotations for the servicefoundry server
  podAnnotations: {}
  ## servicefoundryServer.securityContext Security context for the servicefoundry server
  securityContext:
    ## @param servicefoundryServer.securityContext.readOnlyRootFilesystem Read only root filesystem for the servicefoundry server
    readOnlyRootFilesystem: true
  ## @param servicefoundryServer.resourceTierOverride Resource tier override for the servicefoundryServer
  resourceTierOverride: ""
  ## @param servicefoundryServer.resources [object] Resource requests and limits for the servicefoundry server
  resources: {}
  # resources:
  #  limits:
  #    cpu: 600m
  #    memory: 1600Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 400m
  #    memory: 800Mi
  #    ephemeral-storage: 128Mi
  ## servicefoundryServer.livenessProbe Liveness probe settings for the servicefoundry server
  livenessProbe:
    ## @param servicefoundryServer.livenessProbe.failureThreshold Liveness probe failure threshold for servicefoundry server
    failureThreshold: 3
    ## @param servicefoundryServer.livenessProbe.initialDelaySeconds Liveness probe initial delay for servicefoundry server
    initialDelaySeconds: 600
    ## @param servicefoundryServer.livenessProbe.periodSeconds Liveness probe period for servicefoundry server
    periodSeconds: 10
    ## @param servicefoundryServer.livenessProbe.successThreshold Liveness probe success threshold for servicefoundry server
    successThreshold: 1
    ## @param servicefoundryServer.livenessProbe.timeoutSeconds Liveness probe timeout for servicefoundry server
    timeoutSeconds: 1
  ## servicefoundryServer.readinessProbe Readiness probe settings for the servicefoundry server
  readinessProbe:
    ## @param servicefoundryServer.readinessProbe.failureThreshold Readiness probe failure threshold for servicefoundry server
    failureThreshold: 3
    ## @param servicefoundryServer.readinessProbe.initialDelaySeconds Readiness probe initial delay for servicefoundry server
    initialDelaySeconds: 30
    ## @param servicefoundryServer.readinessProbe.periodSeconds Readiness probe period for servicefoundry server
    periodSeconds: 10
    ## @param servicefoundryServer.readinessProbe.successThreshold Readiness probe success threshold for servicefoundry server
    successThreshold: 1
    ## @param servicefoundryServer.readinessProbe.timeoutSeconds Readiness probe timeout for servicefoundry server
    timeoutSeconds: 1
  ## @param servicefoundryServer.nodeSelector Node selector for the servicefoundry server
  nodeSelector: {}
  ## @param servicefoundryServer.affinity Affinity settings for the servicefoundry server
  affinity: {}
  ## @param servicefoundryServer.topologySpreadConstraints Topology spread constraints for the servicefoundry server
  topologySpreadConstraints: []
  ## servicefoundryServer.service Service settings for the servicefoundry server
  service:
    ## @param servicefoundryServer.service.type Service type for the servicefoundry server
    type: ClusterIP
    ## @param servicefoundryServer.service.port Service port for the servicefoundry server
    port: 3000
    ## @param servicefoundryServer.service.annotations Annotations for the servicefoundry server service
    annotations: {}
    ## @param servicefoundryServer.service.labels [object] Labels for the servicefoundry server service
    labels: {}
  ## servicefoundryServer.serviceAccount Service account settings for the servicefoundry server
  serviceAccount:
    ## @param servicefoundryServer.serviceAccount.create Bool to create a service account for the servicefoundry server
    create: false
    ## @param servicefoundryServer.serviceAccount.name Name of the servicefoundry server service account
    name: ""
    ## @param servicefoundryServer.serviceAccount.annotations [object] Annotations for the servicefoundry server service account
    annotations: {}
    ## @param servicefoundryServer.serviceAccount.labels [object] Labels for the servicefoundry server service account
    labels: {}
    ## @param servicefoundryServer.serviceAccount.automountServiceAccountToken Automount service account token for the servicefoundry server
    automountServiceAccountToken: true
  ## @param servicefoundryServer.extraVolumes Extra volumes for the servicefoundry server
  extraVolumes: []
  ## @param servicefoundryServer.extraVolumeMounts Extra volume mounts for the servicefoundry server
  extraVolumeMounts: []
  ## @param servicefoundryServer.imagePullSecrets Image pull credentials for servicefoundry server
  imagePullSecrets: []
  ## servicefoundryServer.rbac RBAC settings for the servicefoundry server
  rbac:
    ## @param servicefoundryServer.rbac.enabled Enable RBAC for the servicefoundry server
    enabled: true
  ## servicefoundryServer.serviceMonitor ServiceMonitor settings for the servicefoundry server
  serviceMonitor:
    ## @param servicefoundryServer.serviceMonitor.enabled Enable ServiceMonitor for the servicefoundry server
    enabled: true
    ## @param servicefoundryServer.serviceMonitor.labels [object] Labels for the ServiceMonitor
    labels: {}
    ## @param servicefoundryServer.serviceMonitor.annotations [object] Annotations for the ServiceMonitor
    annotations: {}
  ## @param servicefoundryServer.env [object] Environment variables for the servicefoundry server
  env:
    DB_NAME: ${k8s-secret/truefoundry-creds/DB_NAME}
    DB_USERNAME: ${k8s-secret/truefoundry-creds/DB_USERNAME}
    DB_PASSWORD: ${k8s-secret/truefoundry-creds/DB_PASSWORD}
    DB_HOST: ${k8s-secret/truefoundry-creds/DB_HOST}
    DB_PORT: "5432"
    DB_SSL_CA_PATH: ""
    DB_SSL_CERT_PATH: ""
    DB_SSL_KEY_PATH: ""
    DB_SSL_MODE: ""
    TFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    CONTROL_PLANE_URL: "{{ .Values.global.controlPlaneURL }}"
    PUBLIC_CONTROL_PLANE_URL: "{{ .Values.global.controlPlaneURL }}"
    TFY_BUILD_LOGS_URL: "{{ .Values.global.controlPlaneURL }}/api/svc"
    TFY_BUILD_WS_URL: "{{ .Values.global.controlPlaneURL }}"
    AUTH_SERVER_URL: https://auth.truefoundry.com
    CONTROL_PLANE_VERSION: "{{ .Values.global.controlPlaneChartVersion }}"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    MANIFEST_SERVICE_URL: http://{{ .Release.Name }}-sfy-manifest-service.{{ include "global.namespace" . }}.svc.cluster.local:8080
    MLFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-mlfoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:5000
    NATS_CONTROLPLANE_ACCOUNT_SEED: ${k8s-secret/truefoundry-tfy-nats-secret/NATS_CONTROLPLANE_ACCOUNT_SEED}
    NATS_URL: http://{{ .Release.Name }}-tfy-nats.{{ include "global.namespace" . }}.svc.cluster.local:4222
    NATS_QGROUP_NAME: ""
    FLYTE_ADMIN_URL: http://{{ .Release.Name }}-tfy-workflow-admin-server.{{ include "global.namespace" . }}.svc.cluster.local:8089
    CLUSTER_PROXY_URL: http://{{ .Release.Name }}-tfy-controller.{{ include "global.namespace" . }}.svc.cluster.local:8123
    BUILD_CALLBACK_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:3000
    LLM_GATEWAY_URL: "{{ .Values.global.controlPlaneURL }}/api/llm"
    LLM_GATEWAY_ENABLED: "{{ .Values.tags.llmGateway }}"
    VCS_INTEGRATION_STATE_OBJECT_HASH_SECRET: ""
    GITHUB_INSTALLATION_URL: ""
    GITHUB_PRIVATE_KEY: ""
    GITHUB_APP_ID: ""
    BITBUCKET_CLIENT_ID: ""
    BITBUCKET_CLIENT_SECRET: ""
    BITBUCKET_APP_PASSWORD: ""
    GITLAB_APP_ID: ""
    GITLAB_APP_SECRET: ""
    GITLAB_SCOPE: ""
    AZURE_CLIENT_ID: ""
    AZURE_CLIENT_SECRET: ""
    MODEL_JSON_BASE_URL: https://assets.production.truefoundry.com/llm-gateway/prod/
    OAUTH_PROVIDER_TYPE: TRUEFOUNDRY
    EXTERNAL_OAUTH_ISSUER: ""
    EXTERNAL_OAUTH_CLIENT_ID: ""
    EXTERNAL_OAUTH_CLIENT_SECRET: ""
    OAUTH2_JWKS_URI: "{{ .Values.global.controlPlaneURL }}/api/svc/v1/keys/jwks"
    OAUTH2_TOKEN_ENDPOINT: "{{ .Values.global.controlPlaneURL }}/api/svc/v1/oauth2-proxy/token"
    OAUTH2_AUTHORIZATION_ENDPOINT: "{{ .Values.global.controlPlaneURL }}/api/svc/v1/oauth2-proxy/authorize"
    NODE_OPTIONS: --no-node-snapshot
    SPARK_JOB_EVENT_LOG_ENDPOINT: "{{ .Values.global.controlPlaneURL }}/api/s3proxy"
    SPARK_JOB_EVENT_LOG_BASE_DIR: sparkjob-events
    TFY_BUILD_LOGS_INFRA_COMPONENT: tfy-logs
    FE_CONTROL_PLANE_VERSION: "{{ .Values.global.controlPlaneChartVersion }}"
    FE_TENANT_NAME: "{{ .Values.global.tenantName }}"
    FE_ENABLE_LLM_GATEWAY_TRACING: "{{ .Values.tags.tracing }}"
    FE_ENABLE_LLM_GATEWAY: "{{ .Values.tags.llmGateway }}"
    DELTAFUSION_QUERY_URL: http://{{ .Release.Name }}-deltafusion-query-server.{{ include "global.namespace" . }}.svc.cluster.local:8080
    SPARK_HISTORY_SERVER_URL: http://{{ .Release.Name }}-spark-history-server.{{ include "global.namespace" . }}.svc.cluster.local:18080
    TFY_AI_GATEWAY_BASE_URL: https://gateway.truefoundry.ai
  configs:
    ## @param servicefoundryServer.configs.cicdTemplates CICD Template for servicefoundry server
    cicdTemplates: "{{ .Release.Name }}-cicd-templates-cm"
    ## @param servicefoundryServer.configs.workbenchImages Workbench Images for workbench deployments
    workbenchImages: "{{ .Release.Name }}-workbench-images-cm"
    ## @param servicefoundryServer.configs.imageMutationPolicy Image Mutations policy for workloads
    imageMutationPolicy: "{{ .Release.Name }}-image-mutation-policy-cm"
    ## @param servicefoundryServer.configs.k8sManifestValidationPolicy K8s Manifest Validation policy for workloads
    k8sManifestValidationPolicy: "{{ .Release.Name }}-k8s-manifest-validation-policy-cm"
    ## @param servicefoundryServer.configs.buildJobTemplate Build Job Template config map name for servicefoundry server. If empty, automatically uses the generated config map name from tfy-build chart when tfyBuild.jobTemplate.enabled is true
    buildJobTemplate: ""
###################################################################################################################
####################################### Spark History Server #######################################################
###################################################################################################################
## @section sparkHistoryServer Truefoundry spark history server values
sparkHistoryServer:
  ## @param sparkHistoryServer.enabled Bool to enable the spark history server
  enabled: false
  ## @param sparkHistoryServer.tolerations Tolerations specific to the spark history server
  tolerations: []
  ## @skip sparkHistoryServer.replicaCount Number of replicas for the spark history server
  # replicaCount: 1
  ## @param sparkHistoryServer.annotations [object] Annotations for the spark history server
  annotations: {}
  ## sparkHistoryServer.image Image for the spark history server
  image:
    ## @param sparkHistoryServer.image.registry Registry for the spark history server image (overrides global.registry if specified)
    registry: ""
    ## @param sparkHistoryServer.image.repository Image repository for the spark history server (without registry)
    repository: "tfy-private-images/spark-history-server"
    ## @param sparkHistoryServer.image.tag Image tag for the spark history server
    tag: "v0.105.0"
  ## @param sparkHistoryServer.environmentName Environment name for the spark history server
  environmentName: default
  ## @param sparkHistoryServer.envSecretName Secret name for the spark history server environment variables
  envSecretName: spark-history-server-env-secret
  ## @param sparkHistoryServer.imagePullPolicy Image pull policy for the spark history server
  imagePullPolicy: IfNotPresent
  ## @param sparkHistoryServer.nameOverride Override name for the spark history server
  nameOverride: ""
  ## @param sparkHistoryServer.fullnameOverride Full name override for the spark history server
  fullnameOverride: ""
  ## @param sparkHistoryServer.podAnnotations Annotations for the spark history server pods
  podAnnotations: {}
  ## @param sparkHistoryServer.podSecurityContext Security context for the spark history server pods
  podSecurityContext: {}
  ## @param sparkHistoryServer.commonLabels Common labels for the spark history server pods
  commonLabels: {}
  ## @param sparkHistoryServer.commonAnnotations [object] Common annotations for the spark history server pods
  commonAnnotations: {}
  ## @param sparkHistoryServer.podLabels [object] Labels for the spark history server pods
  podLabels: {}
  ## @param sparkHistoryServer.deploymentLabels [object] Deployment-specific labels for the spark history server
  deploymentLabels: {}
  ## @param sparkHistoryServer.deploymentAnnotations [object] Deployment-specific annotations for the spark history server
  deploymentAnnotations: {}
  ## @param sparkHistoryServer.securityContext Security context for the spark history server
  securityContext: {}
  ## @param sparkHistoryServer.resourceTierOverride Resource tier override for the sparkHistoryServer
  resourceTierOverride: ""
  ## @skip sparkHistoryServer.resources [object] Resource requests and limits for the spark history server
  # resources:
  #  ## sparkHistoryServer.resources.limits Resource limits for the spark history server
  #  limits:
  #    ## @param sparkHistoryServer.resources.limits.cpu CPU limit for the spark history server
  #    cpu: 600m
  #    ## @param sparkHistoryServer.resources.limits.memory Memory limit for the spark history server
  #    memory: 1600Mi
  #    ## @param sparkHistoryServer.resources.limits.ephemeral-storage Ephemeral storage limit for the spark history server
  #    ephemeral-storage: 256Mi
  #  ## sparkHistoryServer.resources.requests Resource requests for the spark history server
  #  requests:
  #    ## @param sparkHistoryServer.resources.requests.cpu CPU request for the spark history server
  #    cpu: 400m
  #    ## @param sparkHistoryServer.resources.requests.memory Memory request for the spark history server
  #    memory: 800Mi
  #    ## @param sparkHistoryServer.resources.requests.ephemeral-storage Ephemeral storage request for the spark history server
  #    ephemeral-storage: 128Mi
  ## sparkHistoryServer.livenessProbe Liveness probe settings for the spark history server
  livenessProbe:
    ## @param sparkHistoryServer.livenessProbe.failureThreshold Liveness probe failure threshold for spark history server
    failureThreshold: 3
    ## @param sparkHistoryServer.livenessProbe.initialDelaySeconds Liveness probe initial delay for spark history server
    initialDelaySeconds: 20
    ## @param sparkHistoryServer.livenessProbe.periodSeconds Liveness probe period for spark history server
    periodSeconds: 10
    ## @param sparkHistoryServer.livenessProbe.successThreshold Liveness probe success threshold for spark history server
    successThreshold: 1
    ## @param sparkHistoryServer.livenessProbe.timeoutSeconds Liveness probe timeout for spark history server
    timeoutSeconds: 1
  ## sparkHistoryServer.readinessProbe Readiness probe settings for the spark history server
  readinessProbe:
    ## @param sparkHistoryServer.readinessProbe.failureThreshold Readiness probe failure threshold for spark history server
    failureThreshold: 3
    ## @param sparkHistoryServer.readinessProbe.initialDelaySeconds Readiness probe initial delay for spark history server
    initialDelaySeconds: 10
    ## @param sparkHistoryServer.readinessProbe.periodSeconds Readiness probe period for spark history server
    periodSeconds: 10
    ## @param sparkHistoryServer.readinessProbe.successThreshold Readiness probe success threshold for spark history server
    successThreshold: 1
    ## @param sparkHistoryServer.readinessProbe.timeoutSeconds Readiness probe timeout for spark history server
    timeoutSeconds: 1
  ## @param sparkHistoryServer.nodeSelector Node selector for the spark history server
  nodeSelector: {}
  ## @param sparkHistoryServer.affinity Affinity settings for the spark history server
  affinity: {}
  ## @param sparkHistoryServer.topologySpreadConstraints Topology spread constraints for the spark history server
  topologySpreadConstraints: []
  ## sparkHistoryServer.service Service settings for the spark history server
  service:
    ## @param sparkHistoryServer.service.type Service type for the spark history server
    type: ClusterIP
    ## @param sparkHistoryServer.service.port Service port for the spark history server
    port: 18080
    ## @param sparkHistoryServer.service.annotations Annotations for the spark history server service
    annotations: {}
    ## @param sparkHistoryServer.service.labels [object] Labels for the spark history server service
    labels: {}
    ## sparkHistoryServer.serviceAccount Service account settings for the spark history server
  serviceAccount:
    ## @param sparkHistoryServer.serviceAccount.create Bool to create the spark history server service account
    create: false
    ## @param sparkHistoryServer.serviceAccount.name Name of the spark history server service account
    name: ""
    ## @param sparkHistoryServer.serviceAccount.annotations [object] Annotations for the spark history server service account
    annotations: {}
    ## @param sparkHistoryServer.serviceAccount.labels [object] Labels for the spark history server service account
    labels: {}
  ## @param sparkHistoryServer.extraVolumes Extra volumes for the spark history server
  extraVolumes: []
  ## @param sparkHistoryServer.extraVolumeMounts Extra volume mounts for the spark history server
  extraVolumeMounts: []
  ## @param sparkHistoryServer.imagePullSecrets Image pull credentials for spark history server
  imagePullSecrets: []
  ## sparkHistoryServer.rbac RBAC settings for the spark history server
  rbac:
    ## @param sparkHistoryServer.rbac.enabled Enable RBAC for the spark history server
    enabled: true
  ## @param sparkHistoryServer.env [object] Environment variables for the spark history server
  env:
    SPARK_HISTORY_OPTS: -Dspark.history.provider=org.apache.spark.deploy.history.MultiDirFsHistoryProvider -Dspark.jars.ivy=/tmp/ivy -Dspark.hadoop.fs.s3a.impl=org.apache.hadoop.fs.s3a.S3AFileSystem -Dspark.history.fs.logDirectory=s3a://{{ .Values.global.config.storageConfiguration.awsS3BucketName }}/{{ .Values.servicefoundryServer.env.SPARK_JOB_EVENT_LOG_BASE_DIR }} -Dspark.history.store.serializer=PROTOBUF -Dspark.hadoop.fs.s3a.aws.credentials.provider=software.amazon.awssdk.auth.credentials.DefaultCredentialsProvider -Dspark.history.fs.createHistoryDirIfNecessary=true -Dspark.history.fs.inProgressOptimization.enabled=true -Dspark.ui.proxyRedirectUri={{ .Values.global.controlPlaneURL }}
###################################################################################################################
####################################### Tfy K8s Controller #######################################################
###################################################################################################################
## @section tfyK8sController Truefoundry tfy k8s controller values
tfyK8sController:
  ## @param tfyK8sController.enabled Bool to enable the tfyK8sController
  enabled: true
  ## @param tfyK8sController.tolerations Tolerations specific to the tfyK8sController
  tolerations: []
  ## @skip tfyK8sController.replicaCount Number of replicas for the tfyK8sController
  # replicaCount: 1
  ## @param tfyK8sController.annotations [object] Annotations for the tfyK8sController
  annotations: {}
  ## tfyK8sController.image Image for the tfyK8sController
  image:
    ## @param tfyK8sController.image.registry Registry for the tfyK8sController image (overrides global.registry if specified)
    registry: ""
    ## @param tfyK8sController.image.repository Image repository for the tfyK8sController (without registry)
    repository: "tfy-private-images/tfy-k8s-controller"
    ## @param tfyK8sController.image.tag Image tag for the tfyK8sController
    tag: "v0.118.0"
  ## @param tfyK8sController.environmentName Environment name for tfyK8sController
  environmentName: default
  ## @param tfyK8sController.envSecretName Secret name for the tfyK8sController environment variables
  envSecretName: "tfy-k8s-controller-env-secret"
  ## @param tfyK8sController.imagePullPolicy Image pull policy for the tfyK8sController
  imagePullPolicy: IfNotPresent
  ## @param tfyK8sController.nameOverride Override name for the tfyK8sController
  nameOverride: ""
  ## @param tfyK8sController.fullnameOverride Full name override for the tfyK8sController
  fullnameOverride: ""
  ## @param tfyK8sController.podAnnotations [object] Annotations for the tfyK8sController pods
  podAnnotations:
    karpenter.sh/do-not-disrupt: "true"
    cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
  ## @param tfyK8sController.podSecurityContext Security context for the tfyK8sController pods
  podSecurityContext: {}
  ## @param tfyK8sController.commonLabels Common labels for the tfyK8sController pods
  commonLabels: {}
  ## @param tfyK8sController.commonAnnotations [object] Common annotations for the tfyK8sController pods
  commonAnnotations: {}
  ## @param tfyK8sController.podLabels [object] Labels for the tfyK8sController pods
  podLabels: {}
  ## @param tfyK8sController.deploymentLabels [object] Deployment-specific labels for the tfyK8sController
  deploymentLabels: {}
  ## @param tfyK8sController.deploymentAnnotations [object] Deployment-specific annotations for the tfyK8sController
  deploymentAnnotations: {}
  ## tfyK8sController.securityContext Security context for the tfyK8sController
  securityContext:
    ## @param tfyK8sController.securityContext.readOnlyRootFilesystem Read only root filesystem for the tfyK8sController
    readOnlyRootFilesystem: true
  ## @param tfyK8sController.resourceTierOverride Resource tier override for the tfyK8sController
  resourceTierOverride: ""
  ## @param tfyK8sController.resources [object] Resource requests and limits for the tfyK8sController
  resources: {}
  # resources:
  #  limits:
  #    cpu: 400m
  #    memory: 512Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 200m
  #    memory: 256Mi
  #    ephemeral-storage: 128Mi
  ## tfyK8sController.livenessProbe Liveness probe settings for the tfyK8sController
  livenessProbe:
    ## @param tfyK8sController.livenessProbe.failureThreshold Liveness probe failure threshold for tfyK8sController
    failureThreshold: 3
    ## @param tfyK8sController.livenessProbe.initialDelaySeconds Liveness probe initial delay for tfyK8sController
    initialDelaySeconds: 600
    ## @param tfyK8sController.livenessProbe.periodSeconds Liveness probe period for tfyK8sController
    periodSeconds: 10
    ## @param tfyK8sController.livenessProbe.successThreshold Liveness probe success threshold for tfyK8sController
    successThreshold: 1
    ## @param tfyK8sController.livenessProbe.timeoutSeconds Liveness probe timeout for tfyK8sController
    timeoutSeconds: 1
  ## tfyK8sController.readinessProbe Readiness probe settings for the tfyK8sController
  readinessProbe:
    ## @param tfyK8sController.readinessProbe.failureThreshold Readiness probe failure threshold for tfyK8sController
    failureThreshold: 3
    ## @param tfyK8sController.readinessProbe.initialDelaySeconds Readiness probe initial delay for tfyK8sController
    initialDelaySeconds: 30
    ## @param tfyK8sController.readinessProbe.periodSeconds Readiness probe period for tfyK8sController
    periodSeconds: 10
    ## @param tfyK8sController.readinessProbe.successThreshold Readiness probe success threshold for tfyK8sController
    successThreshold: 1
    ## @param tfyK8sController.readinessProbe.timeoutSeconds Readiness probe timeout for tfyK8sController
    timeoutSeconds: 1
  ## @param tfyK8sController.nodeSelector Node selector for the tfyK8sController
  nodeSelector: {}
  ## @param tfyK8sController.affinity Affinity settings for the tfyK8sController
  affinity: {}
  ## @param tfyK8sController.topologySpreadConstraints Topology spread constraints for the tfyK8sController
  topologySpreadConstraints: []
  ## tfyK8sController.service Service settings for the tfyK8sController
  service:
    ## @param tfyK8sController.service.type Service type for the tfyK8sController
    type: ClusterIP
    ## @param tfyK8sController.service.port Service port for the tfyK8sController
    port: 3002
    ## @param tfyK8sController.service.annotations Annotations for the tfyK8sController service
    annotations: {}
    ## @param tfyK8sController.service.labels [object] Labels for the tfyK8sController service
    labels: {}
    ## tfyK8sController.serviceAccount Service account settings for the tfyK8sController
  serviceAccount:
    ## @param tfyK8sController.serviceAccount.create Bool to create a service account for the tfyK8sController
    create: true
    ## @param tfyK8sController.serviceAccount.name Name of the tfyK8sController service account
    name: "tfy-k8s-controller"
    ## @param tfyK8sController.serviceAccount.annotations [object] Annotations for the tfyK8sController service account
    annotations: {}
    ## @param tfyK8sController.serviceAccount.labels [object] Labels for the tfyK8sController service account
    labels: {}
    ## @param tfyK8sController.serviceAccount.automountServiceAccountToken Automount service account token for the tfyK8sController service account
    automountServiceAccountToken: true
  ## @param tfyK8sController.extraVolumes Extra volumes for the tfyK8sController
  extraVolumes: []
  ## @param tfyK8sController.extraVolumeMounts Extra volume mounts for the tfyK8sController
  extraVolumeMounts: []
  ## tfyK8sController.serviceMonitor ServiceMonitor settings for the tfyK8sController
  serviceMonitor:
    ## @param tfyK8sController.serviceMonitor.enabled Enable ServiceMonitor for the tfyK8sController
    enabled: true
    ## @param tfyK8sController.serviceMonitor.labels [object] Labels for the ServiceMonitor
    labels: {}
    ## @param tfyK8sController.serviceMonitor.annotations [object] Annotations for the ServiceMonitor
    annotations: {}
  ## @param tfyK8sController.imagePullSecrets Image pull secrets for the tfyK8sController
  ##
  imagePullSecrets: []
  ## @param tfyK8sController.env [object] Environment variables for the tfyK8sController
  env:
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:3000
    MLFOUNDRY_SERVER_URL: https://{{ .Release.Name }}.mlfoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:5000
    CONTROL_PLANE_NATS_URL: http://{{ .Release.Name }}-tfy-nats.{{ include "global.namespace" . }}.svc.cluster.local:4222
    CONTROL_PLANE_URL: "{{ .Values.global.controlPlaneURL }}"
    SFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    CLUSTER_PROXY_URL: http://{{ .Release.Name }}-tfy-controller.{{ include "global.namespace" . }}.svc.cluster.local:8123
    CONTROL_PLANE_VERSION: "{{ .Values.global.controlPlaneChartVersion }}"
    ANALYTICS_SERVER_URL: https://analytics.truefoundry.com
    AUTH_SERVER_URL: https://auth.truefoundry.com
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    ENABLE_GATEWAY_CONSUMER: "{{ .Values.tags.llmGatewayRequestLogging }}"
    NODE_ENV: production
    SENTRY_ENABLED: "true"
    RUN_CLUSTER_STATUS_CRON: "true"
    MODEL_JSON_BASE_URL: https://assets.production.truefoundry.com/llm-gateway/prod/
    RUN_MODEL_COST_SYNC_CRON: "true"
    DELTAFUSION_INGESTOR_URL: http://{{ .Release.Name }}-deltafusion-ingestor.{{ include "global.namespace" . }}.svc.cluster.local:8000
    DELTAFUSION_QUERY_SERVER_URL: http://{{ .Release.Name }}-deltafusion-query-server.{{ include "global.namespace" . }}.svc.cluster.local:8080
###################################################################################################################
####################################### Sfy Manifest Service ######################################################
###################################################################################################################
## @section sfyManifestService Truefoundry sfy manifest service values
sfyManifestService:
  ## @param sfyManifestService.enabled Bool to enable the sfy manifest service
  enabled: true
  # SFY_API_KEY: <api_key>
  ## @param sfyManifestService.annotations [object] Annotations for the sfy manifest service
  annotations: {}
  ## @param sfyManifestService.tolerations Tolerations specific to the sfy manifest service
  tolerations: []
  ## sfyManifestService.image Image for the sfy manifest service
  image:
    ## @param sfyManifestService.image.registry Registry for the sfy manifest service image (overrides global.registry if specified)
    registry: ""
    ## @param sfyManifestService.image.repository Image repository for the sfy manifest service (without registry)
    repository: "tfy-private-images/sfy-manifest-service"
    ## @param sfyManifestService.image.tag Image tag for the sfy manifest service
    tag: "v0.111.0"
  ## @skip sfyManifestService.replicaCount Number of replicas for the sfy manifest service
  # replicaCount: 1
  ## @param sfyManifestService.environmentName Environment name for the sfy manifest service
  environmentName: default
  ## @param sfyManifestService.envSecretName Secret name for the sfy manifest service environment variables
  envSecretName: sfy-manifest-service-env-secret
  ## @param sfyManifestService.imagePullPolicy Image pull policy for the sfy manifest service
  imagePullPolicy: IfNotPresent
  ## @param sfyManifestService.nameOverride Override name for the sfy manifest service
  nameOverride: ""
  ## @param sfyManifestService.fullnameOverride Full name override for the sfy manifest service
  fullnameOverride: ""
  ## @param sfyManifestService.podAnnotations Annotations for the sfy manifest service pods
  podAnnotations: {}
  ## @param sfyManifestService.podSecurityContext Security context for the sfy manifest service pods
  podSecurityContext: {}
  ## @param sfyManifestService.commonLabels Common labels for the sfy manifest service pods
  commonLabels: {}
  ## @param sfyManifestService.commonAnnotations [object] Common annotations for the sfy manifest service pods
  commonAnnotations: {}
  ## @param sfyManifestService.podLabels [object] Labels for the sfy manifest service pods
  podLabels: {}
  ## @param sfyManifestService.deploymentLabels [object] Deployment-specific labels for the sfy manifest service
  deploymentLabels: {}
  ## @param sfyManifestService.deploymentAnnotations [object] Deployment-specific annotations for the sfy manifest service
  deploymentAnnotations: {}
  ## sfyManifestService.securityContext Security context for the sfy manifest service
  securityContext:
    ## @param sfyManifestService.securityContext.readOnlyRootFilesystem Read only root filesystem for the sfy manifest service
    readOnlyRootFilesystem: false
  ## @param sfyManifestService.resourceTierOverride Resource tier override for the sfyManifestService
  resourceTierOverride: ""
  ## @param sfyManifestService.resources [object] Resource requests and limits for the sfy manifest service
  resources: {}
  # resources:
  #  limits:
  #    cpu: 200m
  #    memory: 512Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 100m
  #    memory: 256Mi
  #    ephemeral-storage: 128Mi
  ## sfyManifestService.livenessProbe Liveness probe settings for the sfy manifest service
  livenessProbe:
    ## @param sfyManifestService.livenessProbe.failureThreshold Liveness probe failure threshold for sfy manifest service
    failureThreshold: 3
    ## @param sfyManifestService.livenessProbe.initialDelaySeconds Liveness probe initial delay for sfy manifest service
    initialDelaySeconds: 600
    ## @param sfyManifestService.livenessProbe.periodSeconds Liveness probe period for sfy manifest service
    periodSeconds: 10
    ## @param sfyManifestService.livenessProbe.successThreshold Liveness probe success threshold for sfy manifest service
    successThreshold: 1
    ## @param sfyManifestService.livenessProbe.timeoutSeconds Liveness probe timeout for sfy manifest service
    timeoutSeconds: 1
  ## sfyManifestService.readinessProbe Readiness probe settings for the sfy manifest service
  readinessProbe:
    ## @param sfyManifestService.readinessProbe.failureThreshold Readiness probe failure threshold for sfy manifest service
    failureThreshold: 3
    ## @param sfyManifestService.readinessProbe.initialDelaySeconds Readiness probe initial delay for sfy manifest service
    initialDelaySeconds: 30
    ## @param sfyManifestService.readinessProbe.periodSeconds Readiness probe period for sfy manifest service
    periodSeconds: 10
    ## @param sfyManifestService.readinessProbe.successThreshold Readiness probe success threshold for sfy manifest service
    successThreshold: 1
    ## @param sfyManifestService.readinessProbe.timeoutSeconds Readiness probe timeout for sfy manifest service
    timeoutSeconds: 1
  ## @param sfyManifestService.nodeSelector Node selector for the sfy manifest service
  nodeSelector: {}
  ## @param sfyManifestService.affinity Affinity settings for the sfy manifest service
  affinity: {}
  ## @param sfyManifestService.topologySpreadConstraints Topology spread constraints for the sfy manifest service
  topologySpreadConstraints: []
  ## sfyManifestService.serviceMonitor ServiceMonitor settings for the sfy manifest service
  serviceMonitor:
    ## @param sfyManifestService.serviceMonitor.enabled Enable ServiceMonitor for the sfy manifest service
    enabled: true
    ## @param sfyManifestService.serviceMonitor.labels [object] Labels for the ServiceMonitor
    labels: {}
    ## @param sfyManifestService.serviceMonitor.annotations [object] Annotations for the ServiceMonitor
    annotations: {}
  ## sfyManifestService.service Service settings for the sfy manifest service
  service:
    ## @param sfyManifestService.service.type Service type for the sfy manifest service
    type: ClusterIP
    ## @param sfyManifestService.service.port Service port for the sfy manifest service
    port: 8080
    ## @param sfyManifestService.service.annotations Annotations for the sfy manifest service
    annotations: {}
    ## @param sfyManifestService.service.labels [object] Labels for the sfy manifest service
    labels: {}
  ## sfyManifestService.serviceAccount Service account settings for the sfy manifest service
  serviceAccount:
    ## @param sfyManifestService.serviceAccount.create Bool to create a service account for the sfy manifest service
    create: true
    ## @param sfyManifestService.serviceAccount.name Name of the sfy manifest service service account
    name: "sfy-manifest-service"
    ## @param sfyManifestService.serviceAccount.annotations [object] Annotations for the sfy manifest service service account
    annotations: {}
    ## @param sfyManifestService.serviceAccount.labels [object] Labels for the sfy manifest service service account
    labels: {}
    ## @param sfyManifestService.serviceAccount.automountServiceAccountToken Automount service account token for the sfy manifest service
    automountServiceAccountToken: true
  ## @param sfyManifestService.extraVolumes Extra volumes for the sfy manifest service
  extraVolumes: []
  ## @param sfyManifestService.extraVolumeMounts Extra volume mounts for the sfy manifest service
  extraVolumeMounts: []
  ## @param sfyManifestService.imagePullSecrets Image pull credentials for the sfy manifest service
  imagePullSecrets: []
  ## @param sfyManifestService.env [object] Environment variables for the sfy manifest service
  env:
    GIN_MODE: release
    PORT: "8080"
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    MLF_SERVER_URL: http://{{ .Release.Name }}-mlfoundry-server.{{ .Release.Namespace }}.svc.cluster.local:5000
    SFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    PROCESS_TICKER_PERIOD_SECONDS: "5"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    AUTH_SERVER_URL: https://auth.truefoundry.com
    HELM_SIZE_LIMIT_BYTES: "307200"
    ASYNC_PROCESSOR_SIDECAR_IMAGE: tfy.jfrog.io/tfy-images/async_processor:ba3072066ea158c3b759e8d5c974557b0cad795d
    TFY_MODEL_DOWNLOADER_IMAGE: tfy.jfrog.io/tfy-images/tfy-model-downloader:0.1.8
    TFY_NOTIFICATION_SENDER_IMAGE: tfy.jfrog.io/tfy-images/tfy-notification-sender:0.0.4
    APP_CATALOGUE_ENDPOINT: https://catalogue.truefoundry.com/templates/
    AUTOPILOT_PROCESSOR_ENABLED: "false"
    AUTOPILOT_PROCESSOR_NATS_URL: nats://{{ .Release.Name }}-tfy-nats.{{ .Release.Namespace }}.svc.cluster.local:4222
    AUTOPILOT_PROCESSOR_NATS_PULL_MAX_BYTES: "10485760"
    AUTOPILOT_PROCESSOR_NATS_ACK_WAIT: "120"
    AUTOPILOT_PROCESSOR_PUBLISH_ASYNC_MAX_PENDING: "100"
    AUTOPILOT_PROCESSOR_NUMBER_OF_WORKERS: "2"
    TFY_MANIFESTS_TEMPLATE_CHART_CONFIG: '{"repoType": "helm", "repoURL": "https://truefoundry.github.io/infra-charts/", "chart": "tfy-manifests-template", "targetRevision": "0.2.0" }'
    ADDITIONAL_KUSTOMIZE_PATCHES: ""
    POD_CUSTOMIZATIONS: '{"affinity": {},"nodeSelector": {},"tolerations": []}'
###################################################################################################################
######################################### Tfy Build ###############################################################
###################################################################################################################
## @section tfyBuild Truefoundry tfy build settings
tfyBuild:
  ## @param tfyBuild.enabled Bool to enable the tfyBuild server
  enabled: true
  ## @param tfyBuild.commonAnnotations [object] Annotations for the tfyBuild server
  commonAnnotations: {}
  ## @param tfyBuild.commonLabels [object] Labels for the tfyBuild server
  commonLabels: {}
  ## @param tfyBuild.deploymentLabels [object] Deployment-specific labels for the tfyBuild server
  deploymentLabels: {}
  ## @param tfyBuild.deploymentAnnotations [object] Deployment-specific annotations for the tfyBuild server
  deploymentAnnotations: {}
  ## @param tfyBuild.podAnnotations [object] Annotations for the tfyBuild server pods
  podAnnotations: {}
  ## @param tfyBuild.podLabels [object] Labels for the tfyBuild server pods
  podLabels: {}
  ## @param tfyBuild.nameOverride Override name for the tfyBuild server
  nameOverride: ""
  ## @param tfyBuild.fullnameOverride Full name override for the tfyBuild server
  fullnameOverride: ""
  ## tfyBuild.serviceAccount Service account settings for the tfyBuild server
  serviceAccount:
    ## @param tfyBuild.serviceAccount.create Bool to create a service account for the tfyBuild server
    create: false
    ## @param tfyBuild.serviceAccount.name Name of the tfyBuild server service account
    name: ""
    ## @param tfyBuild.serviceAccount.annotations [object] Annotations for the tfyBuild server service account
    annotations: {}
    ## @param tfyBuild.serviceAccount.labels [object] Labels for the tfyBuild server service account
    labels: {}
    ## @param tfyBuild.serviceAccount.automountServiceAccountToken Automount service account token for the tfyBuild server
    automountServiceAccountToken: true
  ## tfyBuild.preemptibleDeployment Preemptible deployment settings for the tfyBuild server
  preemptibleDeployment:
    ## @param tfyBuild.preemptibleDeployment.enabled Bool to enable preemptible deployment for the tfyBuild server
    enabled: false
    ## @param tfyBuild.preemptibleDeployment.imagePullSecrets Image pull secrets for the preemptible deployment
    imagePullSecrets: []
    ## @param tfyBuild.preemptibleDeployment.affinity Affinity settings for the preemptible deployment
    affinity: {}
    ## @param tfyBuild.preemptibleDeployment.nodeSelector Node selector for the preemptible deployment
    nodeSelector: {}
    ## @param tfyBuild.preemptibleDeployment.tolerations Tolerations for the preemptible deployment
    tolerations: []
    ## @param tfyBuild.preemptibleDeployment.extraEnvs Extra environment variables for the tfyBuild server
    extraEnvs: []
    ## @param tfyBuild.preemptibleDeployment.extraVolumeMounts Extra volume mounts for the tfyBuild server
    extraVolumeMounts: []
    ## @param tfyBuild.preemptibleDeployment.extraVolumes Extra volumes for the tfyBuild server
    extraVolumes: []
  ## tfyBuild.truefoundryWorkflows Truefoundry workflows settings for the tfyBuild server
  truefoundryWorkflows:
    ## @param tfyBuild.truefoundryWorkflows.enabled Bool to enable truefoundry workflows
    enabled: true
    ## tfyBuild.truefoundryWorkflows.sfyBuilder SfyBuilder settings for the tfyBuild server
    sfyBuilder:
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.extraEnvs Extra environment variables for sfyBuilder
      extraEnvs: []
      ## tfyBuild.truefoundryWorkflows.sfyBuilder.image SfyBuilder image settings
      image:
        ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.image.registry Registry for the sfyBuilder image (overrides global.registry if specified)
        registry: ""
        ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.image.repository Repository for the sfyBuilder (without registry)
        repository: "tfy-images/sfy-builder"
        ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.image.tag Tag for the sfyBuilder
        tag: v0.8.22
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.imagePullSecrets Image pull secrets for the sfyBuilder
      ##
      imagePullSecrets: []
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.baseImagePullSecret baseImagePullSecret for the docker config
      baseImagePullSecret: "truefoundry-image-pull-secret"
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.script script for the sfyBuilder to be executed
      script: |
        # Code will be downloaded in the directory set by the SOURCE_CODE_DOWNLOAD_PATH environment variable
        download-code.sh
        registry-login.sh
        wait-for-builder.sh
        build-and-push.sh

        # This script will be executed only when all the above scripts are successfully executed. If any of the above scripts fail, this script will not be executed, and the build will be marked as failed.
        update-build.sh '{"status":"SUCCEEDED"}'
      ## tfyBuild.truefoundryWorkflows.sfyBuilder.resources Resource requests and limits for the sfyBuilder
      resources:
        ## tfyBuild.truefoundryWorkflows.sfyBuilder.resources.limits Resource limits for the sfyBuilder
        limits:
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.limits.cpu CPU limit for the sfyBuilder
          cpu: 1
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.limits.ephemeral-storage Ephemeral storage limit for the sfyBuilder
          ephemeral-storage: 20Gi
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.limits.memory Memory limit for the sfyBuilder
          memory: 2Gi
        ## tfyBuild.truefoundryWorkflows.sfyBuilder.resources.requests Resource requests for the sfyBuilder
        requests:
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.requests.cpu CPU request for the sfyBuilder
          cpu: 200m
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.requests.ephemeral-storage Ephemeral storage request for the sfyBuilder
          ephemeral-storage: 10Gi
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.requests.memory Memory request for the sfyBuilder
          memory: 500Mi
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.buildSecrets [array] Build secrets for the sfyBuilder
      buildSecrets: []
      # - id: pip.conf
      #   valueFrom:
      #     secretName: artifactory-pypi-creds
      #     secretKey: artifactory.conf
      ## @skip tfyBuild.truefoundryWorkflows.buildkitd Settings for the buildkitd
      ## tfyBuild.truefoundryWorkflows.buildkitd Buildkitd settings for the tfyBuild server
    buildkitd:
      image:
        registry: ""
        repository: "tfy-images/tfy-buildkit"
        tag: 0.1.2
      imagePullSecrets: []
      metadata:
        labels:
          app: buildkit
        annotations:
          cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
          karpenter.sh/do-not-disrupt: "true"
          karpenter.sh/do-not-evict: "true"
      resources:
        limits:
          cpu: 2
          ephemeral-storage: 70Gi
          memory: 8Gi
        requests:
          cpu: 2
          ephemeral-storage: 70Gi
          memory: 8Gi
      nodeSelector: {}
      extraVolumes: []
      extraVolumeMounts: []
      extraEnvs: []
      affinity: {}
      tolerations: []
    ## @param tfyBuild.truefoundryWorkflows.extraEnvs Extra environment variables for the tfyBuild server
    extraEnvs: []
    ## @param tfyBuild.truefoundryWorkflows.extraVolumeMounts Extra volume mounts for the tfyBuild server
    extraVolumeMounts: []
    ## @param tfyBuild.truefoundryWorkflows.extraVolumes Extra volumes for the tfyBuild server
    extraVolumes: []
    ## @param tfyBuild.truefoundryWorkflows.affinity Affinity settings for the tfyBuild server
    affinity: {}
    ## @param tfyBuild.truefoundryWorkflows.nodeSelector Node selector for the tfyBuild server
    nodeSelector: {}
    ##  tfyBuild.truefoundryWorkflows.logMarkers Log markers for the tfyBuild server
    logMarkers:
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.error Error log marker for the tfyBuild server
      error: \033[31m[Error]\033[0m
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.done Done log marker for the tfyBuild server
      done: \033[32m[Done]\033[0m
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.start Start log marker for the tfyBuild server
      start: \033[36m[Start]\033[0m
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.clientPrefix Client prefix for the tfyBuild server
      clientPrefix:
        - TFY-CLIENT
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.supportSlack Slack support URL for the tfyBuild server
      supportSlack: >-
        https://join.slack.com/t/truefoundry/shared_invite/zt-11ht512jq-nDJq~HJMqc6wBw90JVlo7g
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.serviceFoundryUiUrl Service foundry UI URL
      serviceFoundryUiUrl: https://app.truefoundry.com/workspace
    ## tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush SOCI index build and push settings for the tfyBuild server
    sociIndexBuildAndPush:
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.enabled Bool to enable SOCI index build and push
      enabled: true
      ## tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.image Image for the SOCI index build and push
      image:
        ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.image.registry Registry for the SOCI index build and push image (overrides global.registry if specified)
        registry: ""
        ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.image.repository Repository for the SOCI index build and push (without registry)
        repository: "tfy-images/sfy-builder"
        ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.image.tag Tag for the SOCI index build and push
        tag: v0.8.22
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.imagePullSecrets Image pull secrets for the sociIndexBuildAndPush
      ##
      imagePullSecrets: []
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.imageSizeThresholdBytes Image size threshold for the SOCI index build and push
      imageSizeThresholdBytes: 419430400
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.extraEnvs Extra environment variables for the SOCI index build and push
      extraEnvs: []
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.extraVolumeMounts Extra volume mounts for the SOCI index build and push
      extraVolumeMounts: []
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.extraVolumes
      extraVolumes: []
  ## tfyBuild.jobTemplate Job template settings for dynamic build job creation
  jobTemplate:
    ## @param tfyBuild.jobTemplate.enabled Bool to enable job template (disables truefoundryWorkflows when enabled)
    enabled: false
    ## tfyBuild.jobTemplate.image Image for the build job
    image:
      ## @param tfyBuild.jobTemplate.image.registry Registry for the build job image (overrides global.registry if specified)
      registry: ""
      ## @param tfyBuild.jobTemplate.image.repository Repository for the build job (without registry)
      repository: "tfy-images/sfy-builder"
      ## @param tfyBuild.jobTemplate.image.tag Tag for the build job
      tag: v0.8.22
    ## @param tfyBuild.jobTemplate.activeDeadlineSeconds Active deadline seconds for the build job
    activeDeadlineSeconds: 14400
    ## @param tfyBuild.jobTemplate.ttlSecondsAfterFinished TTL seconds after finished for the build job
    ttlSecondsAfterFinished: 3600
    ## @param tfyBuild.jobTemplate.nodeSelector Node selector for the build job
    nodeSelector: {}
    ## @param tfyBuild.jobTemplate.affinity Affinity settings for the build job
    affinity: {}
    ## @param tfyBuild.jobTemplate.tolerations Tolerations for the build job
    tolerations: []
    ## @param tfyBuild.jobTemplate.extraEnvs Extra environment variables for the build job
    extraEnvs: []
    ## @param tfyBuild.jobTemplate.extraVolumeMounts Extra volume mounts for the build job
    extraVolumeMounts: []
    ## @param tfyBuild.jobTemplate.extraVolumes Extra volumes for the build job
    extraVolumes: []
    ## @param tfyBuild.jobTemplate.buildSecrets Build secrets for the build job
    buildSecrets: []
    ## @param tfyBuild.jobTemplate.baseImagePullSecret baseImagePullSecret for the docker config
    baseImagePullSecret: ""
    ## tfyBuild.jobTemplate.logMarkers Log markers for the build job
    logMarkers:
      ## @param tfyBuild.jobTemplate.logMarkers.done Done log marker for the build job
      done: \033[32m[Done]\033[0m
      ## @param tfyBuild.jobTemplate.logMarkers.failed Failed log marker for the build job
      failed: \033[31m[Error]\033[0m
    ## @param tfyBuild.jobTemplate.sourceCodeDownloadPath Source code download path for the build job
    sourceCodeDownloadPath: "/mnt/tfy/source-code"
    ## @param tfyBuild.jobTemplate.sizeThreshold Size threshold for SOCI index building
    sizeThreshold: "100000000"
    ## @param tfyBuild.jobTemplate.script Build script for the job template
    script: |
      #!/bin/bash
      set -Eeuo pipefail
      on_error() {
        ec=$?
        echo "Failure encountered. Updating build status to FAILED..."
        update-build.sh '{"status":"FAILED"}'
        exit "$ec"
      }
      trap on_error ERR
      export PATH=$PATH:/scripts
      mkdir -p /opt/truefoundry/output

      # Download source code
      echo "Downloading source code..."
      download-code.sh

      # Login to registry
      echo "Logging into registry..."
      registry-login.sh

      # Build and push image
      echo "Starting build and push..."
      if build-and-push.sh; then
        echo "Build completed successfully"

        # Update status to success
        echo "Updating build status to SUCCEEDED..."
        update-build.sh '{"status":"SUCCEEDED"}'

        # Check if SOCI index should be built
        if should-build-soci-index.sh; then
          echo "Building SOCI index..."
          if build-soci-index.sh; then
            echo "SOCI index built successfully"
          else
            echo "SOCI index build failed, but continuing..."
          fi
        else
          echo "Skipping SOCI index build - image size below threshold"
        fi
      else
        echo "Build failed with exit code $?"
        echo "Updating build status to FAILED..."
        update-build.sh '{"status":"FAILED"}'
        exit 1
      fi
    ## tfyBuild.jobTemplate.resources Resource requests and limits for the build job
    resources:
      ## tfyBuild.jobTemplate.resources.limits Resource limits for the build job
      limits:
        ## @param tfyBuild.jobTemplate.resources.limits.cpu CPU limit for the build job
        cpu: "1"
        ## @param tfyBuild.jobTemplate.resources.limits.memory Memory limit for the build job
        memory: "2Gi"
        ## @param tfyBuild.jobTemplate.resources.limits.ephemeralStorage Ephemeral storage limit for the build job
        ephemeralStorage: "20Gi"
      ## tfyBuild.jobTemplate.resources.requests Resource requests for the build job
      requests:
        ## @param tfyBuild.jobTemplate.resources.requests.cpu CPU request for the build job
        cpu: "200m"
        ## @param tfyBuild.jobTemplate.resources.requests.memory Memory request for the build job
        memory: "500Mi"
        ## @param tfyBuild.jobTemplate.resources.requests.ephemeralStorage Ephemeral storage request for the build job
        ephemeralStorage: "10Gi"
###################################################################################################################
######################################## Tfy Buildkitd Service ####################################################
###################################################################################################################
## tfy-buildkitd-service Settings corresponding to the tfy-buildkitd service
tfy-buildkitd-service:
  ## @param tfy-buildkitd-service.enabled Bool to enable the tfy-buildkitd service
  enabled: true
  serviceAccount:
    ## @param tfy-buildkitd-service.serviceAccount.create Bool to create a service account for the tfy-buildkitd service
    create: true
    ## @param tfy-buildkitd-service.serviceAccount.name Name of the tfy-buildkitd service service account
    name: "tfy-buildkitd-service"
    ## @param tfy-buildkitd-service.serviceAccount.annotations [object] Annotations for the tfy-buildkitd service service account
    annotations: {}
    ## @param tfy-buildkitd-service.serviceAccount.labels [object] Labels for the tfy-buildkitd service service account
    labels: {}
    ## @param tfy-buildkitd-service.serviceAccount.automountServiceAccountToken Automount service account token for the tfy-buildkitd service
    automountServiceAccountToken: true
  ## tfy-buildkitd-service.service Service settings for the tfy-buildkitd service
  service:
    ## @param tfy-buildkitd-service.service.port port number for the tfy-buildkitd service
    port: 1234
  ## tfy-buildkitd-service.image
  image:
    ## @param tfy-buildkitd-service.image.registry Registry for the tfy-buildkitd-service image (overrides global.registry if specified)
    registry: ""
    ## @param tfy-buildkitd-service.image.repository tfyBuildkitdService repository (without registry)
    repository: "tfy-mirror/moby/buildkit"
  ## @param tfy-buildkitd-service.replicaCount Number of replicas Value kept for future use, kept 1
  replicaCount: 1
  ## @skip tfy-buildkitd-service.podAnnotations Annotations for the tfy-buildkitd service pods
  podAnnotations:
    cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
    karpenter.sh/do-not-disrupt: "true"
    karpenter.sh/do-not-evict: "true"
  ## tfy-buildkitd-service.tls TLS settings for the tfy-buildkitd service
  tls:
    ## @param tfy-buildkitd-service.tls.enabled Enable TLS for the tfy-buildkitd service
    enabled: true
    ## @param tfy-buildkitd-service.tls.buildkitClientCertsSecretName Name of the secret containing the TLS certificate
    buildkitClientCertsSecretName: "tfy-buildkit-client-certs"
###################################################################################################################
######################################## PostgreSQL ##############################################################
###################################################################################################################
## postgresql Settings corresponding to the postgresql database. During cleanup, make sure to remove any stray pvc that might be created.
postgresql:
  ## @skip postgresql.global Global settings for the postgresql database
  global:
    security:
      allowInsecureImages: true
  ## postgresql.auth PostgreSQL authentication configuration
  auth:
    ## @param postgresql.auth.existingSecret Name of the existing secret for PostgreSQL authentication
    existingSecret: "truefoundry-creds"
    ## @param postgresql.auth.database Name of the database for PostgreSQL
    database: "truefoundry"
    ## @skip postgresql.auth.secretKeys Secret keys for PostgreSQL authentication
    secretKeys:
      userPasswordKey: DB_PASSWORD
      adminPasswordKey: DB_PASSWORD
      replicationPasswordKey: DB_PASSWORD
  ## postgresql.image Image for PostgreSQL
  image:
    ## @param postgresql.image.registry Registry for the PostgreSQL image (overrides global.registry if specified)
    registry: "tfy.jfrog.io"
    ## @param postgresql.image.repository Repository for the PostgreSQL image (without registry)
    repository: "tfy-images/postgresql"
    ## @param postgresql.image.tag
    tag: 16.6.0-debian-12-r2
  ## postgresql.primary Primary PostgreSQL settings
  primary:
    ## @skip postgresql.primary.networkPolicy Network policy settings for the primary PostgreSQL pod
    networkPolicy:
      enabled: false
    ## @skip postgresql.primary.tolerations Tolerations for the primary PostgreSQL pod
    tolerations:
      - key: class.truefoundry.io/control-plane
        effect: NoSchedule
        operator: Exists
      - key: "cloud.google.com/gke-spot"
        value: "true"
        effect: NoSchedule
        operator: Equal
      - key: kubernetes.azure.com/scalesetpriority
        value: spot
        effect: NoSchedule
        operator: Equal
###################################################################################################################
######################################## Tfy Controller ###########################################################
###################################################################################################################
## @section tfyController Truefoundry tfy controller settings
tfyController:
  ## @param tfyController.enabled Bool to enable the tfyController
  enabled: true
  ## @skip tfyController.tolerations Tolerations specific to the tfyController
  tolerations: []
  ## @param tfyController.annotations Annotations for the tfyController
  annotations: {}
  ## tfyController.image Image for the tfyController
  image:
    ## @param tfyController.image.registry Registry for the tfyController image (overrides global.registry if specified)
    registry: ""
    ## @param tfyController.image.repository Image repository for the tfyController (without registry)
    repository: "tfy-private-images/tfy-controller"
    ## @param tfyController.image.tag Image tag for the tfyController
    tag: v0.118.0
  ## @param tfyController.environmentName Environment name for the tfyController
  environmentName: default
  ## @param tfyController.envSecretName Secret name for the tfyController environment variables
  envSecretName: sfy-manifest-service-env-secret
  ## @param tfyController.imagePullPolicy Image pull policy for the tfyController
  imagePullPolicy: IfNotPresent
  ## @param tfyController.nameOverride Override name for the tfyController
  nameOverride: ""
  ## @param tfyController.fullnameOverride Full name override for the tfyController
  fullnameOverride: ""
  ## @param tfyController.podAnnotations [object]Annotations for the tfyController pods
  podAnnotations:
    karpenter.sh/do-not-disrupt: "true"
    cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
  ## @param tfyController.podSecurityContext Security context for the tfyController pods
  podSecurityContext: {}
  ## @param tfyController.commonLabels Common labels for the tfyController pods
  commonLabels: {}
  ## @param tfyController.commonAnnotations [object] Common annotations for the tfyController pods
  commonAnnotations: {}
  ## @param tfyController.podLabels [object] Labels for the tfyController pods
  podLabels: {}
  ## @param tfyController.deploymentLabels [object] Deployment-specific labels for the tfyController
  deploymentLabels: {}
  ## @param tfyController.deploymentAnnotations [object] Deployment-specific annotations for the tfyController
  deploymentAnnotations: {}
  ## tfyController.securityContext Security context for the tfyController
  securityContext:
    ## @param tfyController.securityContext.readOnlyRootFilesystem Read only root filesystem for the tfyController
    readOnlyRootFilesystem: true
  ## @param tfyController.imagePullSecrets Image pull secrets for the tfycontroller
  ##
  imagePullSecrets: []
  ## tfyController.serviceMonitor ServiceMonitor settings for the tfyController
  serviceMonitor:
    ## @param tfyController.serviceMonitor.enabled Enable ServiceMonitor for the tfyController
    enabled: true
    ## @param tfyController.serviceMonitor.labels [object] Labels for the ServiceMonitor
    labels: {}
    ## @param tfyController.serviceMonitor.annotations [object] Annotations for the ServiceMonitor
    annotations: {}
  ## @param tfyController.resourceTierOverride Resource tier override for the tfyController
  resourceTierOverride: ""
  ## @param tfyController.resources [object] Resource requests and limits for the tfyController
  resources: {}
  # resources:
  #   limits:
  #     cpu: 400m
  #     memory: 1024Mi
  #     ephemeral-storage: 256Mi
  #   requests:
  #     cpu: 200m
  #     memory: 512Mi
  #     ephemeral-storage: 128Mi
  ## tfyController.livenessProbe Liveness probe settings for the tfyController
  livenessProbe:
    ## @param tfyController.livenessProbe.failureThreshold Liveness probe failure threshold for tfyController
    failureThreshold: 3
    ## @param tfyController.livenessProbe.initialDelaySeconds Liveness probe initial delay for tfyController
    initialDelaySeconds: 600
    ## @param tfyController.livenessProbe.periodSeconds Liveness probe period for the tfyController
    periodSeconds: 10
    ## @param tfyController.livenessProbe.successThreshold Liveness probe success threshold for tfyController
    successThreshold: 1
    ## @param tfyController.livenessProbe.timeoutSeconds Liveness probe timeout for tfyController
    timeoutSeconds: 1
  ## tfyController.readinessProbe Readiness probe settings for the tfyController
  readinessProbe:
    ## @param tfyController.readinessProbe.failureThreshold Readiness probe failure threshold for tfyController
    failureThreshold: 3
    ## @param tfyController.readinessProbe.initialDelaySeconds Readiness probe initial delay for tfyController
    initialDelaySeconds: 30
    ## @param tfyController.readinessProbe.periodSeconds Readiness probe period for tfyController
    periodSeconds: 10
    ## @param tfyController.readinessProbe.successThreshold Readiness probe success threshold for tfyController
    successThreshold: 1
    ## @param tfyController.readinessProbe.timeoutSeconds Readiness probe timeout for tfyController
    timeoutSeconds: 1
  ## @param tfyController.nodeSelector Node selector for the tfyController
  nodeSelector: {}
  ## @param tfyController.affinity Affinity settings for the tfyController
  affinity: {}
  ## @param tfyController.topologySpreadConstraints Topology spread constraints for the tfyController
  topologySpreadConstraints: []
  ## tfyController.service Service settings for the tfyController
  service:
    ## @param tfyController.service.type Service type for the tfyController
    type: ClusterIP
    ## @param tfyController.service.port Service port for the tfyController
    port: 8123
    ## @param tfyController.service.annotations Annotations for the tfyController service
    annotations: {}
    ## @param tfyController.service.labels [object] Labels for the tfyController service
    labels: {}
  ## tfyController.serviceAccount Service account settings for the tfyController
  serviceAccount:
    ## @param tfyController.serviceAccount.create Bool to create a service account for the tfyController
    create: true
    ## @param tfyController.serviceAccount.name Name of the tfyController service account
    name: "tfy-controller"
    ## @param tfyController.serviceAccount.annotations [object] Annotations for the tfyController service account
    annotations: {}
    ## @param tfyController.serviceAccount.labels [object] Labels for the tfyController service account
    labels: {}
    ## @param tfyController.serviceAccount.automountServiceAccountToken Automount service account token for the tfyController service account
    automountServiceAccountToken: true
  ## @param tfyController.env [object] Environment variables for the tfyController
  env:
    GIN_MODE: release
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    SFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    SFY_MANIFEST_SERVER_URL: http://{{ .Release.Name }}-sfy-manifest-service.{{ .Release.Namespace }}.svc.cluster.local:8080
    PROXY_SERVER_PORT: "{{ .Values.tfyController.service.port }}"
    PROXY_SERVER_ENABLED: "true"
    DEPLOYMENT_CONTROLLER_ENABLED: "true"
    JOB_RUNS_CONTROLLER_ENABLED: "true"
    SENTRY_ENABLED: "true"
    MIGRATION_CONTROLLER_ENABLED: "false"
    MIGRATION_CONTROLLER_INTERVAL_MINUTES: "60"
    MIGRATION_CONTROLLER_APPLICATION_HEALTH_CHECK_TIMEOUT_MINUTES: "5"
    MIGRATION_CONTROLLER_APPLICATION_HEALTH_CHECK_INTERVAL_SECONDS: "20"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    AUTH_SERVER_URL: https://auth.truefoundry.com
    TFY_AGENT_STATE_BUFFER_PROCESSOR_ENABLED: "true"
    TFY_AGENT_STATE_BUFFER_PROCESSOR_NATS_URL: nats://{{ .Release.Name }}-tfy-nats.{{ .Release.Namespace }}.svc.cluster.local:4222
    DELETE_APPLICATIONS_CONTROLLER_ENABLED: "true"
    DEPLOYMENT_PROCESSING_CONCURRENCY_LIMIT: "5"
###################################################################################################################
######################################## Tfy Workflow Admin #######################################################
###################################################################################################################
## @section tfyWorkflowAdmin Truefoundry tfy workflow admin settings
tfyWorkflowAdmin:
  ## @param tfyWorkflowAdmin.enabled Bool to enable the tfyWorkflowAdmin
  enabled: false
  ## @skip tfyWorkflowAdmin.tolerations Tolerations specific to the tfyWorkflowAdmin
  tolerations: []
  ## @param tfyWorkflowAdmin.annotations Annotations for the tfyWorkflowAdmin
  annotations: {}
  ## tfyWorkflowAdmin.image Image for the tfyWorkflowAdmin
  image:
    ## @param tfyWorkflowAdmin.image.registry Registry for the tfyWorkflowAdmin image (overrides global.registry if specified)
    registry: ""
    ## @param tfyWorkflowAdmin.image.repository Image repository for the tfyWorkflowAdmin (without registry)
    repository: "tfy-private-images/tfy-workflow-admin"
    ## @param tfyWorkflowAdmin.image.tag Image tag for the tfyWorkflowAdmin
    tag: v0.80.0
  ## @skip tfyWorkflowAdmin.replicaCount Number of replicas for the tfyWorkflowAdmin
  # replicaCount: 1
  ## @param tfyWorkflowAdmin.environmentName Environment name for the tfyWorkflowAdmin
  environmentName: default
  ## @param tfyWorkflowAdmin.envSecretName Secret name for the tfyWorkflowAdmin environment variables
  envSecretName: tfy-workflow-admin-env-secret
  ## @param tfyWorkflowAdmin.imagePullPolicy Image pull policy for the tfyWorkflowAdmin
  imagePullPolicy: IfNotPresent
  ## @param tfyWorkflowAdmin.nameOverride Override name for the tfyWorkflowAdmin
  nameOverride: ""
  ## @param tfyWorkflowAdmin.fullnameOverride Full name override for the tfyWorkflowAdmin
  fullnameOverride: ""
  ## @param tfyWorkflowAdmin.podAnnotations Annotations for the tfyWorkflowAdmin pods
  podAnnotations: {}
  ## @param tfyWorkflowAdmin.podSecurityContext Security context for the tfyWorkflowAdmin pods
  podSecurityContext: {}
  ## @param tfyWorkflowAdmin.commonLabels Common labels for the tfyWorkflowAdmin pods
  commonLabels: {}
  ## @param tfyWorkflowAdmin.commonAnnotations [object] Common annotations for the tfyWorkflowAdmin pods
  commonAnnotations: {}
  ## @param tfyWorkflowAdmin.podLabels [object] Labels for the tfyWorkflowAdmin pods
  podLabels: {}
  ## @param tfyWorkflowAdmin.deploymentLabels [object] Deployment-specific labels for the tfyWorkflowAdmin
  deploymentLabels: {}
  ## @param tfyWorkflowAdmin.deploymentAnnotations [object] Deployment-specific annotations for the tfyWorkflowAdmin
  deploymentAnnotations: {}
  ## @param tfyWorkflowAdmin.securityContext Security context for the tfyWorkflowAdmin
  securityContext: {}
  ## @param tfyWorkflowAdmin.imagePullSecrets Image pull secrets for the tfycontroller
  ##
  imagePullSecrets: []
  ## @param tfyWorkflowAdmin.resourceTierOverride Resource tier override for the tfyWorkflowAdmin
  resourceTierOverride: ""
  ## @param tfyWorkflowAdmin.resources [object] Resource requests and limits for the tfyWorkflowAdmin
  resources: {}
  # resources:
  #   limits:
  #     cpu: 100m
  #     memory: 256Mi
  #     ephemeral-storage: 256Mi
  #   requests:
  #     cpu: 50m
  #     memory: 256Mi
  #     ephemeral-storage: 128Mi
  ## tfyWorkflowAdmin.livenessProbe Liveness probe settings for the tfyWorkflowAdmin
  livenessProbe:
    ## @param tfyWorkflowAdmin.livenessProbe.failureThreshold Liveness probe failure threshold for tfyWorkflowAdmin
    failureThreshold: 3
    ## @param tfyWorkflowAdmin.livenessProbe.initialDelaySeconds Liveness probe initial delay for tfyWorkflowAdmin
    initialDelaySeconds: 600
    ## @param tfyWorkflowAdmin.livenessProbe.periodSeconds Liveness probe period for the tfyWorkflowAdmin
    periodSeconds: 10
    ## @param tfyWorkflowAdmin.livenessProbe.successThreshold Liveness probe success threshold for tfyWorkflowAdmin
    successThreshold: 1
    ## @param tfyWorkflowAdmin.livenessProbe.timeoutSeconds Liveness probe timeout for tfyWorkflowAdmin
    timeoutSeconds: 1
  ## tfyWorkflowAdmin.readinessProbe Readiness probe settings for the tfyWorkflowAdmin
  readinessProbe:
    ## @param tfyWorkflowAdmin.readinessProbe.failureThreshold Readiness probe failure threshold for tfyWorkflowAdmin
    failureThreshold: 3
    ## @param tfyWorkflowAdmin.readinessProbe.initialDelaySeconds Readiness probe initial delay for tfyWorkflowAdmin
    initialDelaySeconds: 30
    ## @param tfyWorkflowAdmin.readinessProbe.periodSeconds Readiness probe period for the tfyWorkflowAdmin
    periodSeconds: 10
    ## @param tfyWorkflowAdmin.readinessProbe.successThreshold Readiness probe success threshold for tfyWorkflowAdmin
    successThreshold: 1
    ## @param tfyWorkflowAdmin.readinessProbe.timeoutSeconds Readiness probe timeout for tfyWorkflowAdmin
    timeoutSeconds: 1
  ## @param tfyWorkflowAdmin.nodeSelector Node selector for the tfyWorkflowAdmin
  nodeSelector: {}
  ## @param tfyWorkflowAdmin.affinity Affinity settings for the tfyWorkflowAdmin
  affinity: {}
  ## @param tfyWorkflowAdmin.topologySpreadConstraints Topology spread constraints for the tfyWorkflowAdmin
  topologySpreadConstraints: []
  ## tfyWorkflowAdmin.service Service settings for the tfyWorkflowAdmin
  service:
    ## @param tfyWorkflowAdmin.service.type Service type for the tfyWorkflowAdmin
    type: ClusterIP
    ## @param tfyWorkflowAdmin.service.port Service port for the tfyWorkflowAdmin
    port: 8089
    ## @param tfyWorkflowAdmin.service.annotations Annotations for the tfyWorkflowAdmin service
    annotations: {}
    ## @param tfyWorkflowAdmin.service.labels [object] Labels for the tfyWorkflowAdmin service
    labels: {}
  ## tfyWorkflowAdmin.serviceAccount Service account settings for the tfyWorkflowAdmin
  serviceAccount:
    ## @param tfyWorkflowAdmin.serviceAccount.create Bool to create a service account for the tfyWorkflowAdmin
    create: false
    ## @param tfyWorkflowAdmin.serviceAccount.name Name of the tfyWorkflowAdmin service account
    name: ""
    ## @param tfyWorkflowAdmin.serviceAccount.annotations [object] Annotations for the tfyWorkflowAdmin service account
    annotations: {}
    ## @param tfyWorkflowAdmin.serviceAccount.labels [object] Labels for the tfyWorkflowAdmin service account
    labels: {}
  ## @param tfyWorkflowAdmin.storage Storage settings for the tfyWorkflowAdmin
  storage: {}
  ## For AWS uncomment this section
  ## type: s3
  ## limits:
  ##   maxDownloadMBs: 2
  ## bucketName: <BUCKET_NAME>
  ## container: <BUCKET_NAME>/tfy-workflow-admin
  ## connection:
  ##   region: <AWS_REGION>
  ##   auth-type: iam
  ## enable-multicontainer: true

  ## For GCP uncomment this section
  ## gcs:
  ##   projectId: <GCP_PROJECT_ID>
  ## type: gcs
  ## limits:
  ##   maxDownloadMBs: 2
  ## bucketName: <GCS_BUCKET_NAME>
  ## container: <GCS_BUCKET_NAME>/tfy-workflow-admin

  ## For Azure uncomment this section
  ## stow:
  ##   kind: azure
  ##   config:
  ##     key: <STORAGE_ACCOUNT_KEY>
  ##     account: <STORAGE_ACCOUNT_NAME>
  ## type: stow
  ## container: <AZURE_STORAGE_CONTAINER_NAME>/tfy-workflow-admin
  ## connection: {}
  ## enable-multicontainer: true
  ## limits:
  ##   maxDownloadMBs: 2
  ## @param tfyWorkflowAdmin.env [object] Environment variables for the tfyWorkflowAdmin
  env:
    DB_NAME: ${k8s-secret/truefoundry-creds/DB_NAME}
    DB_USERNAME: ${k8s-secret/truefoundry-creds/DB_USERNAME}
    DB_PASSWORD: ${k8s-secret/truefoundry-creds/DB_PASSWORD}
    DB_HOST: ${k8s-secret/truefoundry-creds/DB_HOST}
    DB_PORT: "5432"
    DB_POSTGRES_SCHEMA: tfy_flyteadmin
    SVC_FOUNDRY_SERVICE_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    SVC_FOUNDRY_SERVICE_API_KEY_PATH: /etc/secrets/admin_api_key
    ADMIN_CONFIG_FILE_PATH: /etc/config/flyteadmin-config.yaml
    SCHEDULER_CONFIG_FILE_PATH: /etc/config/flytescheduler-config.yaml
    CONTROL_PLANE_URL: "{{ .Values.global.controlPlaneURL }}"
###################################################################################################################
################################################# Tfy Nats  #######################################################
###################################################################################################################
## @section tfyNats Truefoundry NATS settings
tfyNats:
  ## @param tfyNats.nameOverride Override name for NATS server
  nameOverride: tfy-nats
  ## @param tfyNats.enabled Bool to enable the NATS server
  enabled: true
  ## tfyNats.config NATS server configuration
  config:
    ## @skip tfyNats.config.merge Configuration to merge
    merge:
      00$include: accounts/resolver.conf
    ## tfyNats.config.cluster Cluster configuration
    cluster:
      ## @param tfyNats.config.cluster.enabled Bool to enable clustering
      enabled: true
      ## @param tfyNats.config.cluster.replicas Number of replicas in cluster
      replicas: 3
    ## @param tfyNats.config.advertise Bool to enable NATS server advertise
    advertise: false
    ## tfyNats.config.jetstream Jetstream configuration
    jetstream:
      ## @param tfyNats.config.jetstream.enabled Bool to enable Jetstream
      enabled: true
      ## tfyNats.config.jetstream.fileStore File storage configuration
      fileStore:
        ## @param tfyNats.config.jetstream.fileStore.dir Storage directory path
        dir: /data
        ## tfyNats.config.jetstream.fileStore.pvc PVC configuration
        pvc:
          ## @param tfyNats.config.jetstream.fileStore.pvc.size PVC storage size
          size: 10Gi
          ## @param tfyNats.config.jetstream.fileStore.pvc.enabled Bool to enable PVC
          enabled: true
        ## @param tfyNats.config.jetstream.fileStore.enabled Bool to enable file storage
        enabled: true
        ## @param tfyNats.config.jetstream.fileStore.maxSize Maximum file storage size
        maxSize: 9Gi
      ## tfyNats.config.jetstream.memoryStore Memory storage configuration
      memoryStore:
        ## @param tfyNats.config.jetstream.memoryStore.size Memory storage size
        size: 1Gi
        ## @param tfyNats.config.jetstream.memoryStore.enabled Bool to enable memory storage
        enabled: true
    ## tfyNats.config.websocket Websocket configuration
    websocket:
      ## @param tfyNats.config.websocket.port Websocket port
      port: 8080
      ## @param tfyNats.config.websocket.enabled Bool to enable websocket
      enabled: true
  ## tfyNats.natsBox NATS Box configuration
  natsBox:
    ## @param tfyNats.natsBox.enabled Bool to enable NATS Box
    enabled: false
  ## tfyNats.reloader Config reloader configuration
  reloader:
    ## tfyNats.reloader.image Reloader image configuration
    image:
      ## @param tfyNats.reloader.image.registry Registry for the reloader image (overrides global.registry if specified)
      registry: ""
      ## @param tfyNats.reloader.image.repository Reloader image repository (without registry)
      repository: "tfy-mirror/natsio/nats-server-config-reloader"
      ## @param tfyNats.reloader.image.tag Reloader image tag
      tag: "0.21.1"
    ## @param tfyNats.reloader.enabled Bool to enable config reloader
    enabled: true
    ## @param tfyNats.reloader.patch [array] Nats Reloader patches
    patch:
      - op: add
        path: /resources
        value:
          limits:
            cpu: 200m
            memory: 256Mi
          requests:
            cpu: 100m
            memory: 128Mi
      - op: add
        path: /securityContext
        value:
          readOnlyRootFilesystem: true
  ## tfyNats.promExporter Prometheus exporter configuration
  promExporter:
    ## tfyNats.promExporter.image Exporter image configuration
    image:
      ## @param tfyNats.promExporter.image.registry Registry for the promExporter image (overrides global.registry if specified)
      registry: ""
      ## @param tfyNats.promExporter.image.repository Exporter image repository (without registry)
      repository: "tfy-mirror/natsio/prometheus-nats-exporter"
      ## @param tfyNats.promExporter.image.tag Exporter image tag
      tag: "0.18.0"
    ## @param tfyNats.promExporter.enabled Bool to enable Prometheus exporter
    enabled: true
    ## @param tfyNats.promExporter.patch [array] Nats Prom Exporter patches
    patch:
      - op: add
        path: /resources
        value:
          limits:
            cpu: 200m
            memory: 256Mi
          requests:
            cpu: 100m
            memory: 128Mi
      - op: add
        path: /securityContext
        value:
          readOnlyRootFilesystem: true
    ## @param tfyNats.promExporter.podMonitor.enabled Bool to enable pod monitor
    podMonitor:
      enabled: false
      ## @param tfyNats.promExporter.podMonitor.merge [object] Additional kustomize patches for the pod monitor
      merge:
        metadata:
          labels:
            release: prometheus
  ## tfyNats.container Container configuration
  container:
    ## tfyNats.container.image Container image configuration
    image:
      ## @param tfyNats.container.image.registry Registry for the container image (overrides global.registry if specified)
      registry: ""
      ## @param tfyNats.container.image.tag Container image tag
      tag: 2.12.3-alpine
      ## @param tfyNats.container.image.repository Container image repository (without registry)
      repository: "tfy-mirror/nats"
    ## @skip tfyNats.container.patch Container patches
    patch:
      - op: add
        path: /volumeMounts/-
        value:
          name: resolver-volume
          mountPath: /etc/nats-config/accounts
      - op: add
        path: /resources
        value:
          limits:
            cpu: 1000m
            memory: 1024Mi
            ephemeral-storage: 2Gi
          requests:
            cpu: 500m
            memory: 1024Mi
            ephemeral-storage: 1Gi
  ## skip tfyNats.podTemplate Pod template configuration
  podTemplate:
    ## @skip tfyNats.podTemplate.patch Pod template patches
    patch:
      - op: add
        path: /spec/volumes/-
        value:
          name: resolver-volume
          secret:
            secretName: tfy-nats-accounts
            defaultMode: 420
      - op: add
        path: /spec/imagePullSecrets
        value: []
      - op: add
        path: /spec/tolerations
        value: []
      - op: add
        path: /spec/affinity
        value: {}
      - op: add
        path: /spec/nodeSelector
        value: {}
      - op: add
        path: /spec/containers/0/securityContext
        value:
          readOnlyRootFilesystem: true
    ## @skip tfyNats.podTemplate.topologySpreadConstraints Topology spread constraints for NATS server
    topologySpreadConstraints:
      kubernetes.io/hostname:
        maxSkew: 1
        whenUnsatisfiable: ScheduleAnyway
  ## tfyNats.serviceAccount [object] Service account settings for the tfyNats
  serviceAccount:
    ## @param tfyNats.serviceAccount.enabled Specifies whether a service account should be created
    enabled: true
    ## @param tfyNats.serviceAccount.annotations [object] Annotations to add to the service account
    annotations: {}
    ## @param tfyNats.serviceAccount.labels [object] Labels to add to the service account
    labels: {}
    ## @param tfyNats.serviceAccount.name The name of the service account to use.
    ## If not set and create is true, a name is generated using the fullname template
    name: "truefoundry-tfy-nats"
    ## @param tfyNats.serviceAccount.patch [array] Service account patches
    patch:
      - op: add
        path: /automountServiceAccountToken
        value: false
## tfy-llm-gateway
tfy-llm-gateway:
  ## @param tfy-llm-gateway.commonAnnotations [object] Annotations for the tfy-llm-gateway
  commonAnnotations:
    argocd.argoproj.io/sync-wave: "5"
###################################################################################################################
####################################### TrueFoundry OTel Collector ################################################
###################################################################################################################
## @section tfy-otel-collector TrueFoundry OpenTelemetry Collector settings
tfy-otel-collector:
  ## @skip tfy-otel-collector.commonAnnotations Common annotations for the tfy-otel-collector
  commonAnnotations:
    argocd.argoproj.io/sync-wave: "4"
###################################################################################################################
######################################## Tfy DeltaFusion Ingestor #################################################
###################################################################################################################
## @section deltaFusionIngestor Truefoundry DeltaFusion Ingestor settings
deltaFusionIngestor:
  ## @param deltaFusionIngestor.enabled Bool to enable the DeltaFusion Ingestor
  enabled: true
  ## @skip deltaFusionIngestor.replicaCount Number of replicas for the DeltaFusion Ingestor
  # replicaCount: 2
  ## deltaFusionIngestor.image Image settings for the DeltaFusion Ingestor
  image:
    ## @param deltaFusionIngestor.image.registry Registry for the DeltaFusion Ingestor image (overrides global.image.registry if specified)
    registry: ""
    ## @param deltaFusionIngestor.image.repository Image repository for the DeltaFusion Ingestor (without registry)
    repository: "tfy-private-images/deltafusion-ingestor"
    ## @param deltaFusionIngestor.image.tag Image tag for the DeltaFusion Ingestor
    tag: "v0.118.0"
    ## @param deltaFusionIngestor.image.optimized Use optimized image tag for the DeltaFusion Ingestor
    optimized: false
    ## @param deltaFusionIngestor.image.pullPolicy Image pull policy for the DeltaFusion Ingestor
    pullPolicy: IfNotPresent
  ## @param deltaFusionIngestor.statefulsetLabels Labels to apply to the DeltaFusion Ingestor statefulset
  statefulsetLabels: {}
  ## @param deltaFusionIngestor.statefulsetAnnotations Annotations to apply to the DeltaFusion Ingestor statefulset
  statefulsetAnnotations: {}
  ## @param deltaFusionIngestor.envSecretName Name of the secret containing environment variables for the DeltaFusion Ingestor
  envSecretName: deltafusion-ingestor-service-env-secret
  ## deltaFusionIngestor.healthcheck Health check settings
  healthcheck:
    ## deltaFusionIngestor.healthcheck.readiness Readiness probe settings
    readiness:
      ## @param deltaFusionIngestor.healthcheck.readiness.path Readiness probe path
      path: /health
      ## @param deltaFusionIngestor.healthcheck.readiness.initialDelaySeconds Initial delay seconds
      initialDelaySeconds: 10
      ## @param deltaFusionIngestor.healthcheck.readiness.periodSeconds Period seconds
      periodSeconds: 5
      ## @param deltaFusionIngestor.healthcheck.readiness.timeoutSeconds Timeout seconds
      timeoutSeconds: 2
      ## @param deltaFusionIngestor.healthcheck.readiness.successThreshold Success threshold
      successThreshold: 1
      ## @param deltaFusionIngestor.healthcheck.readiness.failureThreshold Failure threshold
      failureThreshold: 2
    ## deltaFusionIngestor.healthcheck.liveness Liveness probe settings
    liveness:
      ## @param deltaFusionIngestor.healthcheck.liveness.path Liveness probe path
      path: /health
      ## @param deltaFusionIngestor.healthcheck.liveness.initialDelaySeconds Initial delay seconds
      initialDelaySeconds: 10
      ## @param deltaFusionIngestor.healthcheck.liveness.periodSeconds Period seconds
      periodSeconds: 5
      ## @param deltaFusionIngestor.healthcheck.liveness.timeoutSeconds Timeout seconds
      timeoutSeconds: 2
      ## @param deltaFusionIngestor.healthcheck.liveness.successThreshold Success threshold
      successThreshold: 1
      ## @param deltaFusionIngestor.healthcheck.liveness.failureThreshold Failure threshold
      failureThreshold: 3
  ## deltaFusionIngestor.storage Persistent volume claim settings
  storage:
    ## @param deltaFusionIngestor.storage.enabled Bool to enable storage
    enabled: true
    ## @param deltaFusionIngestor.storage.accessModes Access modes
    accessModes:
      - ReadWriteOnce
    ## @param deltaFusionIngestor.storage.storageClassName Storage class name
    storageClassName: ""
    ## @param deltaFusionIngestor.storage.size Storage size
    size: 5Gi
    ## @param deltaFusionIngestor.storage.mountPath Mount path
    mountPath: /spans_dataset
  ## @param deltaFusionIngestor.imagePullSecrets Image pull secrets
  imagePullSecrets: []
  ## @param deltaFusionIngestor.imagePullPolicy Image pull policy override
  imagePullPolicy: IfNotPresent
  ## @skip deltaFusionIngestor.command
  command:
    - "/usr/local/bin/ingestor"
  ## @skip deltaFusionIngestor.args
  args: []
  ## @param deltaFusionIngestor.nameOverride Name override
  nameOverride: ""
  ## @param deltaFusionIngestor.fullnameOverride Full name override
  fullnameOverride: ""
  ## @param deltaFusionIngestor.commonLabels [object] Common labels for the deltafusion-ingestor
  commonLabels: {}
  ## @param deltaFusionIngestor.commonAnnotations [object] Common annotations for the deltafusion-ingestor
  commonAnnotations: {}
  ## @param deltaFusionIngestor.podLabels Pod-level labels
  podLabels: {}
  ## @param deltaFusionIngestor.podAnnotations Pod-level annotations
  podAnnotations: {}
  podSecurityContext:
    ## @skip deltaFusionIngestor.podSecurityContext.fsGroup
    fsGroup: 100
  ## deltaFusionIngestor.securityContext Security context for the container
  securityContext:
    ## @param deltaFusionIngestor.securityContext.privileged Bool to run the container in privileged mode
    privileged: false
  ## deltaFusionIngestor.service Service settings
  service:
    ## @param deltaFusionIngestor.service.type Service type
    type: ClusterIP
    ## @param deltaFusionIngestor.service.port Service port
    port: 8000
    ## @param deltaFusionIngestor.service.labels Service labels
    labels: {}
    ## @param deltaFusionIngestor.service.annotations Service annotations
    annotations: {}
  ## deltaFusionIngestor.serviceMonitor ServiceMonitor settings for the deltaFusionIngestor
  serviceMonitor:
    ## @param deltaFusionIngestor.serviceMonitor.enabled Enable ServiceMonitor for the deltaFusionIngestor
    enabled: true
    ## @param deltaFusionIngestor.serviceMonitor.interval Interval for the ServiceMonitor
    interval: 10s
    ## @param deltaFusionIngestor.serviceMonitor.path Path for the ServiceMonitor
    path: /metrics
    ## @param deltaFusionIngestor.serviceMonitor.labels [object] Labels for the ServiceMonitor
    labels: {}
    ## @param deltaFusionIngestor.serviceMonitor.annotations [object] Annotations for the ServiceMonitor
    annotations: {}
  ## deltaFusionIngestor.serviceAccount Service account settings
  serviceAccount:
    ## @param deltaFusionIngestor.serviceAccount.create Bool to create a service account
    create: false
    ## @param deltaFusionIngestor.serviceAccount.name Name of the deltaFusionIngestor service account
    name: ""
    ## @param deltaFusionIngestor.serviceAccount.labels [object] Service account labels
    labels: {}
    ## @param deltaFusionIngestor.serviceAccount.annotations [object] Service account annotations
    annotations: {}
    ## @param deltaFusionIngestor.serviceAccount.automountServiceAccountToken Automount service account token for the deltaFusionIngestor service account
    automountServiceAccountToken: true
  ## @param deltaFusionIngestor.resourceTierOverride Resource tier override for the deltaFusionIngestor
  resourceTierOverride: ""
  ## @skip deltaFusionIngestor.resources Resource requests and limits
  resources: {}
  ## @param deltaFusionIngestor.extraVolumes Extra volumes
  extraVolumes: []
  ## @param deltaFusionIngestor.extraVolumeMounts Extra volume mounts
  extraVolumeMounts: []
  ## @param deltaFusionIngestor.extraEnvs Extra environment variables
  extraEnvs: []
  ## @param deltaFusionIngestor.nodeSelector Node selector
  nodeSelector: {}
  ## @param deltaFusionIngestor.tolerations Tolerations
  tolerations: []
  ## @param deltaFusionIngestor.affinity Affinity
  affinity: {}
  ## @param deltaFusionIngestor.topologySpreadConstraints Topology spread constraints
  topologySpreadConstraints: []
  ## @param deltaFusionIngestor.env [object] Additional environment variables
  env:
    RUST_LOG: info
    TFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    PAYLOAD_SIZE_LIMIT: "1073741824"
    SERVICEFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:3000
    AWS_EC2_METADATA_DISABLED: "true"
    AUTH_SERVER_URL: https://auth.truefoundry.com
    SENTRY_ENABLED: "true"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    CLEANUP_EXPIRED_LOGS: "false"
###################################################################################################################
######################################## Tfy DeltaFusion Compaction ###############################################
###################################################################################################################
## @section deltaFusionCompaction Truefoundry DeltaFusion Compaction settings
deltaFusionCompaction:
  ## @param deltaFusionCompaction.enabled Bool to enable the compaction cron job. Only applies if deltaFusionIngestor.enabled is true
  enabled: true
  ## deltaFusionCompaction.image Image settings for the deltaFusionCompaction
  image:
    ## @param deltaFusionCompaction.image.registry Registry for the deltaFusionCompaction image (overrides global.image.registry if specified)
    registry: ""
    ## @param deltaFusionCompaction.image.repository Image repository for the deltaFusionCompaction image (without registry)
    repository: "tfy-private-images/deltafusion-ingestor"
    ## @param deltaFusionCompaction.image.tag Image tag for the deltaFusionCompaction
    tag: "v0.118.0"
    ## @param deltaFusionCompaction.image.pullPolicy Image pull policy for the deltaFusionCompaction
    pullPolicy: IfNotPresent
    ## @param deltaFusionCompaction.image.optimized Use optimized image tag for the deltaFusionCompaction (set to "auto" to automatically enable if Karpenter is available, true to force enable, false to disable)
    optimized: false
  ## @param deltaFusionCompaction.schedule Schedule for the deltaFusionCompaction cron job
  schedule: "*/30 * * * *"
  ## @param deltaFusionCompaction.timeZone Time zone for the deltaFusionCompaction cron job
  timeZone: UTC
  ## @param deltaFusionCompaction.concurrencyPolicy Concurrency policy for the deltaFusionCompaction cron job
  concurrencyPolicy: Forbid
  ## @param deltaFusionCompaction.startingDeadlineSeconds Starting deadline seconds for the deltaFusionCompaction cron job
  startingDeadlineSeconds: 300
  ## @param deltaFusionCompaction.restartPolicy Restart policy for the deltaFusionCompaction cron job
  restartPolicy: Never
  ## @param deltaFusionCompaction.backoffLimit Backoff limit for the deltaFusionCompaction cron job
  backoffLimit: 1
  ## @param deltaFusionCompaction.ttlSecondsAfterFinished TTL seconds after finished for the deltaFusionCompaction cron job
  ttlSecondsAfterFinished: 604800
  ## @param deltaFusionCompaction.successfulJobsHistoryLimit Successful jobs history limit for the deltaFusionCompaction cron job
  successfulJobsHistoryLimit: 1
  ## @param deltaFusionCompaction.failedJobsHistoryLimit Failed jobs history limit for the deltaFusionCompaction cron job
  failedJobsHistoryLimit: 5
  ## @skip deltaFusionCompaction.command
  command:
    - "/usr/local/bin/compaction"
  ## @skip deltaFusionCompaction.args
  args: []
  ## @param deltaFusionCompaction.cronJobLabels Labels for the deltaFusionCompaction cron job
  cronJobLabels: {}
  ## @param deltaFusionCompaction.cronJobAnnotations Annotations for the deltaFusionCompaction cron job
  cronJobAnnotations: {}
  ## @param deltaFusionCompaction.envSecretName Environment secret name for the deltaFusionCompaction cron job
  envSecretName: deltafusion-compaction-env-secret
  ## @param deltaFusionCompaction.imagePullSecrets Image pull secrets for the deltaFusionCompaction cron job
  imagePullSecrets: []
  ## @param deltaFusionCompaction.imagePullPolicy Image pull policy for the deltaFusionCompaction cron job
  imagePullPolicy: IfNotPresent
  ## @param deltaFusionCompaction.nameOverride Name override for the deltaFusionCompaction cron job
  nameOverride: ""
  ## @param deltaFusionCompaction.fullnameOverride Full name override for the deltaFusionCompaction cron job
  fullnameOverride: ""
  ## @param deltaFusionCompaction.commonLabels Common labels for the deltaFusionCompaction cron job
  commonLabels: {}
  ## @param deltaFusionCompaction.commonAnnotations Common annotations for the deltaFusionCompaction cron job
  commonAnnotations: {}
  ## @param deltaFusionCompaction.podLabels Labels for the deltaFusionCompaction cron job
  podLabels: {}
  ## @param deltaFusionCompaction.podAnnotations Annotations for the deltaFusionCompaction cron job
  podAnnotations: {}
  ## deltaFusionCompaction.podSecurityContext Security context for the deltaFusionCompaction cron job
  podSecurityContext:
    ## @skip deltaFusionCompaction.podSecurityContext.fsGroup
    fsGroup: 100
  ## deltaFusionCompaction.securityContext Security context for the deltaFusionCompaction cron job
  securityContext:
    ## @param deltaFusionCompaction.securityContext.privileged Bool to run the container in privileged mode
    privileged: false
  serviceAccount:
    ## @param deltaFusionCompaction.serviceAccount.create Bool to create a service account for the deltaFusionCompaction cron job
    create: false
    ## @param deltaFusionCompaction.serviceAccount.name Name of the deltaFusionCompaction cron job service account
    name: ""
    ## @param deltaFusionCompaction.serviceAccount.labels Labels for the deltaFusionCompaction cron job service account
    labels: {}
    ## @param deltaFusionCompaction.serviceAccount.annotations Annotations for the deltaFusionCompaction cron job service account
    annotations: {}
    ## @param deltaFusionCompaction.serviceAccount.automountServiceAccountToken Automount service account token for the deltaFusionCompaction cron job service account
    automountServiceAccountToken: false
  ## @param deltaFusionCompaction.resourceTierOverride Resource tier override for the deltaFusionCompaction cron job
  resourceTierOverride: ""
  ## @param deltaFusionCompaction.resources Resource requests and limits for the deltaFusionCompaction cron job
  resources: {}
  ## @param deltaFusionCompaction.extraVolumes Extra volumes for the deltaFusionCompaction cron job
  extraVolumes: []
  ## @param deltaFusionCompaction.extraVolumeMounts Extra volume mounts for the deltaFusionCompaction cron job
  extraVolumeMounts: []
  ## @param deltaFusionCompaction.extraEnvs Extra environment variables for the deltaFusionCompaction cron job
  extraEnvs: []
  ## @param deltaFusionCompaction.nodeSelector Node selector for the deltaFusionCompaction cron job
  nodeSelector: {}
  ## @param deltaFusionCompaction.tolerations Tolerations for the deltaFusionCompaction cron job
  tolerations: []
  ## @param deltaFusionCompaction.affinity Affinity for the deltaFusionCompaction cron job
  affinity: {}
  ## @skip deltaFusionCompaction.karpenterAffinity Karpenter-specific affinity configuration
  ## Note: Karpenter affinity is SKIPPED if any user affinity (global or component) is provided.
  ## If no user affinity: uses karpenterAffinity (if Karpenter available and enabledIfAvailable=true)
  ## If user affinity exists: merges global.affinity + component.affinity (component wins, Karpenter skipped)
  ## This gives customers full control to add their own affinity without Karpenter interference.
  karpenterAffinity:
    enabledIfAvailable: true
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: kubernetes.io/arch
                  operator: In
                  values:
                    - amd64
                - key: kubernetes.io/os
                  operator: In
                  values:
                    - linux
                - key: karpenter.k8s.aws/instance-family
                  operator: In
                  values:
                    - m7a
                    - c7a
                    - r7a
  ## @param deltaFusionCompaction.env [object] Environment variables for the deltaFusionCompaction cron job
  env:
    DATASET_PATH: /tmp
    RUST_LOG: info
    TFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    SERVICEFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:3000
    AWS_EC2_METADATA_DISABLED: "true"
    AUTH_SERVER_URL: https://auth.truefoundry.com
    SENTRY_ENABLED: "true"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    CLEANUP_EXPIRED_LOGS: "true"
    VACUUM_ENABLED: "true"
    DELETE_OLD_PARTITIONS_ENABLED: "true"
    DATAFUSION_EXECUTION_TARGET_PARTITIONS: "1"
    DATAFUSION_EXECUTION_SPILL_COMPRESSION: lz4_frame
###################################################################################################################
######################################## Tfy DeltaFusion Query Server #############################################
###################################################################################################################
## @section deltaFusionQueryServer Truefoundry DeltaFusion Query
deltaFusionQueryServer:
  ## @param deltaFusionQueryServer.enabled Bool to enable the deltaFusionQueryServer
  enabled: true
  ## @skip deltaFusionQueryServer.replicaCount Number of replicas for the DeltaFusion Query
  # replicaCount: 1
  ## @skip deltaFusionQueryServer.tolerations Tolerations specific to the deltaFusionQueryServer
  tolerations: []
  ## @param deltaFusionQueryServer.deploymentLabels Labels for the deltaFusionQueryServer deployment
  deploymentLabels: {}
  ## @param deltaFusionQueryServer.deploymentAnnotations Annotations for the deltaFusionQueryServer deployment
  deploymentAnnotations: {}
  ## deltaFusionQueryServer.image Image for the deltaFusionQueryServer
  image:
    ## @param deltaFusionQueryServer.image.registry Registry for the deltaFusionQueryServer image (overrides global.registry if specified)
    registry: ""
    ## @param deltaFusionQueryServer.image.repository Image repository for the deltaFusionQueryServer (without registry)
    repository: "tfy-private-images/deltafusion-query-server"
    ## @param deltaFusionQueryServer.image.tag Image tag for the deltaFusionQueryServer
    tag: v0.118.0
    ## @param deltaFusionQueryServer.image.optimized Use optimized image tag for the deltaFusionQueryServer (set to "auto" to automatically enable if Karpenter is available, true to force enable, false to disable)
    optimized: false
  ## @param deltaFusionQueryServer.environmentName Environment name for the deltaFusionQueryServer
  environmentName: default
  ## @param deltaFusionQueryServer.envSecretName Secret name for the deltaFusionQueryServer environment variables
  envSecretName: deltafusion-query-env-secret
  ## @param deltaFusionQueryServer.imagePullPolicy Image pull policy for the deltaFusionQueryServer
  imagePullPolicy: IfNotPresent
  ## @param deltaFusionQueryServer.nameOverride Override name for the deltaFusionQueryServer
  nameOverride: ""
  ## @param deltaFusionQueryServer.fullnameOverride Full name override for the deltaFusionQueryServer
  fullnameOverride: ""
  ## @param deltaFusionQueryServer.podLabels [object] Labels for the deltaFusionQueryServer pods
  podLabels: {}
  ## @param deltaFusionQueryServer.podAnnotations [object] Annotations for the deltaFusionQueryServer pods
  podAnnotations:
    karpenter.sh/do-not-disrupt: "true"
    cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
  ## @param deltaFusionQueryServer.podSecurityContext Security context for the deltaFusionQueryServer pods
  podSecurityContext: {}
  ## @param deltaFusionQueryServer.commonLabels Common labels for the deltaFusionQueryServer pods
  commonLabels: {}
  ## @param deltaFusionQueryServer.commonAnnotations Common annotations for the deltaFusionQueryServer pods
  commonAnnotations: {}
  ## deltaFusionQueryServer.securityContext Security context for the deltaFusionQueryServer
  securityContext:
    ## @param deltaFusionQueryServer.securityContext.readOnlyRootFilesystem Read only root filesystem for the deltaFusionQueryServer
    readOnlyRootFilesystem: true
  ## @param deltaFusionQueryServer.imagePullSecrets Image pull secrets for the deltaFusionQueryServer
  imagePullSecrets: []
  ## @param deltaFusionQueryServer.resourceTierOverride Resource tier override for the deltaFusionQueryServer
  resourceTierOverride: ""
  ## @param deltaFusionQueryServer.resources [object] Resource requests and limits for the deltaFusionQueryServer. Note by default we do not set any cpu limit
  resources: {}
  ## deltaFusionQueryServer.healthcheck Health check settings
  healthcheck:
    ## deltaFusionQueryServer.healthcheck.liveness Liveness probe settings
    liveness:
      ## @param deltaFusionQueryServer.healthcheck.liveness.path Liveness probe path
      path: /health
      ## @param deltaFusionQueryServer.healthcheck.liveness.initialDelaySeconds Initial delay seconds
      initialDelaySeconds: 10
      ## @param deltaFusionQueryServer.healthcheck.liveness.periodSeconds Period seconds
      periodSeconds: 5
      ## @param deltaFusionQueryServer.healthcheck.liveness.timeoutSeconds Timeout seconds
      timeoutSeconds: 2
      ## @param deltaFusionQueryServer.healthcheck.liveness.successThreshold Success threshold
      successThreshold: 1
      ## @param deltaFusionQueryServer.healthcheck.liveness.failureThreshold Failure threshold
      failureThreshold: 3
    ## deltaFusionQueryServer.healthcheck.readiness Readiness probe settings
    readiness:
      ## @param deltaFusionQueryServer.healthcheck.readiness.path Readiness probe path
      path: /health
      ## @param deltaFusionQueryServer.healthcheck.readiness.initialDelaySeconds Initial delay seconds
      initialDelaySeconds: 10
      ## @param deltaFusionQueryServer.healthcheck.readiness.periodSeconds Period seconds
      periodSeconds: 5
      ## @param deltaFusionQueryServer.healthcheck.readiness.timeoutSeconds Timeout seconds
      timeoutSeconds: 2
      ## @param deltaFusionQueryServer.healthcheck.readiness.successThreshold Success threshold
      successThreshold: 1
      ## @param deltaFusionQueryServer.healthcheck.readiness.failureThreshold Failure threshold
      failureThreshold: 2
  ## @param deltaFusionQueryServer.nodeSelector Node selector for the deltaFusionQueryServer
  nodeSelector: {}
  ## @param deltaFusionQueryServer.affinity Affinity settings for the deltaFusionQueryServer
  affinity: {}
  ## @skip deltaFusionQueryServer.karpenterAffinity Karpenter-specific affinity configuration
  ## Note: Karpenter affinity is SKIPPED if any user affinity (global or component) is provided.
  ## If no user affinity: uses karpenterAffinity (if Karpenter available and enabledIfAvailable=true)
  ## If user affinity exists: merges global.affinity + component.affinity (component wins, Karpenter skipped)
  ## This gives customers full control to add their own affinity without Karpenter interference.
  karpenterAffinity:
    enabledIfAvailable: true
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: kubernetes.io/arch
                  operator: In
                  values:
                    - amd64
                - key: kubernetes.io/os
                  operator: In
                  values:
                    - linux
                - key: karpenter.k8s.aws/instance-family
                  operator: In
                  values:
                    - m7a
                    - c7a
                    - r7a
  ## @param deltaFusionQueryServer.topologySpreadConstraints Topology spread constraints for the deltaFusionQueryServer
  topologySpreadConstraints: []
  ## deltaFusionQueryServer.service Service settings for the deltaFusionQueryServer
  service:
    ## @param deltaFusionQueryServer.service.type Service type for the deltaFusionQueryServer
    type: ClusterIP
    ## @param deltaFusionQueryServer.service.port Service port for the deltaFusionQueryServer
    port: 8080
    ## @param deltaFusionQueryServer.service.labels Labels for the deltaFusionQueryServer service
    labels: {}
    ## @param deltaFusionQueryServer.service.annotations Annotations for the deltaFusionQueryServer service
    annotations: {}
  ## deltaFusionQueryServer.serviceMonitor ServiceMonitor settings for the deltaFusionQueryServer
  serviceMonitor:
    ## @param deltaFusionQueryServer.serviceMonitor.enabled Enable ServiceMonitor for the deltaFusionQueryServer
    enabled: true
    ## @param deltaFusionQueryServer.serviceMonitor.interval Interval for the ServiceMonitor
    interval: 10s
    ## @param deltaFusionQueryServer.serviceMonitor.path Path for the ServiceMonitor
    path: /metrics
    ## @param deltaFusionQueryServer.serviceMonitor.labels [object] Labels for the ServiceMonitor
    labels: {}
    ## @param deltaFusionQueryServer.serviceMonitor.annotations [object] Annotations for the ServiceMonitor
    annotations: {}
  ## deltaFusionQueryServer.serviceAccount Service account settings for the deltaFusionQueryServer
  serviceAccount:
    ## @param deltaFusionQueryServer.serviceAccount.create Bool to create a service account for the deltaFusionQueryServer
    create: false
    ## @param deltaFusionQueryServer.serviceAccount.name Service account name
    name: ""
    ## @param deltaFusionQueryServer.serviceAccount.labels [object] Labels for the deltaFusionQueryServer service account
    labels: {}
    ## @param deltaFusionQueryServer.serviceAccount.annotations [object] Annotations for the deltaFusionQueryServer service account
    annotations: {}
    ## @param deltaFusionQueryServer.serviceAccount.automountServiceAccountToken Automount service account token for the deltaFusionQueryServer service account
    automountServiceAccountToken: true
  ## @param deltaFusionQueryServer.extraVolumeMounts Extra volume mounts for the deltaFusionQueryServer server
  extraVolumeMounts: []
  ## @param deltaFusionQueryServer.extraVolumes Extra volumes for the deltaFusionQueryServer server
  extraVolumes: []
  ## @param deltaFusionQueryServer.env [object] Environment variables for the deltaFusionQueryServer
  env:
    AWS_EC2_METADATA_DISABLED: "true"
    CACHE_FILE_SIZE_MB: "1024"
    DATAFUSION_EXECUTION_META_FETCH_CONCURRENCY: "64"
    DATAFUSION_EXECUTION_PARQUET_METADATA_SIZE_HINT: "524288"
    DATAFUSION_EXECUTION_PARQUET_PUSHDOWN_FILTERS: "true"
    DATAFUSION_EXECUTION_PARQUET_REORDER_FILTERS: "true"
    DATAFUSION_EXECUTION_USE_ROW_NUMBER_ESTIMATES_TO_OPTIMIZE_PARTITIONING: "true"
    DATAFUSION_EXECUTION_SPILL_COMPRESSION: lz4_frame
    MAX_FILES_IN_FILE_GROUP: "10"
    RUST_LOG: info
    SERVICEFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ include "global.namespace" . }}.svc.cluster.local:3000
    TFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    AZURE_BLOB_USE_START_FROM: "true"
## @section tfyProxy Truefoundry tfy proxy values
tfyProxy:
  ## @param tfyProxy.enabled Bool to enable the tfyProxy
  enabled: true
  ## @param tfyProxy.tolerations Tolerations specific to the tfyProxy
  tolerations: []
  ## @skip tfyProxy.replicaCount Number of replicas for the tfyProxy
  # replicaCount: 1
  ## @param tfyProxy.annotations [object] Annotations for the tfyProxy
  annotations: {}
  ## tfyProxy.image Image for the tfyProxy
  image:
    ## @param tfyProxy.image.registry Registry for the tfyProxy image (overrides global.registry if specified)
    registry: ""
    ## @param tfyProxy.image.repository Image repository for the tfyProxy (without registry)
    repository: "tfy-private-images/tfy-proxy"
    ## @param tfyProxy.image.tag Image tag for the tfyProxy
    tag: "v0.118.1"
  ## @param tfyProxy.logLevel Log level for the tfyProxy (possible values: debug, info, warn, error, panic, fatal)
  logLevel: info
  ## @param tfyProxy.existingProxyConfigMapName Existing configmap containing nginx config for tfyProxy (key should be `nginx.conf`)
  existingProxyConfigMapName: ""
  ## @param tfyProxy.proxyConfigOverride Nginx proxy configuration override for tfyProxy
  proxyConfigOverride: ""
  ## @param tfyProxy.envSecretName Secret name for the tfyProxy environment variables
  envSecretName: "tfy-proxy-env-secret"
  ## @param tfyProxy.imagePullPolicy Image pull policy for the tfyProxy
  imagePullPolicy: IfNotPresent
  ## @param tfyProxy.nameOverride Override name for the tfyProxy
  nameOverride: ""
  ## @param tfyProxy.fullnameOverride Full name override for the tfyProxy
  fullnameOverride: ""
  ## @param tfyProxy.podAnnotations [object] Annotations for the tfyProxy pods
  podAnnotations: {}
  ## @param tfyProxy.podLabels [object] Labels for the tfyProxy pods
  podLabels: {}
  ## @param tfyProxy.podSecurityContext Security context for the tfyProxy pods
  podSecurityContext: {}
  ## @param tfyProxy.commonAnnotations Common annotations for the tfyProxy pods
  commonAnnotations: {}
  ## @param tfyProxy.deploymentLabels [object] Deployment-specific labels for the tfyProxy pods
  deploymentLabels: {}
  ## @param tfyProxy.deploymentAnnotations [object] Deployment-specific annotations for the tfyProxy pods
  deploymentAnnotations: {}
  ## @param tfyProxy.commonLabels Common labels for the tfyProxy pods
  commonLabels: {}
  ## tfyProxy.securityContext Security context for the tfyProxy
  securityContext:
    ## @param tfyProxy.securityContext.readOnlyRootFilesystem Read only root filesystem for the tfyProxy
    readOnlyRootFilesystem: true
  ## tfyProxy.autoscaling Autoscaling configuration for tfyProxy
  autoscaling:
    ## @param tfyProxy.autoscaling.enabled Enable autoscaling
    enabled: true
    ## @param tfyProxy.autoscaling.minReplicas Minimum number of replicas for tfyProxy
    minReplicas: 3
    ## @param tfyProxy.autoscaling.maxReplicas Maximum number of replicas for tfyProxy
    maxReplicas: 100
    ## @param tfyProxy.autoscaling.targetCPUUtilizationPercentage Target CPU utilization percentage
    targetCPUUtilizationPercentage: 60
    ## @param tfyProxy.autoscaling.targetMemoryUtilizationPercentage Target Memory utilization percentage
    targetMemoryUtilizationPercentage: 60
    ## @param tfyProxy.autoscaling.labels Labels for the tfyProxy hpa resource
    labels: {}
    ## @param tfyProxy.autoscaling.annotations Annotations for the tfyProxy hpa resource
    annotations: {}
  ## tfyProxy.rollout Rollout configuration for tfyProxy
  rollout:
    ## @param tfyProxy.rollout.enabled Enable rollout for the tfyProxy deployment
    enabled: true
    ## @param tfyProxy.rollout.strategy Rollout strategy for the tfyProxy deployment
    strategy: RollingUpdate
    ## @param tfyProxy.rollout.maxUnavailable Maximum unavailable pods during rollout
    maxUnavailable: 0
    ## @param tfyProxy.rollout.maxSurge Maximum surge pods during rollout
    maxSurge: 100%
  ## @param tfyProxy.resources [object] Resource requests and limits for the tfyProxy
  resources: {}
  ## @param tfyProxy.terminationGracePeriodSeconds Termination grace period in seconds
  terminationGracePeriodSeconds: 300
  ## tfyProxy.livenessProbe Liveness probe settings for the tfyProxy
  livenessProbe:
    ## @param tfyProxy.livenessProbe.failureThreshold Liveness probe failure threshold for tfyProxy
    failureThreshold: 5
    ## @param tfyProxy.livenessProbe.initialDelaySeconds Liveness probe initial delay for tfyProxy
    initialDelaySeconds: 5
    ## @param tfyProxy.livenessProbe.periodSeconds Liveness probe period for tfyProxy
    periodSeconds: 5
    ## @param tfyProxy.livenessProbe.successThreshold Liveness probe success threshold for tfyProxy
    successThreshold: 1
    ## @param tfyProxy.livenessProbe.timeoutSeconds Liveness probe timeout for tfyProxy
    timeoutSeconds: 1
  ## tfyProxy.readinessProbe Readiness probe settings for the tfyProxy
  readinessProbe:
    ## @param tfyProxy.readinessProbe.failureThreshold Readiness probe failure threshold for tfyProxy
    failureThreshold: 5
    ## @param tfyProxy.readinessProbe.initialDelaySeconds Readiness probe initial delay for tfyProxy
    initialDelaySeconds: 10
    ## @param tfyProxy.readinessProbe.periodSeconds Readiness probe period for tfyProxy
    periodSeconds: 5
    ## @param tfyProxy.readinessProbe.successThreshold Readiness probe success threshold for tfyProxy
    successThreshold: 1
    ## @param tfyProxy.readinessProbe.timeoutSeconds Readiness probe timeout for tfyProxy
    timeoutSeconds: 1
  ## @param tfyProxy.nodeSelector Node selector for the tfyProxy
  nodeSelector: {}
  ## @param tfyProxy.affinity Affinity settings for the tfyProxy
  affinity: {}
  ## @param tfyProxy.topologySpreadConstraints [object] Topology spread constraints for the tfyProxy
  topologySpreadConstraints: {}
  ## tfyProxy.service Service settings for the tfyProxy
  service:
    ## @param tfyProxy.service.type Service type for the tfyProxy
    type: ClusterIP
    ## @param tfyProxy.service.port Service port for the tfyProxy
    port: 8080
    ## @param tfyProxy.service.metricsPort Metrics port for the tfyProxy
    metricsPort: 2019
    ## @param tfyProxy.service.labels [object] Labels for the tfyProxy service
    labels: {}
    ## @param tfyProxy.service.annotations Annotations for the tfyProxy service
    annotations: {}
    ## tfyProxy.serviceAccount Service account settings for the tfyProxy
  serviceAccount:
    ## @param tfyProxy.serviceAccount.create Bool to create a service account for the tfyProxy
    create: false
    ## @param tfyProxy.serviceAccount.annotations Annotations for the tfyProxy service account
    annotations: {}
    ## @param tfyProxy.serviceAccount.labels [object] Labels for the tfyProxy service account
    labels: {}
    ## @param tfyProxy.serviceAccount.automountServiceAccountToken Automount service account token for the tfyProxy service account
    automountServiceAccountToken: true
  ## @param tfyProxy.extraVolumes Extra volumes for the tfyProxy
  extraVolumes: []
  ## @param tfyProxy.extraVolumeMounts Extra volume mounts for the tfyProxy
  extraVolumeMounts: []
  ## tfyProxy.serviceMonitor ServiceMonitor settings for the tfyProxy
  serviceMonitor:
    ## @param tfyProxy.serviceMonitor.enabled Enable ServiceMonitor for the tfyProxy
    enabled: true
    ## @param tfyProxy.serviceMonitor.interval Interval for the ServiceMonitor
    interval: 15s
    ## @param tfyProxy.serviceMonitor.path Path for the ServiceMonitor
    path: /metrics
    ## @param tfyProxy.serviceMonitor.labels Additional labels for the ServiceMonitor
    labels: {}
    ## @param tfyProxy.serviceMonitor.annotations Additional annotations for the ServiceMonitor
    annotations: {}
  ## @param tfyProxy.extraProxyLocations Extra proxy locations for the tfyProxy
  extraProxyLocations: []
  ## @param tfyProxy.imagePullSecrets Image pull secrets for the tfyProxy
  ##
  imagePullSecrets: []
  ## @param tfyProxy.env [object] Environment variables for the tfyProxy
  env: {}
###################################################################################################################
######################################## Extra Resources ##########################################################
###################################################################################################################
## @section extraResources Extra Resources to deploy along with the TrueFoundry Control Plane
extraResources:
  ## @param extraResources.enabled Bool to enable the extraResources
  enabled: false
  ## @param extraResources.manifests [array] Kubernetes manifests to be deployed
  manifests: []
