###################################################################################################################
####################################### global Truefoundry global values ##########################################
###################################################################################################################
## @section Global prameters for Truefoundry
global:
  # Resource deployment tier for the control plane, there are 3 tiers available
  # 1. small - for dev and testing purposes
  # 2. medium - for small production workloads
  # 3. large - for large production workloads
  ## @param global.resourceTier Resource deployment tier for the control plane, either small, medium or large accepted
  resourceTier: "medium"
  # The below are installation secrets that will be provided as is.
  # These are customised for your account. Please use the provided values as is.
  # If you have an existing imagepullsecret, set this to its name
  ## @param global.existingTruefoundryImagePullSecretName Name of the existing image pull secret
  existingTruefoundryImagePullSecretName: ""
  ## @param global.truefoundryImagePullConfigJSON JSON config for image pull secret
  truefoundryImagePullConfigJSON: ""
  ## @param global.tenantName Name of the tenant
  tenantName: ""
  ## @param global.controlPlaneURL URL of the control plane
  controlPlaneURL: "http://truefoundry-truefoundry-frontend-app.truefoundry.svc.cluster.local:5000"
  ## @param global.controlPlaneChartVersion Version of control-plane chart
  controlPlaneChartVersion: 0.56.0
  # If you have an existing truefoundry-creds secret, provide the name here.
  # This will ignore `.global.database` and `.global.tfyApiKey` values.
  ## @param global.existingTruefoundryCredsSecret Name of the existing truefoundry creds secret
  existingTruefoundryCredsSecret: ""
  ## global.database Database configuration when dev mode is not enabled
  database:
    ## @param global.database.host Control plane database hostname when dev mode is not enabled
    host: ""
    ## @param global.database.name Control plane database name when dev mode is not enabled
    name: ""
    ## @param global.database.username Control plane database username when dev mode is not enabled
    username: ""
    ## @param global.database.password Control plane database password when dev mode is not enabled
    password: ""
  ## @param global.tfyApiKey API key for truefoundry
  tfyApiKey: ""
  ## @param global.affinity Affinity for all services
  affinity: {}
  ## @param global.labels [object] Labels for all services
  labels: {}
  ## @param global.annotations [object] Annotations for all services
  annotations: {}
  ## @skip global.tolerations
  tolerations:
    - key: class.truefoundry.io/control-plane
      effect: NoSchedule
      operator: Exists
    - key: class.truefoundry.com/component
      value: control-plane
      effect: NoSchedule
      operator: Equal
    - key: "cloud.google.com/gke-spot"
      value: "true"
      effect: NoSchedule
      operator: Equal
    - key: kubernetes.azure.com/scalesetpriority
      value: spot
      effect: NoSchedule
      operator: Equal
  ## global.serviceAccount [object] Service account configuration
  serviceAccount:
    ## @param global.serviceAccount.create Bool to enable service account
    create: true
    ## @param global.serviceAccount.name Name of the service account
    name: truefoundry
    ## @param global.serviceAccount.annotations Annotations for the service account
    annotations: {}
  automountServiceAccountToken: true
# tags These are used to enabled and disable certain infra components based on its purpose - https://helm.sh/docs/topics/charts/#tags-and-condition-fields-in-dependencies
tags:
  ## @param tags.llmGateway Bool to enable llmGateway infra
  llmGateway: false
  ## @param tags.llmGatewayRequestLogging Bool to enable request logging feature in LLM gateway
  llmGatewayRequestLogging: false
  ## @param tags.tracing Bool to enable OTEL tracing feature
  tracing: false
## devMode  When enabled creates a dev installation of the control plane for testing purposes
devMode:
  ## @param devMode.enabled Bool to enable dev mode
  enabled: false
###################################################################################################################
####################################### Monitoring Config ##########################################################
###################################################################################################################
## @section Monitoring Config values
monitoring:
  ## @param monitoring.enabled Bool to enable monitoring for the control plane
  enabled: false
  ## monitoring.alertManager [object] Alert manager configuration
  alertManager:
    ## @param monitoring.alertManager.enabled Bool to enable alert manager
    enabled: true
    ## @param monitoring.alertManager.name Name of the alert manager configuration
    name: tfy-control-plane-alert-manager
    ## @param monitoring.alertManager.additionalLabels Additional labels for alert manager
    additionalLabels: {}
    ## @param monitoring.alertManager.additionalAnnotations Additional annotations for alert manager
    additionalAnnotations: {}
    slackConfigs:
      ## @param monitoring.alertManager.slackConfigs.enabled Bool to enable Slack notifications
      enabled: true
      ## @param monitoring.alertManager.slackConfigs.channel Slack channel to send alerts to
      channel: "#customer-cp-alerts"
      apiURL:
        ## @param monitoring.alertManager.slackConfigs.apiURL.name Name of secret containing Slack API URL
        name: tfy-control-plane-alert-manager-secret
        ## @param monitoring.alertManager.slackConfigs.apiURL.key Key in secret containing Slack API URL
        key: API_URL
      ## @param monitoring.alertManager.slackConfigs.additionalSlackConfigs Additional Slack configurations
      additionalSlackConfigs: []
    ## @param monitoring.alertManager.additionalReceivers Additional alert receivers
    additionalReceivers: []
    secret:
      ## @param monitoring.alertManager.secret.create Bool to create secret for alert manager
      create: false
      ## @param monitoring.alertManager.secret.name Name of the secret
      name: tfy-control-plane-alert-manager-secret
      ## @param monitoring.alertManager.secret.data [object] Data to be stored in secret
      data:
        API_URL: ""
  ## monitoring.alertRules [object] Alert rules configuration
  alertRules:
    ## @param monitoring.alertRules.enabled Bool to enable alert rules
    enabled: true
    ## @param monitoring.alertRules.name Name of the alert rules configuration
    name: tfy-control-plane-alert-rules
    ## @param monitoring.alertRules.additionalLabels Additional labels for alert rules
    additionalLabels: {}
    ## @param monitoring.alertRules.additionalAnnotations Additional annotations for alert rules
    additionalAnnotations: {}
###################################################################################################################
####################################### Truefoundry bootstrap script ##############################################
###################################################################################################################
## @section Truefoundry bootstrap values
## truefoundryBootstrap Truefoundry bootstrap values
truefoundryBootstrap:
  ## @param truefoundryBootstrap.enabled Bool to enable truefoundry bootstrap
  enabled: true
  
  serviceAccount:
    automountServiceAccountToken: true
  ## securityContext Security context for the bootstrap container
  securityContext:
    ## @param truefoundryBootstrap.securityContext.enabled Bool to enable security context for the bootstrap container
    enabled: false
    ## @param truefoundryBootstrap.securityContext.podSecurityContext Pod security context for the bootstrap container
    podSecurityContext: {}
    ## @param truefoundryBootstrap.securityContext.containerSecurityContext Container security context for the bootstrap container
    containerSecurityContext: {}
  ## truefoundryBootstrap.image Truefoundry base bootstrap image
  image:
    ## @param truefoundryBootstrap.image.repository Truefoundry bootstrap image repository
    repository: "tfy.jfrog.io/tfy-images/truefoundry-bootstrap"
    ## @param truefoundryBootstrap.image.tag Truefoundry bootstrap image tag
    tag: "0.1.3"
  ## @param truefoundryBootstrap.natsConfigmapName Truefoundry nats configmap name
  natsConfigmapName: "tfy-nats-accounts"
  ## @param truefoundryBootstrap.annotations [object] Annotations for the bootstrap job
  annotations: {}
  ## @param truefoundryBootstrap.labels [object] Labels for the bootstrap job
  labels: {}
  ## @param truefoundryBootstrap.extraEnvVars Extra environment variables for the bootstrap container
  extraEnvVars: []
  ## @param truefoundryBootstrap.extraVolumeMounts Extra volume mounts for the bootstrap container
  extraVolumeMounts: []
  ## @param truefoundryBootstrap.extraVolumes Extra volumes for the bootstrap container
  extraVolumes: []
  ## @param truefoundryBootstrap.affinity Affinity for the bootstrap container
  affinity: {}
  ## @param truefoundryBootstrap.nodeSelector Node selector for the bootstrap container
  nodeSelector: {}
  ## @param truefoundryBootstrap.tolerations Tolerations specific to the bootstrap container
  tolerations: {}
  ## Image pull secrets for the bootstrap container
  ## @param truefoundryBootstrap.imagePullSecrets Image pull secrets for the bootstrap container
  ##
  imagePullSecrets: []
  ## @param truefoundryBootstrap.createdBuildkitServiceTlsCerts Bool to install TLS certificates
  createdBuildkitServiceTlsCerts: true
###################################################################################################################
####################################### Truefoundry Frontend App ##################################################
###################################################################################################################
## @section Truefoundry Frontend App values
truefoundryFrontendApp:
  ## @param truefoundryFrontendApp.enabled Bool to enable the frontend app
  enabled: true
  ## @param truefoundryFrontendApp.tolerations Tolerations specific to the frontend app
  tolerations: {}
  ## @skip truefoundryFrontendApp.replicaCount Number of replicas for the frontend app
  #  replicaCount: 1
  ## @param truefoundryFrontendApp.annotations [object] Annotations for the frontend app
  annotations: {}
  ## truefoundryFrontendApp.image Image for the frontend app
  image:
    ## @param truefoundryFrontendApp.image.repository Image repository for the frontend app
    repository: "tfy.jfrog.io/tfy-private-images/truefoundry-frontend-app"
    ## @param truefoundryFrontendApp.image.tag Image tag for the frontend app
    tag: "v0.56.0"
  ## @param truefoundryFrontendApp.envSecretName Secret name for the frontend app environment variables
  envSecretName: truefoundry-frontend-app-env-secret
  ## @param truefoundryFrontendApp.imagePullPolicy Image pull policy for the frontend app
  imagePullPolicy: IfNotPresent
  ## @param truefoundryFrontendApp.nameOverride Override name for the frontend app
  nameOverride: ''
  ## @param truefoundryFrontendApp.fullnameOverride Full name override for the frontend app
  fullnameOverride: ''
  ## @param truefoundryFrontendApp.podAnnotations Annotations for the frontend app pods
  podAnnotations: {}
  ## @param truefoundryFrontendApp.podSecurityContext Security context for the frontend app pods
  podSecurityContext: {}
  ## @param truefoundryFrontendApp.commonLabels Common labels for the frontend app pods
  commonLabels: {}
  ## @param truefoundryFrontendApp.securityContext Security context for the frontend app
  securityContext: {}
  ## @param truefoundryFrontendApp.resources Resource requests and limits for the frontend app
  resources: {}
  # resources:
  #  limits:
  #    cpu: 200m
  #    memory: 512Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 50m
  #    memory: 256Mi
  #    ephemeral-storage: 128Mi
  ## truefoundryFrontendApp.livenessProbe Liveness probe settings for the frontend app
  livenessProbe:
    ## @param truefoundryFrontendApp.livenessProbe.initialDelaySeconds Initial delay seconds for the liveness probe
    initialDelaySeconds: 600
    ## @param truefoundryFrontendApp.livenessProbe.periodSeconds Period seconds for the liveness probe
    periodSeconds: 30
    ## @param truefoundryFrontendApp.livenessProbe.timeoutSeconds Timeout seconds for the liveness probe
    timeoutSeconds: 5
    ## @param truefoundryFrontendApp.livenessProbe.failureThreshold Failure threshold for the liveness probe
    failureThreshold: 3
    ## @param truefoundryFrontendApp.livenessProbe.successThreshold Success threshold for the liveness probe
    successThreshold: 1
  ## truefoundryFrontendApp.readinessProbe Readiness probe settings for the frontend app
  readinessProbe:
    ## @param truefoundryFrontendApp.readinessProbe.initialDelaySeconds Initial delay seconds for the readiness probe
    initialDelaySeconds: 30
    ## @param truefoundryFrontendApp.readinessProbe.periodSeconds Period seconds for the readiness probe
    periodSeconds: 30
    ## @param truefoundryFrontendApp.readinessProbe.timeoutSeconds Timeout seconds for the readiness probe
    timeoutSeconds: 5
    ## @param truefoundryFrontendApp.readinessProbe.failureThreshold Failure threshold for the readiness probe
    failureThreshold: 3
    ## @param truefoundryFrontendApp.readinessProbe.successThreshold Success threshold for the readiness probe
    successThreshold: 1
  ## @param truefoundryFrontendApp.nodeSelector Node selector for the frontend app
  nodeSelector: {}
  ## @param truefoundryFrontendApp.affinity Affinity settings for the frontend app
  affinity: {}
  ## @param truefoundryFrontendApp.topologySpreadConstraints Topology spread constraints for the frontend app
  topologySpreadConstraints: {}
  ## truefoundryFrontendApp.service Service settings for the frontend app
  service:
    ## @param truefoundryFrontendApp.service.type Service type for the frontend app
    type: ClusterIP
    ## @param truefoundryFrontendApp.service.port Service port for the frontend app
    port: 5000
    ## @param truefoundryFrontendApp.service.annotations Annotations for the frontend app service
    annotations: {}
  ## truefoundryFrontendApp.ingress Ingress settings for the frontend app
  ingress:
    ## @param truefoundryFrontendApp.ingress.enabled Enable ingress for the frontend app
    enabled: false
    ## @param truefoundryFrontendApp.ingress.annotations Annotations for the frontend app ingress
    annotations: {}
    ## @param truefoundryFrontendApp.ingress.labels Labels for the frontend app ingress
    labels: {}
    ## @param truefoundryFrontendApp.ingress.ingressClassName Ingress class name for the frontend app
    ingressClassName: istio
    ## @param truefoundryFrontendApp.ingress.tls TLS settings for the frontend app
    tls: []
    ## @param truefoundryFrontendApp.ingress.hosts Hosts for the frontend app
    hosts: []
  ## truefoundryFrontendApp.istio Istio virtual service settings for the frontend app
  istio:
    ## truefoundryFrontendApp.istio.virtualservice Enable virtual service for the frontend app
    virtualservice:
      ## @param truefoundryFrontendApp.istio.virtualservice.enabled Enable virtual service for the frontend app
      enabled: false
      ## @param truefoundryFrontendApp.istio.virtualservice.annotations Annotations for the frontend app virtual service
      annotations: {}
      ## @param truefoundryFrontendApp.istio.virtualservice.gateways Gateways for the frontend app virtual service
      gateways: []
      ## @param truefoundryFrontendApp.istio.virtualservice.hosts Hosts for the frontend app virtual service
      hosts: []
  ## @param truefoundryFrontendApp.servicefoundryServerHost Servicefoundry server host for the frontend app
  servicefoundryServerHost: >-
    {{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local
  ## @param truefoundryFrontendApp.tfyWorkflowAdminHost tfy workflow admin host for the frontend app
  tfyWorkflowAdminHost: >-
    {{ .Release.Name }}-tfy-workflow-admin-server.{{ .Release.Namespace }}.svc.cluster.local
  ## @param truefoundryFrontendApp.s3proxyHost s3 proxy host for the frontend app
  s3proxyHost: >-
    {{ .Release.Name }}-s3proxy.{{ .Release.Namespace }}.svc.cluster.local
  ## @param truefoundryFrontendApp.tfyOtelCollectorHost otel collector host for the frontend app
  tfyOtelCollectorHost: >-
    {{ .Release.Name }}-tfy-otel-collector.{{ .Release.Namespace }}.svc.cluster.local
  ## truefoundryFrontendApp.llmGateway LLM gateway settings for the frontend app
  llmGateway:
    ## @param truefoundryFrontendApp.llmGateway.external Make LLMGateway external
    external: false
    ## @param truefoundryFrontendApp.llmGateway.backendHost Backend Host for the LLM gateway
    backendHost: '{{ .Release.Name }}-tfy-llm-gateway.{{ .Release.Namespace }}.svc.cluster.local'
    ## @param truefoundryFrontendApp.llmGateway.backendPort Backend Port for the LLM gateway
    backendPort: 8787
  ## @param truefoundryFrontendApp.proxyServerHost Proxy server host for the frontend app
  proxyServerHost: '{{ .Release.Name }}-tfy-controller.{{ .Release.Namespace }}.svc.cluster.local'
  ## truefoundryFrontendApp.serviceAccount Service account settings for the frontend app
  serviceAccount:
    ## @param truefoundryFrontendApp.serviceAccount.annotations Annotations for the frontend app service account
    annotations: {}
  ## @param truefoundryFrontendApp.extraVolumes Extra volumes for the frontend app
  extraVolumes: []
  ## @param truefoundryFrontendApp.extraVolumeMounts Extra volume mounts for the frontend app
  extraVolumeMounts: []
  ## @param truefoundryFrontendApp.imagePullSecrets Image pull secrets for the frontend app
  ##
  imagePullSecrets: []
  ## @param truefoundryFrontendApp.env [object] Environment variables for the frontend app
  env:
    AUTH_SERVER_URL: https://auth.truefoundry.com
    NATS_URL: ws://{{ .Release.Name }}-tfy-nats.{{ .Release.Namespace }}.svc.cluster.local:8080
    MLFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-mlfoundry-server.{{ .Release.Namespace }}.svc.cluster.local:5000
    SERVICEFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    TFY_CONTROLLER_URL: http://{{ .Release.Name }}-tfy-controller.{{ .Release.Namespace }}.svc.cluster.local:8123
    DEBUGGING_AGENT_URL: http://tfy-llm-agent.{{ .Release.Namespace }}.svc.cluster.local:8080
    TFY_OTEL_COLLECTOR_URL: http://{{ .Release.Name }}-tfy-otel-collector.{{ .Release.Namespace }}.svc.cluster.local:4318
    TRT_ENGINE_BUILDER_BASE_URL: https://tfy-trt-llm-engine-builder.tfy-ctl-euwe1-production.production.truefoundry.com
    SPARK_HISTORY_SERVER_URL: http://{{ .Release.Name }}-spark-history-server.{{ .Release.Namespace }}.svc.cluster.local:18080
    VITE_AUTHSERVER_URL: /api/auth
    VITE_MLFOUNDRY_URL: /api/ml
    VITE_SVCFOUNDRY_URL: /api/svc
    VITE_DEBUGGING_AGENT_URL: /api/agent
    VITE_LLM_GATEWAY_URL: /api/llm
    VITE_LIVE_DEMO_TOKEN_VENDOR_URL: /api/live-demo-token-vendor
    VITE_TRT_ENGINE_BUILDER_URL: /api/trt-engine-builder
    VITE_SOCKET_URL: ""
    VITE_NATS_URL: ""
    VITE_FUSIONAUTH_URL: https://login.truefoundry.com
    VITE_MULTITENANT_ENABLED: "false"
    VITE_TENANT_NAME: "{{ .Values.global.tenantName }}"
    VITE_EXPORT_AS_HELM_TYPES: service,volume,helm,job
    VITE_CREATE_AS_APPLICATION_SET: service,helm,job
    VITE_ENABLE_COMPANY_REGISTRATION: "false"
    VITE_ENABLE_FEATURE_RESOURCE_COSTS: "false"
    VITE_COST_ENABLED_TENANTS: ""
    VITE_ENABLE_WORKFLOWS: "true"
    VITE_ENABLE_RECOMMENDATION_INFOBAR: "true"
    VITE_ENABLE_AUTOPILOT: "false"
    VITE_AUTOPILOT_ENABLED_TENANTS: ""
    VITE_ENABLE_POLICY_FLOW: "false"
    VITE_POLICY_FLOW_ENABLED_TENANTS: ""
    VITE_ENABLE_DEPLOYMENT_ASSISTANT: "false"
    VITE_DEPLOYMENT_ASSISTANT_ENABLED_TENANTS: ""
    VITE_ENABLE_ENVIRONMENT_YAML: "false"
    VITE_ENVIRONMENT_YAML_ENABLED_TENANTS: ""
    VITE_ENABLE_WHATSNEW: "false"
    VITE_WHATSNEW_ENABLED_TENANTS: ""
    VITE_ENABLE_TROUBLESHOOT: "false"
    VITE_TROUBLESHOOT_ENABLED_TENANTS: ""
    VITE_ENABLE_RSTUDIO: "false"
    VITE_DATA_DIRECTORY_ENABLED_TENANTS: ""
    VITE_ENABLE_DATA_DIRECTORY: "false"
    VITE_ENABLE_EVENTS_GRAPHS: "true"
    VITE_ENABLE_CLUSTER_METRICS: "true"
    VITE_ENABLE_SPARK_JOBS: "false"
    VITE_SPARK_JOBS_ENABLED_TENANTS: ""
    VITE_ENABLE_REPORT_WEBVITALS: "false"
    VITE_REPORT_WEBVITALS_ENABLED_TENANTS: ""
    VITE_ENABLE_NEW_DELETE_FLOW: "false"
    VITE_NEW_DELETE_ENABLED_TENANTS: ""
    VITE_ENABLE_LLM_GATEWAY_REQUEST_LOGS: "true"
    VITE_LLM_GATEWAY_REQUEST_LOGS_ENABLED_TENANTS: ""
    VITE_ENABLE_LLM_GATEWAY_TRACING: "{{ .Values.tags.tracing }}"
    VITE_LLM_GATEWAY_TRACING_ENABLED_TENANTS: ""
    VITE_ENABLE_ALERT_INFOBAR: "false"
    VITE_ALERT_INFOBAR_ENABLED_TENANTS: ""
    VITE_ENABLE_ALERTS_TAB: "false"
    VITE_ALERTS_TAB_ENABLED_TENANTS: ""
    VITE_ENABLE_TRACES: "false"
    VITE_TRACES_ENABLED_TENANTS: ""
    VITE_STRIPE_PUBLISHABLE_KEY: ""
    VITE_CREDIT_CARD_REQUIRED_DOMAINS: ""
    VITE_TENANT_BASE_DOMAIN: ""
    VITE_MANAGED_CLUSTER_ONBOARDING_ENABLED: "false"
    VITE_ENABLE_CLUSTER_LAST_SYNC_ISSUES: "false"
    VITE_MANAGED_CLUSTER_ONBOARDING_SERVICE_URL: ""
    VITE_CIVO_RESOURCES_STRING: ""
    VITE_CLUSTER_ONBOARDING_FLOW_ENABLED: "false"
    VITE_ENABLE_LLM_GATEWAY: "{{ .Values.tags.llmGateway }}"
    VITE_LLM_GATEWAY_PATH: llm-gateway
    VITE_ENABLE_SENTRY: "true"
    VITE_ENABLE_TOOLS_AGENTS: "false"
    VITE_ENABLE_READ_ONLY_INTERACTIVE_MODE: "false"
    VITE_AGENT_ENABLED_TENANTS: ""
    VITE_BRAINFISH_WIDGET_ENABLED_TENANTS: ""
    VITE_SENTRY_DSN: ""
    VITE_APEX_DOMAIN: http://truefoundry.com/
    VITE_ITERATE_AI_KEY: ""
    VITE_BRAINFISH_WIDGET_KEY: ""
    VITE_DATAGRID_LICENSE_KEY: 1562842fe4dffce93855a342848a3609T1JERVI6NDA5ODIsRVhQSVJZPTE2ODA0NzEzNDkwMDAsS0VZVkVSU0lPTj0x
    VITE_ENABLE_GOOGLE_ANALYTICS: "false"
    VITE_ENABLE_PAGESENSE: "false"
    VITE_ENABLE_MIXPANEL: "false"
    VITE_ENABLE_SCHEMA_VISUALISER: "false"
    VITE_ENABLE_MARKDOWN_VISUALISER: "false"
    VITE_SENTRY_AUTH_TOKEN: ""
    VITE_SENTRY_ENVIRONMENT: production
    VITE_MIXPANEL_TOKEN: ""
    VITE_CHAMELEON_TOKEN: ""
    VITE_CRISP_WEBSITE_ID: ""
    VITE_ENABLE_SUPERFLOW: "false"
    VITE_ENABLE_GUARDRAILS: "false"
    VITE_GUARDRAILS_ENABLED_TENANTS: ""
    VITE_MODEL_CONFIG_URL: https://assets.production.truefoundry.com/llm-gateway/ai-models-prod.json
  # If set, overrides global.automountServiceAccountToken for truefoundryFrontendApp
  automountServiceAccountToken: true
###################################################################################################################
####################################### MLfoundry Server ##########################################################
###################################################################################################################
## @section mlfoundryServer Truefoundry mlfoundry server values
mlfoundryServer:
  ## @param mlfoundryServer.enabled Bool to enable the mlfoundry server
  enabled: true
  ## @param mlfoundryServer.tolerations Tolerations specific to the mlfoundry server
  tolerations: {}
  ## @param mlfoundryServer.annotations [object] Annotations for the mlfoundry server
  annotations: {}
  ## mlfoundryServer.image Image for the mlfoundry server
  image:
    ## @param mlfoundryServer.image.repository Image repository for the mlfoundry server
    repository: "tfy.jfrog.io/tfy-private-images/mlfoundry-server"
    ## @param mlfoundryServer.image.tag Image tag for the mlfoundry server
    tag: "v0.56.0"
  ## @skip mlfoundryServer.replicaCount Number of replicas for the mlfoundry server
  # replicaCount: 1
  ## @param mlfoundryServer.environmentName Environment name for the mlfoundry server
  environmentName: default
  ## @param mlfoundryServer.envSecretName Secret name for the mlfoundry server environment variables
  envSecretName: mlfoundry-server-env-secret
  ## @param mlfoundryServer.imagePullPolicy Image pull policy for the mlfoundry server
  imagePullPolicy: IfNotPresent
  ## @param mlfoundryServer.nameOverride Override name for the mlfoundry server
  nameOverride: ''
  ## @param mlfoundryServer.fullnameOverride Full name override for the mlfoundry server
  fullnameOverride: ''
  ## @param mlfoundryServer.podAnnotations Annotations for the mlfoundry server pods
  podAnnotations: {}
  ## @param mlfoundryServer.podSecurityContext Security context for the mlfoundry server pods
  podSecurityContext: {}
  ## @param mlfoundryServer.commonLabels Common labels for the mlfoundry server pods
  commonLabels: {}
  ## @param mlfoundryServer.securityContext Security context for the mlfoundry server
  securityContext: {}
  ## @param mlfoundryServer.resources [object] Resource requests and limits for the mlfoundry server
  resources: {}
  # resources:
  #  limits:
  #    cpu: 1200m
  #    memory: 2048Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 600m
  #    memory: 1024Mi
  #    ephemeral-storage: 128Mi
  ## mlfoundryServer.livenessProbe Liveness probe settings for the mlfoundry server
  livenessProbe:
    ## @param mlfoundryServer.livenessProbe.failureThreshold Liveness probe failure threshold for mlfoundry server
    failureThreshold: 3
    ## @param mlfoundryServer.livenessProbe.initialDelaySeconds Liveness probe initial delay for mlfoundry server
    initialDelaySeconds: 600
    ## @param mlfoundryServer.livenessProbe.periodSeconds Liveness probe period for mlfoundry server
    periodSeconds: 10
    ## @param mlfoundryServer.livenessProbe.successThreshold Liveness probe success threshold for mlfoundry server
    successThreshold: 1
    ## @param mlfoundryServer.livenessProbe.timeoutSeconds Liveness probe timeout for mlfoundry server
    timeoutSeconds: 1
  ## mlfoundryServer.readinessProbe Readiness probe settings for the mlfoundry server
  readinessProbe:
    ## @param mlfoundryServer.readinessProbe.failureThreshold Readiness probe failure threshold for mlfoundry server
    failureThreshold: 3
    ## @param mlfoundryServer.readinessProbe.initialDelaySeconds Readiness probe initial delay for mlfoundry server
    initialDelaySeconds: 30
    ## @param mlfoundryServer.readinessProbe.periodSeconds Readiness probe period for mlfoundry server
    periodSeconds: 10
    ## @param mlfoundryServer.readinessProbe.successThreshold Readiness probe success threshold for mlfoundry server
    successThreshold: 1
    ## @param mlfoundryServer.readinessProbe.timeoutSeconds Readiness probe timeout for mlfoundry server
    timeoutSeconds: 1
  ## @param mlfoundryServer.nodeSelector Node selector for the mlfoundry server
  nodeSelector: {}
  ## @param mlfoundryServer.affinity Affinity settings for the mlfoundry server
  affinity: {}
  ## @param mlfoundryServer.topologySpreadConstraints Topology spread constraints for the mlfoundry server
  topologySpreadConstraints: {}
  ## mlfoundryServer.service Service settings for the mlfoundry server
  service:
    ## @param mlfoundryServer.service.type Service type for the mlfoundry server
    type: ClusterIP
    ## @param mlfoundryServer.service.port Service port for the mlfoundry server
    port: 5000
    ## @param mlfoundryServer.service.annotations Annotations for the mlfoundry server service
    annotations: {}
  ## mlfoundryServer.serviceAccount Service account settings for the mlfoundry server
  serviceAccount:
    ## @param mlfoundryServer.serviceAccount.annotations Annotations for the mlfoundry server service account
    annotations: {}
  ## @param mlfoundryServer.imagePullSecrets Image pull credentials for mlfoundry server
  imagePullSecrets: []
  ## @param mlfoundryServer.extraVolumes Extra volumes for the mlfoundry server
  extraVolumes: []
  ## @param mlfoundryServer.extraVolumeMounts Extra volume mounts for the mlfoundry server
  extraVolumeMounts: []
  ## @param mlfoundryServer.env [object] Environment variables for the mlfoundry server
  env:
    NUM_APP_WORKERS: "2"
    PROMETHEUS_FASTAPI_INSTRUMENTATOR: "1"
    PROMETHEUS_MULTIPROC_DIR: /tmp
    prometheus_multiproc_dir: /tmp
    DB_NAME: ${k8s-secret/truefoundry-creds/DB_NAME}
    DB_USERNAME: ${k8s-secret/truefoundry-creds/DB_USERNAME}
    DB_PASSWORD: ${k8s-secret/truefoundry-creds/DB_PASSWORD}
    DB_HOST: ${k8s-secret/truefoundry-creds/DB_HOST}
    DB_POSTGRES_SCHEMA: mlfoundry
    DB_PORT: "5432"
    DB_DIALECT: postgresql+psycopg2
    AUTH_SERVER_URL: https://auth.truefoundry.com
    ARTIFACT_ROOT: s3://{{ .Values.mlfoundryServer.env.S3_BUCKET_NAME }}
    MLFLOW_S3_ENDPOINT_URL: "{{ .Values.mlfoundryServer.env.S3_ENDPOINT_URL }}"
    S3_ENDPOINT_URL: ""
    MULTITENANT: "false"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    TFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    SERVICEFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    ENVIRONMENT: production
  # If set, overrides global.automountServiceAccountToken for mlfoundryServer
  automountServiceAccountToken: true
###################################################################################################################
####################################### Spark History Server #######################################################
###################################################################################################################
## @section sparkHistoryServer Truefoundry spark history server values
s3proxy:
  ## @param s3proxy.enabled Bool to enable the s3 proxy
  enabled: false
  ## @param s3proxy.tolerations Tolerations specific to the s3 proxy
  tolerations: {}
  ## @skip s3proxy.replicaCount Number of replicas for the s3 proxy
  # replicaCount: 1
  ## @param s3proxy.annotations [object] Annotations for the s3 proxy
  annotations: {}
  ## s3proxy.image Image for the s3 proxy
  image:
    # Set suitable values for the image repository and tag
    ## @param s3proxy.image.repository Image repository for the s3 proxy
    repository: "tfy.jfrog.io/tfy-private-images/s3proxy"
    ## @param s3proxy.image.tag Image tag for the s3 proxy
    tag: "v0.56.0"
  ## @param s3proxy.environmentName Environment name for the s3 proxy
  environmentName: default
  ## @param s3proxy.envSecretName Secret name for the s3 proxy environment variables
  envSecretName: s3proxy-env-secret
  ## @param s3proxy.imagePullPolicy Image pull policy for the s3 proxy
  imagePullPolicy: IfNotPresent
  ## @param s3proxy.nameOverride Override name for the s3 proxy
  nameOverride: ''
  ## @param s3proxy.fullnameOverride Full name override for the s3 proxy
  fullnameOverride: ''
  ## @param s3proxy.podAnnotations Annotations for the s3 proxy pods
  podAnnotations: {}
  ## @param s3proxy.podSecurityContext Security context for the s3 proxy pods
  podSecurityContext: {}
  ## @param s3proxy.commonLabels Common labels for the s3 proxy pods
  commonLabels: {}
  ## @param s3proxy.securityContext Security context for the s3 proxy
  securityContext: {}
  ## @skip s3proxy.resources [object] Resource requests and limits for the s3 proxy
  # resources:
  #  ## s3proxy.resources.limits Resource limits for the s3 proxy
  #  limits:
  #    ## @param s3proxy.resources.limits.cpu CPU limit for the s3 proxy
  #    cpu: 600m
  #    ## @param s3proxy.resources.limits.memory Memory limit for the s3 proxy
  #    memory: 1600Mi
  #    ## @param s3proxy.resources.limits.ephemeral-storage Ephemeral storage limit for the s3 proxy
  #    ephemeral-storage: 256Mi
  #  ## s3proxy.resources.requests Resource requests for the s3 proxy
  #  requests:
  #    ## @param s3proxy.resources.requests.cpu CPU request for the s3 proxy
  #    cpu: 400m
  #    ## @param s3proxy.resources.requests.memory Memory request for the s3 proxy
  #    memory: 800Mi
  #    ## @param s3proxy.resources.requests.ephemeral-storage Ephemeral storage request for the s3 proxy
  #    ephemeral-storage: 128Mi
  ## s3proxy.livenessProbe Liveness probe settings for the s3 proxy
  livenessProbe:
    ## @param s3proxy.livenessProbe.failureThreshold Liveness probe failure threshold for s3 proxy
    failureThreshold: 3
    ## @param s3proxy.livenessProbe.initialDelaySeconds Liveness probe initial delay for s3 proxy
    initialDelaySeconds: 600
    ## @param s3proxy.livenessProbe.periodSeconds Liveness probe period for s3 proxy
    periodSeconds: 10
    ## @param s3proxy.livenessProbe.successThreshold Liveness probe success threshold for s3 proxy
    successThreshold: 1
    ## @param s3proxy.livenessProbe.timeoutSeconds Liveness probe timeout for s3 proxy
    timeoutSeconds: 1
  ## s3proxy.readinessProbe Readiness probe settings for the s3 proxy
  readinessProbe:
    ## @param s3proxy.readinessProbe.failureThreshold Readiness probe failure threshold for s3 proxy
    failureThreshold: 3
    ## @param s3proxy.readinessProbe.initialDelaySeconds Readiness probe initial delay for s3 proxy
    initialDelaySeconds: 30
    ## @param s3proxy.readinessProbe.periodSeconds Readiness probe period for s3 proxy
    periodSeconds: 10
    ## @param s3proxy.readinessProbe.successThreshold Readiness probe success threshold for s3 proxy
    successThreshold: 1
    ## @param s3proxy.readinessProbe.timeoutSeconds Readiness probe timeout for s3 proxy
    timeoutSeconds: 1
  ## @param s3proxy.nodeSelector Node selector for the s3 proxy
  nodeSelector: {}
  ## @param s3proxy.affinity Affinity settings for the s3 proxy
  affinity: {}
  ## @param s3proxy.topologySpreadConstraints Topology spread constraints for the s3 proxy
  topologySpreadConstraints: {}
  ## s3proxy.service Service settings for the s3 proxy
  service:
    ## @param s3proxy.service.type Service type for the s3 proxy
    type: ClusterIP
    ## @param s3proxy.service.port Service port for the s3 proxy
    port: 8080
    ## @param s3proxy.service.annotations Annotations for the s3 proxy service
    annotations: {}
    ## s3proxy.serviceAccount Service account settings for the s3 proxy
  serviceAccount:
    ## @param s3proxy.serviceAccount.create Bool to create the s3 proxy service account
    create: false
    ## @param s3proxy.serviceAccount.name Name of the s3 proxy service account
    name: ""
    ## @param s3proxy.serviceAccount.annotations Annotations for the s3 proxy service account
    annotations: {}
  ## @param s3proxy.extraVolumes Extra volumes for the s3 proxy
  extraVolumes: []
  ## @param s3proxy.extraVolumeMounts Extra volume mounts for the s3 proxy
  extraVolumeMounts: []
  ## @param s3proxy.imagePullSecrets Image pull credentials for s3 proxy
  imagePullSecrets: []
  config:
    ## @param s3proxy.config.jcloudsEndpoint JClouds endpoint for the s3 proxy
    jcloudsEndpoint: https://s3.us-east-1.amazonaws.com
    ## @param s3proxy.config.jcloudsProvider JClouds provider for the s3 proxy
    jcloudsProvider: aws-s3
  ## @param s3proxy.env [object] Environment variables for the s3 proxy
  env:
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
  # If set, overrides global.automountServiceAccountToken for s3proxy
  automountServiceAccountToken: true
###################################################################################################################
####################################### Servicefoundry Server #######################################################
###################################################################################################################
## @section servicefoundryServer Truefoundry servicefoundry server values
servicefoundryServer:
  ## @param servicefoundryServer.enabled Bool to enable the servicefoundry server
  enabled: true
  ## @param servicefoundryServer.tolerations Tolerations specific to the servicefoundry server
  tolerations: {}
  ## @skip servicefoundryServer.replicaCount Number of replicas for the servicefoundry server
  # replicaCount: 1
  ## @param servicefoundryServer.annotations [object] Annotations for the mlfoundry server
  annotations: {}
  ## servicefoundryServer.image Image for the servicefoundry server
  image:
    ## @param servicefoundryServer.image.repository Image repository for the servicefoundry server
    repository: "tfy.jfrog.io/tfy-private-images/servicefoundry-server"
    ## @param servicefoundryServer.image.tag Image tag for the servicefoundry server
    tag: "v0.56.0"
  ## @param servicefoundryServer.environmentName Environment name for the servicefoundry server
  environmentName: default
  ## @param servicefoundryServer.envSecretName Secret name for the servicefoundry server environment variables
  envSecretName: servicefoundry-server-env-secret
  ## @param servicefoundryServer.imagePullPolicy Image pull policy for the servicefoundry server
  imagePullPolicy: IfNotPresent
  ## @param servicefoundryServer.nameOverride Override name for the servicefoundry server
  nameOverride: ''
  ## @param servicefoundryServer.fullnameOverride Full name override for the servicefoundry server
  fullnameOverride: ''
  ## @param servicefoundryServer.podAnnotations Annotations for the servicefoundry server pods
  podAnnotations: {}
  ## @param servicefoundryServer.podSecurityContext Security context for the servicefoundry server pods
  podSecurityContext: {}
  ## @param servicefoundryServer.commonLabels Common labels for the servicefoundry server pods
  commonLabels: {}
  ## @param servicefoundryServer.securityContext Security context for the servicefoundry server
  securityContext: {}
  ## @param servicefoundryServer.resources [object] Resource requests and limits for the servicefoundry server
  resources: {}
  # resources:
  #  limits:
  #    cpu: 600m
  #    memory: 1600Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 400m
  #    memory: 800Mi
  #    ephemeral-storage: 128Mi
  ## servicefoundryServer.livenessProbe Liveness probe settings for the servicefoundry server
  livenessProbe:
    ## @param servicefoundryServer.livenessProbe.failureThreshold Liveness probe failure threshold for servicefoundry server
    failureThreshold: 3
    ## @param servicefoundryServer.livenessProbe.initialDelaySeconds Liveness probe initial delay for servicefoundry server
    initialDelaySeconds: 600
    ## @param servicefoundryServer.livenessProbe.periodSeconds Liveness probe period for servicefoundry server
    periodSeconds: 10
    ## @param servicefoundryServer.livenessProbe.successThreshold Liveness probe success threshold for servicefoundry server
    successThreshold: 1
    ## @param servicefoundryServer.livenessProbe.timeoutSeconds Liveness probe timeout for servicefoundry server
    timeoutSeconds: 1
  ## servicefoundryServer.readinessProbe Readiness probe settings for the servicefoundry server
  readinessProbe:
    ## @param servicefoundryServer.readinessProbe.failureThreshold Readiness probe failure threshold for servicefoundry server
    failureThreshold: 3
    ## @param servicefoundryServer.readinessProbe.initialDelaySeconds Readiness probe initial delay for servicefoundry server
    initialDelaySeconds: 30
    ## @param servicefoundryServer.readinessProbe.periodSeconds Readiness probe period for servicefoundry server
    periodSeconds: 10
    ## @param servicefoundryServer.readinessProbe.successThreshold Readiness probe success threshold for servicefoundry server
    successThreshold: 1
    ## @param servicefoundryServer.readinessProbe.timeoutSeconds Readiness probe timeout for servicefoundry server
    timeoutSeconds: 1
  ## @param servicefoundryServer.nodeSelector Node selector for the servicefoundry server
  nodeSelector: {}
  ## @param servicefoundryServer.affinity Affinity settings for the servicefoundry server
  affinity: {}
  ## @param servicefoundryServer.topologySpreadConstraints Topology spread constraints for the servicefoundry server
  topologySpreadConstraints: {}
  ## servicefoundryServer.service Service settings for the servicefoundry server
  service:
    ## @param servicefoundryServer.service.type Service type for the servicefoundry server
    type: ClusterIP
    ## @param servicefoundryServer.service.port Service port for the servicefoundry server
    port: 3000
    ## @param servicefoundryServer.service.annotations Annotations for the servicefoundry server service
    annotations: {}
    ## servicefoundryServer.serviceAccount Service account settings for the servicefoundry server
  serviceAccount:
    ## @param servicefoundryServer.serviceAccount.annotations Annotations for the servicefoundry server service account
    annotations: {}
  ## @param servicefoundryServer.extraVolumes Extra volumes for the servicefoundry server
  extraVolumes: []
  ## @param servicefoundryServer.extraVolumeMounts Extra volume mounts for the servicefoundry server
  extraVolumeMounts: []
  ## @param servicefoundryServer.imagePullSecrets Image pull credentials for servicefoundry server
  imagePullSecrets: []
  ## servicefoundryServer.rbac RBAC settings for the servicefoundry server
  rbac:
    ## @param servicefoundryServer.rbac.enabled Enable RBAC for the servicefoundry server
    enabled: true
  ## servicefoundryServer.serviceMonitor ServiceMonitor settings for the servicefoundry server
  serviceMonitor:
    ## @param servicefoundryServer.serviceMonitor.enabled Enable ServiceMonitor for the servicefoundry server
    enabled: true
    ## @param servicefoundryServer.serviceMonitor.additionalLabels Additional labels for the ServiceMonitor
    additionalLabels: {}
    ## @param servicefoundryServer.serviceMonitor.additionalAnnotations Additional annotations for the ServiceMonitor
    additionalAnnotations: {}
  ## @param servicefoundryServer.env [object] Environment variables for the servicefoundry server
  env:
    DEFAULT_CLOUD_PROVIDER: ""
    S3_BUCKET_NAME: ""
    AWS_REGION: ""
    AWS_ASSUME_ROLE_ARN: ""
    GS_BUCKET_NAME: ""
    AZURE_BLOB_URI: ""
    AZURE_BLOB_CONNECTION_STRING: ""
    DB_NAME: ${k8s-secret/truefoundry-creds/DB_NAME}
    DB_USERNAME: ${k8s-secret/truefoundry-creds/DB_USERNAME}
    DB_PASSWORD: ${k8s-secret/truefoundry-creds/DB_PASSWORD}
    DB_HOST: ${k8s-secret/truefoundry-creds/DB_HOST}
    DB_PORT: "5432"
    DB_SSL_CA_PATH: ""
    DB_SSL_CERT_PATH: ""
    DB_SSL_KEY_PATH: ""
    DB_SSL_MODE: ""
    TFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    CONTROL_PLANE_URL: "{{ .Values.global.controlPlaneURL }}"
    TFY_BUILD_LOGS_URL: "{{ .Values.global.controlPlaneURL }}/api/svc"
    TFY_BUILD_WS_URL: "{{ .Values.global.controlPlaneURL }}"
    AUTH_SERVER_URL: https://auth.truefoundry.com
    CONTROL_PLANE_VERSION: "{{ .Values.global.controlPlaneChartVersion }}"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    MANIFEST_SERVICE_URL: http://{{ .Release.Name }}-sfy-manifest-service.{{ .Release.Namespace }}.svc.cluster.local:8080
    MLFOUNDRY_SERVER_URL: http://{{ .Release.Name }}-mlfoundry-server.{{ .Release.Namespace }}.svc.cluster.local:5000
    NATS_CONTROLPLANE_ACCOUNT_SEED: ${k8s-secret/truefoundry-tfy-nats-secret/NATS_CONTROLPLANE_ACCOUNT_SEED}
    NATS_URL: http://{{ .Release.Name }}-tfy-nats.{{ .Release.Namespace }}.svc.cluster.local:4222
    NATS_QGROUP_NAME: ""
    FLYTE_ADMIN_URL: http://{{ .Release.Name }}-tfy-workflow-admin-server.{{ .Release.Namespace }}.svc.cluster.local:8089
    CLUSTER_PROXY_URL: http://{{ .Release.Name }}-tfy-controller.{{ .Release.Namespace }}.svc.cluster.local:8123
    BUILD_CALLBACK_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    LLM_GATEWAY_URL: "{{ .Values.global.controlPlaneURL }}/api/llm"
    LLM_GATEWAY_ENABLED: "{{ .Values.tags.llmGateway }}"
    VCS_INTEGRATION_STATE_OBJECT_HASH_SECRET: ""
    GITHUB_INSTALLATION_URL: ""
    GITHUB_PRIVATE_KEY: ""
    GITHUB_APP_ID: ""
    BITBUCKET_CLIENT_ID: ""
    BITBUCKET_CLIENT_SECRET: ""
    BITBUCKET_APP_PASSWORD: ""
    GITLAB_APP_ID: ""
    GITLAB_APP_SECRET: ""
    GITLAB_SCOPE: ""
    AZURE_CLIENT_ID: ""
    AZURE_CLIENT_SECRET: ""
    CLICKHOUSE_ENABLED: "{{ .Values.tags.llmGatewayRequestLogging }}"
    CLICKHOUSE_HOST: http://clickhouse-{{ .Release.Name }}.{{ .Release.Namespace }}.svc.cluster.local:8123
    CLICKHOUSE_USER: user
    CLICKHOUSE_PASSWORD: "{{ if .Values.tags.llmGatewayRequestLogging }}${k8s-secret/truefoundry-clickhouse-secret/CLICKHOUSE_PASSWORD}{{ end }}"
    CLICKHOUSE_TTL_IN_DAYS: "90"
    OAUTH_PROVIDER_TYPE: TRUEFOUNDRY
    EXTERNAL_OAUTH_ISSUER: ""
    EXTERNAL_OAUTH_CLIENT_ID: ""
    EXTERNAL_OAUTH_CLIENT_SECRET: ""
    NODE_OPTIONS: --no-node-snapshot
    SPARK_JOB_EVENT_LOG_ENDPOINT: "{{ .Values.global.controlPlaneURL }}/api/s3proxy"
    SPARK_JOB_EVENT_LOG_BASE_DIR: sparkjob-events
  configs:
    ## @param servicefoundryServer.configs.cicdTemplates CICD Template for servicefoundry server
    cicdTemplates: '{{ .Release.Name }}-cicd-templates-cm'
    ## @param servicefoundryServer.configs.workbenchImages Workbench Images for workbench deployments
    workbenchImages: '{{ .Release.Name }}-workbench-images-cm'
    ## @param servicefoundryServer.configs.imageMutationPolicy Image Mutations policy for workloads
    imageMutationPolicy: '{{ .Release.Name }}-image-mutation-policy-cm'
    ## @param servicefoundryServer.configs.k8sManifestValidationPolicy K8s Manifest Validation policy for workloads
    k8sManifestValidationPolicy: '{{ .Release.Name }}-k8s-manifest-validation-policy-cm'
  # If set, overrides global.automountServiceAccountToken for servicefoundryServer
  automountServiceAccountToken: true
###################################################################################################################
####################################### Spark History Server #######################################################
###################################################################################################################
## @section sparkHistoryServer Truefoundry spark history server values
sparkHistoryServer:
  ## @param sparkHistoryServer.enabled Bool to enable the spark history server
  enabled: false
  ## @param sparkHistoryServer.tolerations Tolerations specific to the spark history server
  tolerations: {}
  ## @skip sparkHistoryServer.replicaCount Number of replicas for the spark history server
  # replicaCount: 1
  ## @param sparkHistoryServer.annotations [object] Annotations for the spark history server
  annotations: {}
  ## sparkHistoryServer.image Image for the spark history server
  image:
    # Set suitable values for the image repository and tag
    ## @param sparkHistoryServer.image.repository Image repository for the spark history server
    repository: "tfy.jfrog.io/tfy-private-images/spark-history-server"
    ## @param sparkHistoryServer.image.tag Image tag for the spark history server
    tag: "v0.55.0"
  ## @param sparkHistoryServer.environmentName Environment name for the spark history server
  environmentName: default
  ## @param sparkHistoryServer.envSecretName Secret name for the spark history server environment variables
  envSecretName: spark-history-server-env-secret
  ## @param sparkHistoryServer.imagePullPolicy Image pull policy for the spark history server
  imagePullPolicy: IfNotPresent
  ## @param sparkHistoryServer.nameOverride Override name for the spark history server
  nameOverride: ''
  ## @param sparkHistoryServer.fullnameOverride Full name override for the spark history server
  fullnameOverride: ''
  ## @param sparkHistoryServer.podAnnotations Annotations for the spark history server pods
  podAnnotations: {}
  ## @param sparkHistoryServer.podSecurityContext Security context for the spark history server pods
  podSecurityContext: {}
  ## @param sparkHistoryServer.commonLabels Common labels for the spark history server pods
  commonLabels: {}
  ## @param sparkHistoryServer.securityContext Security context for the spark history server
  securityContext: {}
  ## @skip sparkHistoryServer.resources [object] Resource requests and limits for the spark history server
  # resources:
  #  ## sparkHistoryServer.resources.limits Resource limits for the spark history server
  #  limits:
  #    ## @param sparkHistoryServer.resources.limits.cpu CPU limit for the spark history server
  #    cpu: 600m
  #    ## @param sparkHistoryServer.resources.limits.memory Memory limit for the spark history server
  #    memory: 1600Mi
  #    ## @param sparkHistoryServer.resources.limits.ephemeral-storage Ephemeral storage limit for the spark history server
  #    ephemeral-storage: 256Mi
  #  ## sparkHistoryServer.resources.requests Resource requests for the spark history server
  #  requests:
  #    ## @param sparkHistoryServer.resources.requests.cpu CPU request for the spark history server
  #    cpu: 400m
  #    ## @param sparkHistoryServer.resources.requests.memory Memory request for the spark history server
  #    memory: 800Mi
  #    ## @param sparkHistoryServer.resources.requests.ephemeral-storage Ephemeral storage request for the spark history server
  #    ephemeral-storage: 128Mi
  ## sparkHistoryServer.livenessProbe Liveness probe settings for the spark history server
  livenessProbe:
    ## @param sparkHistoryServer.livenessProbe.failureThreshold Liveness probe failure threshold for spark history server
    failureThreshold: 3
    ## @param sparkHistoryServer.livenessProbe.initialDelaySeconds Liveness probe initial delay for spark history server
    initialDelaySeconds: 20
    ## @param sparkHistoryServer.livenessProbe.periodSeconds Liveness probe period for spark history server
    periodSeconds: 10
    ## @param sparkHistoryServer.livenessProbe.successThreshold Liveness probe success threshold for spark history server
    successThreshold: 1
    ## @param sparkHistoryServer.livenessProbe.timeoutSeconds Liveness probe timeout for spark history server
    timeoutSeconds: 1
  ## sparkHistoryServer.readinessProbe Readiness probe settings for the spark history server
  readinessProbe:
    ## @param sparkHistoryServer.readinessProbe.failureThreshold Readiness probe failure threshold for spark history server
    failureThreshold: 3
    ## @param sparkHistoryServer.readinessProbe.initialDelaySeconds Readiness probe initial delay for spark history server
    initialDelaySeconds: 10
    ## @param sparkHistoryServer.readinessProbe.periodSeconds Readiness probe period for spark history server
    periodSeconds: 10
    ## @param sparkHistoryServer.readinessProbe.successThreshold Readiness probe success threshold for spark history server
    successThreshold: 1
    ## @param sparkHistoryServer.readinessProbe.timeoutSeconds Readiness probe timeout for spark history server
    timeoutSeconds: 1
  ## @param sparkHistoryServer.nodeSelector Node selector for the spark history server
  nodeSelector: {}
  ## @param sparkHistoryServer.affinity Affinity settings for the spark history server
  affinity: {}
  ## @param sparkHistoryServer.topologySpreadConstraints Topology spread constraints for the spark history server
  topologySpreadConstraints: {}
  ## sparkHistoryServer.service Service settings for the spark history server
  service:
    ## @param sparkHistoryServer.service.type Service type for the spark history server
    type: ClusterIP
    ## @param sparkHistoryServer.service.port Service port for the spark history server
    port: 18080
    ## @param sparkHistoryServer.service.annotations Annotations for the spark history server service
    annotations: {}
    ## sparkHistoryServer.serviceAccount Service account settings for the spark history server
  serviceAccount:
    ## @param sparkHistoryServer.serviceAccount.create Bool to create the spark history server service account
    create: false
    ## @param sparkHistoryServer.serviceAccount.name Name of the spark history server service account
    name: ""
    ## @param sparkHistoryServer.serviceAccount.annotations Annotations for the spark history server service account
    annotations: {}
  ## @param sparkHistoryServer.extraVolumes Extra volumes for the spark history server
  extraVolumes: []
  ## @param sparkHistoryServer.extraVolumeMounts Extra volume mounts for the spark history server
  extraVolumeMounts: []
  ## @param sparkHistoryServer.imagePullSecrets Image pull credentials for spark history server
  imagePullSecrets: []
  ## sparkHistoryServer.rbac RBAC settings for the spark history server
  rbac:
    ## @param sparkHistoryServer.rbac.enabled Enable RBAC for the spark history server
    enabled: true
  ## @param sparkHistoryServer.env [object] Environment variables for the spark history server
  env:
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    SPARK_HISTORY_OPTS: -Dspark.jars.ivy=/tmp/ivy -Dspark.hadoop.fs.s3a.impl=org.apache.hadoop.fs.s3a.S3AFileSystem -Dspark.history.fs.logDirectory=s3a://{{ .Values.servicefoundryServer.env.S3_BUCKET_NAME }}/{{ .Values.servicefoundryServer.env.SPARK_JOB_EVENT_LOG_BASE_DIR }} -Dspark.history.store.serializer=PROTOBUF -Dspark.hadoop.fs.s3a.aws.credentials.provider=com.amazonaws.auth.WebIdentityTokenCredentialsProvider -Dspark.history.fs.createHistoryDirIfNecessary=true -Dspark.history.fs.inProgressOptimization.enabled=true -Dspark.ui.proxyRedirectUri={{ .Values.global.controlPlaneURL }} -Dspark.ui.proxyBase=/api/spark-ui -Dspark.history.store.path=/opt/spark/cache -Dspark.history.store.maxDiskUsage=5g
    SPARK_UI_PATH_PREFIX: /
###################################################################################################################
####################################### Tfy K8s Controller #######################################################
###################################################################################################################
## @section tfyK8sController Truefoundry tfy k8s controller values
tfyK8sController:
  ## @param tfyK8sController.enabled Bool to enable the tfyK8sController
  enabled: true
  ## @param tfyK8sController.tolerations Tolerations specific to the tfyK8sController
  tolerations: {}
  ## @skip tfyK8sController.replicaCount Number of replicas for the tfyK8sController
  # replicaCount: 1
  ## @param tfyK8sController.annotations [object] Annotations for the tfyK8sController
  annotations: {}
  ## tfyK8sController.image Image for the tfyK8sController
  image:
    ## @param tfyK8sController.image.repository Image repository for the tfyK8sController
    repository: "tfy.jfrog.io/tfy-private-images/tfy-k8s-controller"
    ## @param tfyK8sController.image.tag Image tag for the tfyK8sController
    tag: "v0.56.0"
  ## @param tfyK8sController.environmentName Environment name for tfyK8sController
  environmentName: default
  ## @param tfyK8sController.envSecretName Secret name for the tfyK8sController environment variables
  envSecretName: 'tfy-k8s-controller-env-secret'
  ## @param tfyK8sController.imagePullPolicy Image pull policy for the tfyK8sController
  imagePullPolicy: IfNotPresent
  ## @param tfyK8sController.nameOverride Override name for the tfyK8sController
  nameOverride: ''
  ## @param tfyK8sController.fullnameOverride Full name override for the tfyK8sController
  fullnameOverride: ''
  ## @param tfyK8sController.podAnnotations [object] Annotations for the tfyK8sController pods
  podAnnotations:
    karpenter.sh/do-not-disrupt: "true"
    cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
  ## @param tfyK8sController.podSecurityContext Security context for the tfyK8sController pods
  podSecurityContext: {}
  ## @param tfyK8sController.commonLabels Common labels for the tfyK8sController pods
  commonLabels: {}
  ## @param tfyK8sController.securityContext Security context for the tfyK8sController
  securityContext: {}
  ## @param tfyK8sController.resources [object] Resource requests and limits for the tfyK8sController
  resources: {}
  # resources:
  #  limits:
  #    cpu: 400m
  #    memory: 512Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 200m
  #    memory: 256Mi
  #    ephemeral-storage: 128Mi
  ## tfyK8sController.livenessProbe Liveness probe settings for the tfyK8sController
  livenessProbe:
    ## @param tfyK8sController.livenessProbe.failureThreshold Liveness probe failure threshold for tfyK8sController
    failureThreshold: 3
    ## @param tfyK8sController.livenessProbe.initialDelaySeconds Liveness probe initial delay for tfyK8sController
    initialDelaySeconds: 600
    ## @param tfyK8sController.livenessProbe.periodSeconds Liveness probe period for tfyK8sController
    periodSeconds: 10
    ## @param tfyK8sController.livenessProbe.successThreshold Liveness probe success threshold for tfyK8sController
    successThreshold: 1
    ## @param tfyK8sController.livenessProbe.timeoutSeconds Liveness probe timeout for tfyK8sController
    timeoutSeconds: 1
  ## tfyK8sController.readinessProbe Readiness probe settings for the tfyK8sController
  readinessProbe:
    ## @param tfyK8sController.readinessProbe.failureThreshold Readiness probe failure threshold for tfyK8sController
    failureThreshold: 3
    ## @param tfyK8sController.readinessProbe.initialDelaySeconds Readiness probe initial delay for tfyK8sController
    initialDelaySeconds: 30
    ## @param tfyK8sController.readinessProbe.periodSeconds Readiness probe period for tfyK8sController
    periodSeconds: 10
    ## @param tfyK8sController.readinessProbe.successThreshold Readiness probe success threshold for tfyK8sController
    successThreshold: 1
    ## @param tfyK8sController.readinessProbe.timeoutSeconds Readiness probe timeout for tfyK8sController
    timeoutSeconds: 1
  ## @param tfyK8sController.nodeSelector Node selector for the tfyK8sController
  nodeSelector: {}
  ## @param tfyK8sController.affinity Affinity settings for the tfyK8sController
  affinity: {}
  ## @param tfyK8sController.topologySpreadConstraints Topology spread constraints for the tfyK8sController
  topologySpreadConstraints: {}
  ## tfyK8sController.service Service settings for the tfyK8sController
  service:
    ## @param tfyK8sController.service.type Service type for the tfyK8sController
    type: ClusterIP
    ## @param tfyK8sController.service.port Service port for the tfyK8sController
    port: 3002
    ## @param tfyK8sController.service.annotations Annotations for the tfyK8sController service
    annotations: {}
    ## tfyK8sController.serviceAccount Service account settings for the tfyK8sController
  serviceAccount:
    ## @param tfyK8sController.serviceAccount.annotations Annotations for the tfyK8sController service account
    annotations: {}
  ## @param tfyK8sController.extraVolumes Extra volumes for the tfyK8sController
  extraVolumes: []
  ## @param tfyK8sController.extraVolumeMounts Extra volume mounts for the tfyK8sController
  extraVolumeMounts: []
  ## tfyK8sController.serviceMonitor ServiceMonitor settings for the tfyK8sController
  serviceMonitor:
    ## @param tfyK8sController.serviceMonitor.enabled Enable ServiceMonitor for the tfyK8sController
    enabled: true
    ## @param tfyK8sController.serviceMonitor.additionalLabels Additional labels for the ServiceMonitor
    additionalLabels: {}
    ## @param tfyK8sController.serviceMonitor.additionalAnnotations Additional annotations for the ServiceMonitor
    additionalAnnotations: {}
  ## @param tfyK8sController.imagePullSecrets Image pull secrets for the tfyK8sController
  ##
  imagePullSecrets: []
  ## @param tfyK8sController.env [object] Environment variables for the tfyK8sController
  env:
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    CONTROL_PLANE_NATS_URL: http://{{ .Release.Name }}-tfy-nats.{{ .Release.Namespace }}.svc.cluster.local:4222
    SFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    CLUSTER_PROXY_URL: http://{{ .Release.Name }}-tfy-controller.{{ .Release.Namespace }}.svc.cluster.local:8123
    CONTROL_PLANE_VERSION: "{{ .Values.global.controlPlaneChartVersion }}"
    ANALYTICS_SERVER_URL: https://analytics.truefoundry.com
    AUTH_SERVER_URL: https://auth.truefoundry.com
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    ENABLE_GATEWAY_CONSUMER: "{{ .Values.tags.llmGatewayRequestLogging }}"
    NODE_ENV: production
    DISABLE_SERVICE_RECOMMENDER_RECOMMENDATION_TYPES: autoscaling,readiness_probe,delete_application
    DISABLE_WORKBENCH_RECOMMENDER_RECOMMENDATION_TYPES: delete_application
    ENABLE_AUTOPILOT_DIAGNOSIS: "false"
    SENTRY_ENABLED: "true"
    CLICKHOUSE_ENABLED: "{{ .Values.tags.llmGatewayRequestLogging }}"
    CLICKHOUSE_HOST: http://clickhouse-{{ .Release.Name }}.{{ .Release.Namespace }}.svc.cluster.local:8123
    CLICKHOUSE_USER: user
    CLICKHOUSE_PASSWORD: "{{ if .Values.tags.llmGatewayRequestLogging }}${k8s-secret/truefoundry-clickhouse-secret/CLICKHOUSE_PASSWORD}{{ end }}"
  # If set, overrides global.automountServiceAccountToken for tfyK8sController
  automountServiceAccountToken: true
###################################################################################################################
####################################### Sfy Manifest Service ######################################################
###################################################################################################################
## @section sfyManifestService Truefoundry sfy manifest service values
sfyManifestService:
  ## @param sfyManifestService.enabled Bool to enable the sfy manifest service
  enabled: true
  # SFY_API_KEY: <api_key>
  ## @param sfyManifestService.annotations [object] Annotations for the sfy manifest service
  annotations: {}
  ## @param sfyManifestService.tolerations Tolerations specific to the sfy manifest service
  tolerations: {}
  ## sfyManifestService.image Image for the sfy manifest service
  image:
    ## @param sfyManifestService.image.repository Image repository for the sfy manifest service
    repository: "tfy.jfrog.io/tfy-private-images/sfy-manifest-service"
    ## @param sfyManifestService.image.tag Image tag for the sfy manifest service
    tag: "v0.56.0"
  ## @skip sfyManifestService.replicaCount Number of replicas for the sfy manifest service
  # replicaCount: 1
  ## @param sfyManifestService.environmentName Environment name for the sfy manifest service
  environmentName: default
  ## @param sfyManifestService.envSecretName Secret name for the sfy manifest service environment variables
  envSecretName: sfy-manifest-service-env-secret
  ## @param sfyManifestService.imagePullPolicy Image pull policy for the sfy manifest service
  imagePullPolicy: IfNotPresent
  ## @param sfyManifestService.nameOverride Override name for the sfy manifest service
  nameOverride: ''
  ## @param sfyManifestService.fullnameOverride Full name override for the sfy manifest service
  fullnameOverride: ''
  ## @param sfyManifestService.podAnnotations Annotations for the sfy manifest service pods
  podAnnotations: {}
  ## @param sfyManifestService.podSecurityContext Security context for the sfy manifest service pods
  podSecurityContext: {}
  ## @param sfyManifestService.commonLabels Common labels for the sfy manifest service pods
  commonLabels: {}
  ## @param sfyManifestService.securityContext Security context for the sfy manifest service
  securityContext: {}
  ## @param sfyManifestService.resources [object] Resource requests and limits for the sfy manifest service
  resources: {}
  # resources:
  #  limits:
  #    cpu: 200m
  #    memory: 512Mi
  #    ephemeral-storage: 256Mi
  #  requests:
  #    cpu: 100m
  #    memory: 256Mi
  #    ephemeral-storage: 128Mi
  ## sfyManifestService.livenessProbe Liveness probe settings for the sfy manifest service
  livenessProbe:
    ## @param sfyManifestService.livenessProbe.failureThreshold Liveness probe failure threshold for sfy manifest service
    failureThreshold: 3
    ## @param sfyManifestService.livenessProbe.initialDelaySeconds Liveness probe initial delay for sfy manifest service
    initialDelaySeconds: 600
    ## @param sfyManifestService.livenessProbe.periodSeconds Liveness probe period for sfy manifest service
    periodSeconds: 10
    ## @param sfyManifestService.livenessProbe.successThreshold Liveness probe success threshold for sfy manifest service
    successThreshold: 1
    ## @param sfyManifestService.livenessProbe.timeoutSeconds Liveness probe timeout for sfy manifest service
    timeoutSeconds: 1
  ## sfyManifestService.readinessProbe Readiness probe settings for the sfy manifest service
  readinessProbe:
    ## @param sfyManifestService.readinessProbe.failureThreshold Readiness probe failure threshold for sfy manifest service
    failureThreshold: 3
    ## @param sfyManifestService.readinessProbe.initialDelaySeconds Readiness probe initial delay for sfy manifest service
    initialDelaySeconds: 30
    ## @param sfyManifestService.readinessProbe.periodSeconds Readiness probe period for sfy manifest service
    periodSeconds: 10
    ## @param sfyManifestService.readinessProbe.successThreshold Readiness probe success threshold for sfy manifest service
    successThreshold: 1
    ## @param sfyManifestService.readinessProbe.timeoutSeconds Readiness probe timeout for sfy manifest service
    timeoutSeconds: 1
  ## @param sfyManifestService.nodeSelector Node selector for the sfy manifest service
  nodeSelector: {}
  ## @param sfyManifestService.affinity Affinity settings for the sfy manifest service
  affinity: {}
  ## @param sfyManifestService.topologySpreadConstraints Topology spread constraints for the sfy manifest service
  topologySpreadConstraints: {}
  ## sfyManifestService.serviceMonitor ServiceMonitor settings for the sfy manifest service
  serviceMonitor:
    ## @param sfyManifestService.serviceMonitor.enabled Enable ServiceMonitor for the sfy manifest service
    enabled: true
    ## @param sfyManifestService.serviceMonitor.additionalLabels Additional labels for the ServiceMonitor
    additionalLabels: {}
    ## @param sfyManifestService.serviceMonitor.additionalAnnotations Additional annotations for the ServiceMonitor
    additionalAnnotations: {}
  ## sfyManifestService.service Service settings for the sfy manifest service
  service:
    ## @param sfyManifestService.service.type Service type for the sfy manifest service
    type: ClusterIP
    ## @param sfyManifestService.service.port Service port for the sfy manifest service
    port: 8080
    ## @param sfyManifestService.service.annotations Annotations for the sfy manifest service
    annotations: {}
  ## sfyManifestService.serviceAccount Service account settings for the sfy manifest service
  serviceAccount:
    ## @param sfyManifestService.serviceAccount.annotations Annotations for the sfy manifest service service account
    annotations: {}
  ## @param sfyManifestService.extraVolumes Extra volumes for the sfy manifest service
  extraVolumes: []
  ## @param sfyManifestService.extraVolumeMounts Extra volume mounts for the sfy manifest service
  extraVolumeMounts: []
  ## @param sfyManifestService.imagePullSecrets Image pull credentials for the sfy manifest service
  imagePullSecrets: []
  ## @param sfyManifestService.env [object] Environment variables for the sfy manifest service
  env:
    GIN_MODE: release
    PORT: "8080"
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    MLF_SERVER_URL: http://{{ .Release.Name }}-mlfoundry-server.{{ .Release.Namespace }}.svc.cluster.local:5000
    SFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    PROCESS_TICKER_PERIOD_SECONDS: "5"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    AUTH_SERVER_URL: https://auth.truefoundry.com
    HELM_SIZE_LIMIT_BYTES: "307200"
    ASYNC_PROCESSOR_SIDECAR_IMAGE: tfy.jfrog.io/tfy-images/async_processor:ba3072066ea158c3b759e8d5c974557b0cad795d
    TFY_MODEL_DOWNLOADER_IMAGE: tfy.jfrog.io/tfy-images/tfy-model-downloader:0.1.8
    TFY_NOTIFICATION_SENDER_IMAGE: tfy.jfrog.io/tfy-images/tfy-notification-sender:0.0.4
    APP_CATALOGUE_ENDPOINT: https://catalogue.truefoundry.com/templates/
    AUTOPILOT_PROCESSOR_ENABLED: "false"
    AUTOPILOT_PROCESSOR_NATS_URL: nats://{{ .Release.Name }}-tfy-nats.{{ .Release.Namespace }}.svc.cluster.local:4222
    AUTOPILOT_PROCESSOR_NATS_PULL_MAX_BYTES: "10485760"
    AUTOPILOT_PROCESSOR_NATS_ACK_WAIT: "120"
    AUTOPILOT_PROCESSOR_PUBLISH_ASYNC_MAX_PENDING: "100"
    AUTOPILOT_PROCESSOR_NUMBER_OF_WORKERS: "2"
    TFY_MANIFESTS_TEMPLATE_CHART_CONFIG: '{"repoType": "helm", "repoURL": "https://truefoundry.github.io/infra-charts/", "chart": "tfy-manifests-template", "targetRevision": "0.2.0" }'
    ADDITIONAL_KUSTOMIZE_PATCHES: ""
    POD_CUSTOMIZATIONS: '{"affinity": {},"nodeSelector": {},"tolerations": []}'
###################################################################################################################
######################################### NATS ####################################################################
###################################################################################################################
## @skip natsDeprecated Truefoundry NATS settings
natsDeprecated:
  nameOverride: nats
  enabled: false
  topologySpreadConstraints:
    - maxSkew: 1
      topologyKey: kubernetes.io/hostname
      whenUnsatisfiable: ScheduleAnyway
  nats:
    image:
      repository: tfy.jfrog.io/tfy-mirror/nats
      tag: 2.10.24-alpine3.21
    advertise: false
    imagePullSecrets: []
    jetstream:
      enabled: true
      memStorage:
        enabled: true
        size: 1Gi
      fileStorage:
        enabled: true
        storageDirectory: /data
        size: 10Gi
        accessModes:
          - ReadWriteOnce
    logging:
      debug: true
    resources:
      limits:
        cpu: 800m
        memory: 1024Mi
      requests:
        cpu: 400m
        memory: 512Mi
    limits:
      maxPayload: 4Mi
  natsbox:
    enabled: false
    image:
      repository: tfy.jfrog.io/tfy-mirror/natsio/nats-box
      tag: 0.13.2
    imagePullSecrets: []
    resources:
      limits:
        cpu: 50m
        memory: 512Ki
      requests:
        cpu: 25m
        memory: 256Ki
  exporter:
    enabled: true
    image:
      repository: tfy.jfrog.io/tfy-mirror/natsio/prometheus-nats-exporter
      tag: "0.15.0"
  reloader:
    enabled: true
    image:
      repository: tfy.jfrog.io/tfy-mirror/natsio/nats-server-config-reloader
      tag: "0.14.3"
  cluster:
    enabled: true
    replicas: 3
    noAdvertise: true
  websocket:
    enabled: true
    port: 8080
    noTLS: true
    sameOrigin: false
    allowedOrigins: []
  auth:
    enabled: true
    resolver:
      type: memory
      configMap:
        name: nats-accounts
        key: resolver.conf
###################################################################################################################
######################################### Tfy Build ###############################################################
###################################################################################################################
## @section tfyBuild Truefoundry tfy build settings
tfyBuild:
  ## @param tfyBuild.enabled Bool to enable the tfyBuild server
  enabled: true
  ## @param tfyBuild.annotations [object] Annotations for the tfyBuild server
  annotations: {}
  ## @param tfyBuild.labels [object] Labels for the tfyBuild server
  labels: {}
  ## @param tfyBuild.nameOverride Override name for the tfyBuild server
  nameOverride: ''
  ## @param tfyBuild.fullnameOverride Full name override for the tfyBuild server
  fullnameOverride: ''
  ## tfyBuild.serviceAccount Service account settings for the tfyBuild server
  serviceAccount:
    ## @param tfyBuild.serviceAccount.annotations Annotations for the tfyBuild server service account
    annotations: {}
    ## @param tfyBuild.serviceAccount.automountServiceAccountToken Automount service account token for the tfyBuild server
    automountServiceAccountToken: true
  ## tfyBuild.preemptibleDeployment Preemptible deployment settings for the tfyBuild server
  preemptibleDeployment:
    ## @param tfyBuild.preemptibleDeployment.enabled Bool to enable preemptible deployment for the tfyBuild server
    enabled: false
    ## @param tfyBuild.preemptibleDeployment.imagePullSecrets Image pull secrets for the preemptible deployment
    imagePullSecrets: []
    ## @param tfyBuild.preemptibleDeployment.affinity Affinity settings for the preemptible deployment
    affinity: {}
    ## @param tfyBuild.preemptibleDeployment.nodeSelector Node selector for the preemptible deployment
    nodeSelector: {}
    ## @param tfyBuild.preemptibleDeployment.tolerations Tolerations for the preemptible deployment
    tolerations: []
    ## @param tfyBuild.preemptibleDeployment.extraEnvs Extra environment variables for the tfyBuild server
    extraEnvs: []
    ## @param tfyBuild.preemptibleDeployment.extraVolumeMounts Extra volume mounts for the tfyBuild server
    extraVolumeMounts: []
    ## @param tfyBuild.preemptibleDeployment.extraVolumes Extra volumes for the tfyBuild server
    extraVolumes: []
  ## tfyBuild.truefoundryWorkflows Truefoundry workflows settings for the tfyBuild server
  truefoundryWorkflows:
    ## tfyBuild.truefoundryWorkflows.sfyBuilder Settings for the sfyBuilder
    sfyBuilder:
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.extraEnvs Extra environment variables for sfyBuilder
      extraEnvs: []
      ## tfyBuild.truefoundryWorkflows.sfyBuilder.image sfyBuilder Image
      image:
        ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.image.repository Repository for the sfyBuilder
        repository: tfy.jfrog.io/tfy-images/sfy-builder
        ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.image.tag Tag for the sfyBuilder
        tag: v0.8.13
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.imagePullSecrets Image pull secrets for the sfyBuilder
      ##
      imagePullSecrets: []
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.baseImagePullSecret baseImagePullSecret for the docker config
      baseImagePullSecret: "truefoundry-image-pull-secret"
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.script script for the sfyBuilder to be executed
      script: |
        # Code will be downloaded in the directory set by the SOURCE_CODE_DOWNLOAD_PATH environment variable
        download-code.sh
        registry-login.sh
        wait-for-builder.sh
        build-and-push.sh

        # This script will be executed only when all the above scripts are successfully executed. If any of the above scripts fail, this script will not be executed, and the build will be marked as failed.
        update-build.sh '{"status":"SUCCEEDED"}'
      ## tfyBuild.truefoundryWorkflows.sfyBuilder.resources Resource requests and limits for the sfyBuilder
      resources:
        ## tfyBuild.truefoundryWorkflows.sfyBuilder.resources.limits Resource limits for the sfyBuilder
        limits:
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.limits.cpu CPU limit for the sfyBuilder
          cpu: 1
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.limits.ephemeral-storage Ephemeral storage limit for the sfyBuilder
          ephemeral-storage: 20Gi
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.limits.memory Memory limit for the sfyBuilder
          memory: 2Gi
        ## tfyBuild.truefoundryWorkflows.sfyBuilder.resources.requests Resource requests for the sfyBuilder
        requests:
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.requests.cpu CPU request for the sfyBuilder
          cpu: 200m
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.requests.ephemeral-storage Ephemeral storage request for the sfyBuilder
          ephemeral-storage: 10Gi
          ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.resources.requests.memory Memory request for the sfyBuilder
          memory: 500Mi
      ## @param tfyBuild.truefoundryWorkflows.sfyBuilder.buildSecrets [array] Build secrets for the sfyBuilder
      buildSecrets: []
      # - id: pip.conf
      #   valueFrom:
      #     secretName: artifactory-pypi-creds
      #     secretKey: artifactory.conf
      ## @skip tfyBuild.truefoundryWorkflows.buildkitd Settings for the buildkitd
    buildkitd:
      image:
        repository: tfy.jfrog.io/tfy-images/tfy-buildkit
        tag: 0.1.2
      imagePullSecrets: []
      metadata:
        labels:
          app: buildkit
        annotations:
          cluster-autoscaler.kubernetes.io/safe-to-evict: 'false'
          karpenter.sh/do-not-disrupt: 'true'
          karpenter.sh/do-not-evict: 'true'
      resources:
        limits:
          cpu: 2
          ephemeral-storage: 70Gi
          memory: 8Gi
        requests:
          cpu: 2
          ephemeral-storage: 70Gi
          memory: 8Gi
      nodeSelector: {}
      extraVolumes: []
      extraVolumeMounts: []
      extraEnvs: []
      affinity: {}
      tolerations: []
    ## @param tfyBuild.truefoundryWorkflows.extraEnvs Extra environment variables for the tfyBuild server
    extraEnvs: []
    ## @param tfyBuild.truefoundryWorkflows.extraVolumeMounts Extra volume mounts for the tfyBuild server
    extraVolumeMounts: []
    ## @param tfyBuild.truefoundryWorkflows.extraVolumes Extra volumes for the tfyBuild server
    extraVolumes: []
    ## @param tfyBuild.truefoundryWorkflows.affinity Affinity settings for the tfyBuild server
    affinity: {}
    ## @param tfyBuild.truefoundryWorkflows.nodeSelector Node selector for the tfyBuild server
    nodeSelector: {}
    ##  tfyBuild.truefoundryWorkflows.logMarkers Log markers for the tfyBuild server
    logMarkers:
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.error Error log marker for the tfyBuild server
      error: \033[31m[Error]\033[0m
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.done Done log marker for the tfyBuild server
      done: \033[32m[Done]\033[0m
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.start Start log marker for the tfyBuild server
      start: \033[36m[Start]\033[0m
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.clientPrefix Client prefix for the tfyBuild server
      clientPrefix:
        - TFY-CLIENT
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.supportSlack Slack support URL for the tfyBuild server
      supportSlack: >-
        https://join.slack.com/t/truefoundry/shared_invite/zt-11ht512jq-nDJq~HJMqc6wBw90JVlo7g
      ## @param tfyBuild.truefoundryWorkflows.logMarkers.serviceFoundryUiUrl Service foundry UI URL
      serviceFoundryUiUrl: https://app.truefoundry.com/workspace
    ## tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush SOCI index build and push settings for the tfyBuild server
    sociIndexBuildAndPush:
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.enabled Bool to enable SOCI index build and push
      enabled: false
      ## tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.image Image for the SOCI index build and push
      image:
        ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.image.repository Repository for the SOCI index build and push
        repository: tfy.jfrog.io/tfy-images/sfy-builder
        ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.image.tag Tag for the SOCI index build and push
        tag: v0.8.13
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.imagePullSecrets Image pull secrets for the sociIndexBuildAndPush
      ##
      imagePullSecrets: []
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.imageSizeThresholdBytes Image size threshold for the SOCI index build and push
      imageSizeThresholdBytes: 419430400
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.extraEnvs Extra environment variables for the SOCI index build and push
      extraEnvs: []
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.extraVolumeMounts Extra volume mounts for the SOCI index build and push
      extraVolumeMounts: []
      ## @param tfyBuild.truefoundryWorkflows.sociIndexBuildAndPush.extraVolumes
      extraVolumes: []
  # If set, overrides global.automountServiceAccountToken for tfyBuild
  automountServiceAccountToken: true
###################################################################################################################
######################################## Tfy Buildkitd Service ####################################################
###################################################################################################################
## tfy-buildkitd-service Settings corresponding to the tfy-buildkitd service
tfy-buildkitd-service:
  ## @param tfy-buildkitd-service.enabled Bool to enable the tfy-buildkitd service
  enabled: true
  ## tfy-buildkitd-service.service Service settings for the tfy-buildkitd service
  service:
    ## @param tfy-buildkitd-service.service.port port number for the tfy-buildkitd service
    port: 1234
  ## tfy-buildkitd-service.image
  image:
    ## @param tfy-buildkitd-service.image.repository tfyBuildkitdService repository
    repository: tfy.jfrog.io/tfy-mirror/moby/buildkit
  ## @param tfy-buildkitd-service.replicaCount Number of replicas Value kept for future use, kept 1
  replicaCount: 1
  ## @skip tfy-buildkitd-service.podAnnotations Annotations for the tfy-buildkitd service pods
  podAnnotations:
    cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
    karpenter.sh/do-not-disrupt: 'true'
    karpenter.sh/do-not-evict: 'true'
  ## tfy-buildkitd-service.tls TLS settings for the tfy-buildkitd service
  tls:
    ## @param tfy-buildkitd-service.tls.enabled Enable TLS for the tfy-buildkitd service
    enabled: true
    ## @param tfy-buildkitd-service.tls.buildkitClientCertsSecretName Name of the secret containing the TLS certificate
    buildkitClientCertsSecretName: "tfy-buildkit-client-certs"
# To further configure the local postgres installation use the following section.
# During cleanup, make sure to remove any stray pvc that might be created.
## postgresql Settings corresponding to the postgresql database
postgresql:
  ## postgresql.auth PostgreSQL authentication configuration
  auth:
    ## @param postgresql.auth.existingSecret Name of the existing secret for PostgreSQL authentication
    existingSecret: "truefoundry-postgresql-auth-secret"
    ## @param postgresql.auth.database Name of the database for PostgreSQL
    database: "truefoundry"
  ## postgresql.image Image for PostgreSQL
  image:
    ## @param postgresql.image.registry
    registry: tfy.jfrog.io/tfy-mirror
    ## @param postgresql.image.repository
    repository: bitnami/postgresql
    ## @param postgresql.image.tag
    tag: 16.2.0-debian-12-r12
  ## postgresql.primary Primary PostgreSQL settings
  primary:
    ## @skip postgresql.primary.tolerations Tolerations for the primary PostgreSQL pod
    tolerations:
      - key: class.truefoundry.io/control-plane
        effect: NoSchedule
        operator: Exists
      - key: "cloud.google.com/gke-spot"
        value: "true"
        effect: NoSchedule
        operator: Equal
      - key: kubernetes.azure.com/scalesetpriority
        value: spot
        effect: NoSchedule
        operator: Equal
###################################################################################################################
######################################## Tfy Controller ###########################################################
###################################################################################################################
## @section tfyController Truefoundry tfy controller settings
tfyController:
  ## @param tfyController.enabled Bool to enable the tfyController
  enabled: true
  ## @skip tfyController.tolerations Tolerations specific to the tfyController
  tolerations: {}
  ## @param tfyController.annotations Annotations for the tfyController
  annotations: {}
  ## tfyController.image Image for the tfyController
  image:
    ## @param tfyController.image.repository Image repository for the tfyController
    repository: tfy.jfrog.io/tfy-private-images/tfy-controller
    ## @param tfyController.image.tag Image tag for the tfyController
    tag: v0.56.0
  ## @param tfyController.environmentName Environment name for the tfyController
  environmentName: default
  ## @param tfyController.envSecretName Secret name for the tfyController environment variables
  envSecretName: sfy-manifest-service-env-secret
  ## @param tfyController.imagePullPolicy Image pull policy for the tfyController
  imagePullPolicy: IfNotPresent
  ## @param tfyController.nameOverride Override name for the tfyController
  nameOverride: ''
  ## @param tfyController.fullnameOverride Full name override for the tfyController
  fullnameOverride: ''
  ## @param tfyController.podAnnotations [object]Annotations for the tfyController pods
  podAnnotations:
    karpenter.sh/do-not-disrupt: "true"
    cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
  ## @param tfyController.podSecurityContext Security context for the tfyController pods
  podSecurityContext: {}
  ## @param tfyController.commonLabels Common labels for the tfyController pods
  commonLabels: {}
  ## @param tfyController.securityContext Security context for the tfyController
  securityContext: {}
  ## @param tfyController.imagePullSecrets Image pull secrets for the tfycontroller
  ##
  imagePullSecrets: []
  ## tfyController.serviceMonitor ServiceMonitor settings for the tfyController
  serviceMonitor:
    ## @param tfyController.serviceMonitor.enabled Enable ServiceMonitor for the tfyController
    enabled: true
    ## @param tfyController.serviceMonitor.additionalLabels Additional labels for the ServiceMonitor
    additionalLabels: {}
    ## @param tfyController.serviceMonitor.additionalAnnotations Additional annotations for the ServiceMonitor
    additionalAnnotations: {}
  ## @param tfyController.resources [object] Resource requests and limits for the tfyController
  resources: {}
  # resources:
  #   limits:
  #     cpu: 400m
  #     memory: 1024Mi
  #     ephemeral-storage: 256Mi
  #   requests:
  #     cpu: 200m
  #     memory: 512Mi
  #     ephemeral-storage: 128Mi
  ## tfyController.livenessProbe Liveness probe settings for the tfyController
  livenessProbe:
    ## @param tfyController.livenessProbe.failureThreshold Liveness probe failure threshold for tfyController
    failureThreshold: 3
    ## @param tfyController.livenessProbe.initialDelaySeconds Liveness probe initial delay for tfyController
    initialDelaySeconds: 600
    ## @param tfyController.livenessProbe.periodSeconds Liveness probe period for the tfyController
    periodSeconds: 10
    ## @param tfyController.livenessProbe.successThreshold Liveness probe success threshold for tfyController
    successThreshold: 1
    ## @param tfyController.livenessProbe.timeoutSeconds Liveness probe timeout for tfyController
    timeoutSeconds: 1
  ## tfyController.readinessProbe Readiness probe settings for the tfyController
  readinessProbe:
    ## @param tfyController.readinessProbe.failureThreshold Readiness probe failure threshold for tfyController
    failureThreshold: 3
    ## @param tfyController.readinessProbe.initialDelaySeconds Readiness probe initial delay for tfyController
    initialDelaySeconds: 30
    ## @param tfyController.readinessProbe.periodSeconds Readiness probe period for tfyController
    periodSeconds: 10
    ## @param tfyController.readinessProbe.successThreshold Readiness probe success threshold for tfyController
    successThreshold: 1
    ## @param tfyController.readinessProbe.timeoutSeconds Readiness probe timeout for tfyController
    timeoutSeconds: 1
  ## @param tfyController.nodeSelector Node selector for the tfyController
  nodeSelector: {}
  ## @param tfyController.affinity Affinity settings for the tfyController
  affinity: {}
  ## @param tfyController.topologySpreadConstraints Topology spread constraints for the tfyController
  topologySpreadConstraints: {}
  ## tfyController.service Service settings for the tfyController
  service:
    ## @param tfyController.service.type Service type for the tfyController
    type: ClusterIP
    ## @param tfyController.service.port Service port for the tfyController
    port: 8123
    ## @param tfyController.service.annotations Annotations for the tfyController service
    annotations: {}
  ## tfyController.serviceAccount Service account settings for the tfyController
  serviceAccount:
    ## @param tfyController.serviceAccount.annotations Annotations for the tfyController service account
    annotations: {}
  ## @param tfyController.env [object] Environment variables for the tfyController
  env:
    GIN_MODE: release
    SFY_SERVER_URL: http://{{ .Release.Name }}-servicefoundry-server.{{ .Release.Namespace }}.svc.cluster.local:3000
    SFY_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    SFY_MANIFEST_SERVER_URL: http://{{ .Release.Name }}-sfy-manifest-service.{{ .Release.Namespace }}.svc.cluster.local:8080
    PROXY_SERVER_PORT: "{{ .Values.tfyController.service.port }}"
    PROXY_SERVER_ENABLED: "true"
    DEPLOYMENT_CONTROLLER_ENABLED: "true"
    JOB_RUNS_CONTROLLER_ENABLED: "true"
    SENTRY_ENABLED: "true"
    MIGRATION_CONTROLLER_ENABLED: "false"
    MIGRATION_CONTROLLER_INTERVAL_MINUTES: "60"
    MIGRATION_CONTROLLER_APPLICATION_HEALTH_CHECK_TIMEOUT_MINUTES: "5"
    MIGRATION_CONTROLLER_APPLICATION_HEALTH_CHECK_INTERVAL_SECONDS: "20"
    TENANT_NAME: "{{ .Values.global.tenantName }}"
    AUTH_SERVER_URL: https://auth.truefoundry.com
    TFY_AGENT_STATE_BUFFER_PROCESSOR_ENABLED: "true"
    TFY_AGENT_STATE_BUFFER_PROCESSOR_NATS_URL: nats://{{ .Release.Name }}-tfy-nats.{{ .Release.Namespace }}.svc.cluster.local:4222
  # If set, overrides global.automountServiceAccountToken for tfyController
  automountServiceAccountToken: true
###################################################################################################################
######################################## Tfy Workflow Admin #######################################################
###################################################################################################################
## @section tfyWorkflowAdmin Truefoundry tfy workflow admin settings
tfyWorkflowAdmin:
  ## @param tfyWorkflowAdmin.enabled Bool to enable the tfyWorkflowAdmin
  enabled: false
  ## @skip tfyWorkflowAdmin.tolerations Tolerations specific to the tfyWorkflowAdmin
  tolerations: {}
  ## @param tfyWorkflowAdmin.annotations Annotations for the tfyWorkflowAdmin
  annotations: {}
  ## tfyWorkflowAdmin.image Image for the tfyWorkflowAdmin
  image:
    ## @param tfyWorkflowAdmin.image.repository Image repository for the tfyWorkflowAdmin
    repository: tfy.jfrog.io/tfy-private-images/tfy-workflow-admin
    ## @param tfyWorkflowAdmin.image.tag Image tag for the tfyWorkflowAdmin
    tag: v0.55.0
  ## @skip tfyWorkflowAdmin.replicaCount Number of replicas for the tfyWorkflowAdmin
  # replicaCount: 1
  ## @param tfyWorkflowAdmin.environmentName Environment name for the tfyWorkflowAdmin
  environmentName: default
  ## @param tfyWorkflowAdmin.envSecretName Secret name for the tfyWorkflowAdmin environment variables
  envSecretName: tfy-workflow-admin-env-secret
  ## @param tfyWorkflowAdmin.imagePullPolicy Image pull policy for the tfyWorkflowAdmin
  imagePullPolicy: IfNotPresent
  ## @param tfyWorkflowAdmin.nameOverride Override name for the tfyWorkflowAdmin
  nameOverride: ''
  ## @param tfyWorkflowAdmin.fullnameOverride Full name override for the tfyWorkflowAdmin
  fullnameOverride: ''
  ## @param tfyWorkflowAdmin.podAnnotations Annotations for the tfyWorkflowAdmin pods
  podAnnotations: {}
  ## @param tfyWorkflowAdmin.podSecurityContext Security context for the tfyWorkflowAdmin pods
  podSecurityContext: {}
  ## @param tfyWorkflowAdmin.commonLabels Common labels for the tfyWorkflowAdmin pods
  commonLabels: {}
  ## @param tfyWorkflowAdmin.securityContext Security context for the tfyWorkflowAdmin
  securityContext: {}
  ## @param tfyWorkflowAdmin.imagePullSecrets Image pull secrets for the tfycontroller
  ##
  imagePullSecrets: []
  ## @param tfyWorkflowAdmin.resources [object] Resource requests and limits for the tfyWorkflowAdmin
  resources: {}
  # resources:
  #   limits:
  #     cpu: 100m
  #     memory: 256Mi
  #     ephemeral-storage: 256Mi
  #   requests:
  #     cpu: 50m
  #     memory: 256Mi
  #     ephemeral-storage: 128Mi
  ## tfyWorkflowAdmin.livenessProbe Liveness probe settings for the tfyWorkflowAdmin
  livenessProbe:
    ## @param tfyWorkflowAdmin.livenessProbe.failureThreshold Liveness probe failure threshold for tfyWorkflowAdmin
    failureThreshold: 3
    ## @param tfyWorkflowAdmin.livenessProbe.initialDelaySeconds Liveness probe initial delay for tfyWorkflowAdmin
    initialDelaySeconds: 600
    ## @param tfyWorkflowAdmin.livenessProbe.periodSeconds Liveness probe period for the tfyWorkflowAdmin
    periodSeconds: 10
    ## @param tfyWorkflowAdmin.livenessProbe.successThreshold Liveness probe success threshold for tfyWorkflowAdmin
    successThreshold: 1
    ## @param tfyWorkflowAdmin.livenessProbe.timeoutSeconds Liveness probe timeout for tfyWorkflowAdmin
    timeoutSeconds: 1
  ## tfyWorkflowAdmin.readinessProbe Readiness probe settings for the tfyWorkflowAdmin
  readinessProbe:
    ## @param tfyWorkflowAdmin.readinessProbe.failureThreshold Readiness probe failure threshold for tfyWorkflowAdmin
    failureThreshold: 3
    ## @param tfyWorkflowAdmin.readinessProbe.initialDelaySeconds Readiness probe initial delay for tfyWorkflowAdmin
    initialDelaySeconds: 30
    ## @param tfyWorkflowAdmin.readinessProbe.periodSeconds Readiness probe period for the tfyWorkflowAdmin
    periodSeconds: 10
    ## @param tfyWorkflowAdmin.readinessProbe.successThreshold Readiness probe success threshold for tfyWorkflowAdmin
    successThreshold: 1
    ## @param tfyWorkflowAdmin.readinessProbe.timeoutSeconds Readiness probe timeout for tfyWorkflowAdmin
    timeoutSeconds: 1
  ## @param tfyWorkflowAdmin.nodeSelector Node selector for the tfyWorkflowAdmin
  nodeSelector: {}
  ## @param tfyWorkflowAdmin.affinity Affinity settings for the tfyWorkflowAdmin
  affinity: {}
  ## @param tfyWorkflowAdmin.topologySpreadConstraints Topology spread constraints for the tfyWorkflowAdmin
  topologySpreadConstraints: {}
  ## tfyWorkflowAdmin.service Service settings for the tfyWorkflowAdmin
  service:
    ## @param tfyWorkflowAdmin.service.type Service type for the tfyWorkflowAdmin
    type: ClusterIP
    ## @param tfyWorkflowAdmin.service.port Service port for the tfyWorkflowAdmin
    port: 8089
    ## @param tfyWorkflowAdmin.service.annotations Annotations for the tfyWorkflowAdmin service
    annotations: {}
  ## tfyWorkflowAdmin.serviceAccount Service account settings for the tfyWorkflowAdmin
  serviceAccount:
    ## @param tfyWorkflowAdmin.serviceAccount.annotations Annotations for the tfyWorkflowAdmin service account
    annotations: {}
  ## @param tfyWorkflowAdmin.storage Storage settings for the tfyWorkflowAdmin
  storage: {}
  ## For AWS uncomment this section
  ## type: s3
  ## limits:
  ##   maxDownloadMBs: 2
  ## bucketName: <BUCKET_NAME>
  ## container: <BUCKET_NAME>/tfy-workflow-admin
  ## connection:
  ##   region: <AWS_REGION>
  ##   auth-type: iam
  ## enable-multicontainer: true

  ## For GCP uncomment this section
  ## gcs:
  ##   projectId: <GCP_PROJECT_ID>
  ## type: gcs
  ## limits:
  ##   maxDownloadMBs: 2
  ## bucketName: <GCS_BUCKET_NAME>
  ## container: <GCS_BUCKET_NAME>/tfy-workflow-admin

  ## For Azure uncomment this section
  ## stow:
  ##   kind: azure
  ##   config:
  ##     key: <STORAGE_ACCOUNT_KEY>
  ##     account: <STORAGE_ACCOUNT_NAME>
  ## type: stow
  ## container: <AZURE_STORAGE_CONTAINER_NAME>/tfy-workflow-admin
  ## connection: {}
  ## enable-multicontainer: true
  ## limits:
  ##   maxDownloadMBs: 2
  ## @param tfyWorkflowAdmin.env [object] Environment variables for the tfyWorkflowAdmin
  env:
    DB_NAME: ${k8s-secret/truefoundry-creds/DB_NAME}
    DB_USERNAME: ${k8s-secret/truefoundry-creds/DB_USERNAME}
    DB_PASSWORD: ${k8s-secret/truefoundry-creds/DB_PASSWORD}
    DB_HOST: ${k8s-secret/truefoundry-creds/DB_HOST}
    DB_PORT: "5432"
    DB_POSTGRES_SCHEMA: tfy_flyteadmin
    SVC_FOUNDRY_SERVICE_API_KEY: ${k8s-secret/truefoundry-creds/TFY_API_KEY}
    SVC_FOUNDRY_SERVICE_API_KEY_PATH: /etc/secrets/admin_api_key
    ADMIN_CONFIG_FILE_PATH: /etc/config/flyteadmin-config.yaml
    SCHEDULER_CONFIG_FILE_PATH: /etc/config/flytescheduler-config.yaml
    CONTROL_PLANE_URL: "{{ .Values.global.controlPlaneURL }}"
  # If set, overrides global.automountServiceAccountToken for tfyWorkflowAdmin
  automountServiceAccountToken: true
###################################################################################################################
################################################# Tfy Nats  #######################################################
###################################################################################################################
## @section tfyNats Truefoundry NATS settings
tfyNats:
  ## @param tfyNats.nameOverride Override name for NATS server
  nameOverride: tfy-nats
  ## @param tfyNats.enabled Bool to enable the NATS server
  enabled: true
  ## tfyNats.config NATS server configuration
  config:
    ## @skip tfyNats.config.merge Configuration to merge
    merge:
      00$include: accounts/resolver.conf
    ## tfyNats.config.cluster Cluster configuration
    cluster:
      ## @param tfyNats.config.cluster.enabled Bool to enable clustering
      enabled: true
      ## @param tfyNats.config.cluster.replicas Number of replicas in cluster
      replicas: 3
    ## @param tfyNats.config.advertise Bool to enable NATS server advertise
    advertise: false
    ## tfyNats.config.jetstream Jetstream configuration
    jetstream:
      ## @param tfyNats.config.jetstream.enabled Bool to enable Jetstream
      enabled: true
      ## tfyNats.config.jetstream.fileStore File storage configuration
      fileStore:
        ## @param tfyNats.config.jetstream.fileStore.dir Storage directory path
        dir: /data
        ## tfyNats.config.jetstream.fileStore.pvc PVC configuration
        pvc:
          ## @param tfyNats.config.jetstream.fileStore.pvc.size PVC storage size
          size: 10Gi
          ## @param tfyNats.config.jetstream.fileStore.pvc.enabled Bool to enable PVC
          enabled: true
        ## @param tfyNats.config.jetstream.fileStore.enabled Bool to enable file storage
        enabled: true
        ## @param tfyNats.config.jetstream.fileStore.maxSize Maximum file storage size
        maxSize: 9Gi
      ## tfyNats.config.jetstream.memoryStore Memory storage configuration
      memoryStore:
        ## @param tfyNats.config.jetstream.memoryStore.size Memory storage size
        size: 1Gi
        ## @param tfyNats.config.jetstream.memoryStore.enabled Bool to enable memory storage
        enabled: true
    ## tfyNats.config.websocket Websocket configuration
    websocket:
      ## @param tfyNats.config.websocket.port Websocket port
      port: 8080
      ## @param tfyNats.config.websocket.enabled Bool to enable websocket
      enabled: true
  ## tfyNats.natsBox NATS Box configuration
  natsBox:
    ## @param tfyNats.natsBox.enabled Bool to enable NATS Box
    enabled: false
    ## tfyNats.serviceAccount Service account settings for the tfyNats
    serviceAccount:
      ## @param tfyNats.serviceAccount.create Bool to create the service account
      create: false
      ## @param tfyNats.serviceAccount.annotations Annotations for the service account
      annotations: {}
      ## @param tfyNats.serviceAccount.name Name of the service account
      name: "tfy-natsbox"
  ## tfyNats.reloader Config reloader configuration
  reloader:
    ## tfyNats.reloader.image Reloader image configuration
    image:
      ## @param tfyNats.reloader.image.repository Reloader image repository
      repository: tfy.jfrog.io/tfy-mirror/natsio/nats-server-config-reloader
      ## @param tfyNats.reloader.image.tag Reloader image tag
      tag: "0.14.3"
    ## @param tfyNats.reloader.enabled Bool to enable config reloader
    enabled: true
  ## tfyNats.promExporter Prometheus exporter configuration
  promExporter:
    ## tfyNats.promExporter.image Exporter image configuration
    image:
      ## @param tfyNats.promExporter.image.repository Exporter image repository
      repository: tfy.jfrog.io/tfy-mirror/natsio/prometheus-nats-exporter
      ## @param tfyNats.promExporter.image.tag Exporter image tag
      tag: "0.15.0"
    ## @param tfyNats.promExporter.enabled Bool to enable Prometheus exporter
    enabled: true
    ## @param tfyNats.promExporter.podMonitor.enabled Bool to enable pod monitor
    podMonitor:
      enabled: true
      ## @param tfyNats.promExporter.podMonitor.merge [object] Additional kustomize patches for the pod monitor
      merge:
        metadata:
          labels:
            release: prometheus
  ## tfyNats.container Container configuration
  container:
    ## tfyNats.container.image Container image configuration
    image:
      ## @param tfyNats.container.image.tag Container image tag
      tag: 2.10.24-alpine3.21
      ## @param tfyNats.container.image.repository Container image repository
      repository: tfy.jfrog.io/tfy-mirror/nats
    ## @skip tfyNats.container.patch Container patches
    patch:
      - op: add
        path: /volumeMounts/-
        value:
          name: resolver-volume
          mountPath: /etc/nats-config/accounts
      - op: add
        path: /resources
        value:
          limits:
            cpu: 400m
            memory: 1024Mi
          requests:
            cpu: 200m
            memory: 512Mi
  ## skip tfyNats.podTemplate Pod template configuration
  podTemplate:
    ## @skip tfyNats.podTemplate.patch Pod template patches
    patch:
      - op: add
        path: /spec/volumes/-
        value:
          name: resolver-volume
          configMap:
            name: tfy-nats-accounts
            defaultMode: 420
      - op: add
        path: /spec/imagePullSecrets
        value: []
      - op: add
        path: /spec/tolerations
        value: []
      - op: add
        path: /spec/affinity
        value: {}
      - op: add
        path: /spec/nodeSelector
        value: {}
    ## @skip tfyNats.podTemplate.topologySpreadConstraints Topology spread constraints for NATS server
    topologySpreadConstraints:
      - maxSkew: 1
        topologyKey: kubernetes.io/hostname
        whenUnsatisfiable: ScheduleAnyway
  serviceAccount:
    # Specifies whether a service account should be created
    create: true
    # Annotations to add to the service account
    annotations: {}
    # The name of the service account to use.
    # If not set and create is true, a name is generated using the fullname template
    name: "tfy-nats"
  # If set, overrides global.automountServiceAccountToken for tfyNats
  automountServiceAccountToken: false
