project: tfy-apps
source:
  repoURL: tfy.jfrog.io/tfy-helm
  targetRevision: 0.80.0
  helm:
    values: |-
      global:
        tenantName: vedantaz
        controlPlaneURL: https://tfy-vedant-rds-upgrade.devtest.truefoundry.tech
        truefoundryImagePullConfigJSON: eyJhdXRocyI6eyJ0ZnkuamZyb2cuaW8iOnsidXNlcm5hbWUiOiJ0cnVlZm91bmRyeS1wcml2YXRlLXJlYWQtdXNlciIsInBhc3N3b3JkIjoiZXlKMlpYSWlPaUl5SWl3aWRIbHdJam9pU2xkVUlpd2lZV3huSWpvaVVsTXlOVFlpTENKcmFXUWlPaUpUVDJ0TmRsUnRaSEJ2Y0dWa1RGWjBZbVl4TjI5RkxUWmplbk41ZFZkSVUydDZVMnhzTUVSU2RIaHZJbjAuZXlKemRXSWlPaUpxWm1GalFEQXhhamQ2Y25NMlkzaG9Zak55TUdOalkzQXhkM013WXpWNEwzVnpaWEp6TDNSeWRXVm1iM1Z1WkhKNUxYQnlhWFpoZEdVdGNtVmhaQzExYzJWeUlpd2ljMk53SWpvaVlYQndiR2xsWkMxd1pYSnRhWE56YVc5dWN5OTFjMlZ5SWl3aVlYVmtJam9pS2tBcUlpd2lhWE56SWpvaWFtWm1aVUF3TVdvM2VuSnpObU40YUdJemNqQmpZMk53TVhkek1HTTFlQ0lzSW1saGRDSTZNVGN5T0RJNE1EY3lOU3dpYW5ScElqb2lPRE15WVdVMFlXVXRaV1U1WkMwME1HSTFMVGxsWmpVdFkyUXpaVGN4WVdGbVpEYzFJbjAuZ3puWGVkNkhPaDFfYW9BSGRCM0s2ZUtjLURRTWFwWTJUM05UNmk3TnBqVDFUYk1jSFdORjltYXBvaHl1cmU0NGZxZ0hfUFdPT3NLSDVBNnpJZFJSdEQ5RXdibFpUZV9ZdFJrS3RRUzUtOFBTZm9YLW9ZNjNRaE50d2M5S3FnVWI5SGxLYnZzcG9EbDVLM3lQU183enBGb0JmYy1CNHZZNTQ0bkR2cEduQjRvS25RcjB1dnk1RkY5MmFaNHA0UDFNVThrZFRzdVlCQjlRaDZiZndic1Z5cWQta2lnSk5XVHVrNkRrU2tsakxsbUtVdHNtb2E0SUtJUlBUQlcxM2JVR3ZnR0piU0paZ0JhclNUbUpnc3pBS1FJTDl5MGY1bmMzT1lLNzFWM1N2SUYxcjZkZjM0bzFPQlJkNVJYWVlLS0lDMU5mcTl2UDBIazJPLWV2NTViUU5RIiwiYXV0aCI6ImRISjFaV1p2ZFc1a2Nua3RjSEpwZG1GMFpTMXlaV0ZrTFhWelpYSTZaWGxLTWxwWVNXbFBhVWw1U1dsM2FXUkliSGRKYW05cFUyeGtWVWxwZDJsWlYzaHVTV3B2YVZWc1RYbE9WRmxwVEVOS2NtRlhVV2xQYVVwVVZESjBUbVJzVW5SYVNFSjJZMGRXYTFSR1dqQlpiVmw0VGpJNVJreFVXbXBsYms0MVpGWmtTVlV5ZERaVk1uaHpUVVZTVTJSSWFIWkpiakF1WlhsS2VtUlhTV2xQYVVweFdtMUdhbEZFUVhoaGFtUTJZMjVOTWxremFHOVphazU1VFVkT2Fsa3pRWGhrTTAxM1dYcFdORXd6Vm5wYVdFcDZURE5TZVdSWFZtMWlNMVoxV2toS05VeFlRbmxoV0Zwb1pFZFZkR050Vm1oYVF6RXhZekpXZVVscGQybGpNazUzU1dwdmFWbFlRbmRpUjJ4c1drTXhkMXBZU25SaFdFNTZZVmM1ZFdONU9URmpNbFo1U1dsM2FWbFlWbXRKYW05cFMydEJjVWxwZDJsaFdFNTZTV3B2YVdGdFdtMWFWVUYzVFZkdk0yVnVTbnBPYlU0MFlVZEplbU5xUW1wWk1rNTNUVmhrZWsxSFRURmxRMGx6U1cxc2FHUkRTVFpOVkdONVQwUkpORTFFWTNsT1UzZHBZVzVTY0VscWIybFBSRTE1V1ZkVk1GbFhWWFJhVjFVMVdrTXdNRTFIU1RGTVZHeHNXbXBWZEZreVVYcGFWR040V1ZkR2JWcEVZekZKYmpBdVozcHVXR1ZrTmtoUGFERmZZVzlCU0dSQ00wczJaVXRqTFVSUlRXRndXVEpVTTA1VU5tazNUbkJxVkRGVVlrMWpTRmRPUmpsdFlYQnZhSGwxY21VME5HWnhaMGhmVUZkUFQzTkxTRFZCTm5wSlpGSlNkRVE1UlhkaWJGcFVaVjlaZEZKclMzUlJVelV0T0ZCVFptOVlMVzlaTmpOUmFFNTBkMk01UzNGblZXSTVTR3hMWW5aemNHOUViRFZMTTNsUVUxODNlbkJHYjBKbVl5MUNOSFpaTlRRMGJrUjJjRWR1UWpSdlMyNVJjakIxZG5rMVJrWTVNbUZhTkhBMFVERk5WVGhyWkZSemRWbENRamxSYURaaVpuZGljMVo1Y1dRdGEybG5TazVYVkhWck5rUnJVMnRzYWt4c2JVdFZkSE50YjJFMFNVdEpVbEJVUWxjeE0ySlZSM1puUjBwaVUwcGFaMEpoY2xOVWJVcG5jM3BCUzFGSlREbDVNR1kxYm1NelQxbExOekZXTTFOMlNVWXhjalprWmpNMGJ6RlBRbEprTlZKWVdWbExTMGxETVU1bWNUbDJVREJJYXpKUExXVjJOVFZpVVU1UiJ9fX0=
        tfyApiKey: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImlKQm4tTW04c1BMdHRhbzlLSEFxeDJpUjIyayJ9.eyJleHAiOjM3MjUyOTMyODksImlhdCI6MTcyNTI5MzI4OSwic3ViIjoiMTRkZDBlOTgtMjFmYS00MDYzLWE5YmItM2FmMzhkZTVjN2M3IiwianRpIjoiMDk2MmUyMTMtYzIzZi00YWYzLTllMjQtZjZiM2UyOTRmMTkyIiwidXNlcm5hbWUiOiJzZnktdXNlciIsInVzZXJUeXBlIjoidXNlciIsInRlbmFudE5hbWUiOiJ2ZWRhbnRheiIsInJvbGVzIjpbInRlbmFudC1zZnktYWRtaW4iXSwiYXBwbGljYXRpb25JZCI6Ijc2NjU2NDYxLTZlNzQtNjE3YS0zYTY2LTM4MzczNDYyMzgzOSIsInByZWZlcnJlZF91c2VybmFtZSI6InNmeS11c2VyIiwiZW1haWxfdmVyaWZpZWQiOnRydWV9.A0aPrJgfaeL5FmVnt8EsUCxKG6BFs1uqYbtFX2jDUDRosyTi8UQifvK6ohtAGkHHGWUAkwZVwfdlzb6-n5HEOG5cXH2Jdea_CF-L6_ZkAfhf-sOcB3IdRoFDimcWLoD4WWxpTXeCJ742RTG-uVK_iujEIgsyu9OBrtIbNcqfDOege2FGeGGcylY6hb7x6PrOD6DtE-JhcUzsnhe1qVf8VHQJJ8IDjzCX4jQzsweaHz3KWZxcRkppQclPdGVzlAD-W3gIjbLUbdvmPAqK9VJ1o9SuuAHNN0BvStUO5C4L-skmExn6CJdspbjlbZ3CZ9GtiIEkc_DCSwMbDZ40B7Nf8g
        database:
          host: tfy-vedant-rds-upgrade-db20250825163002275300000017.ckkm94ke4drl.us-east-1.rds.amazonaws.com
          name: ctl
          username: root
          password: Truefoundry123
        tolerations:
          - effect: NoSchedule
            key: class.truefoundry.com/component
            value: control-plane
        affinity:
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
              - matchExpressions:
                - key: class.truefoundry.com/component
                  operator: In
                  values:
                  - control-plane
        serviceAccount:
          annotations:
            eks.amazonaws.com/role-arn: arn:aws:iam::526077812922:role/tfy-vedant-rds-upgrade-truefoundry-deps
        config:
          defaultCloudProvider: aws
          storageConfiguration:
            awsAssumeRoleArn: ""
            awsRegion: us-east-1
            awsS3BucketName: tfy-vedant-rds-upgrade-truefoundry2025082516295569550000000b

      devMode:
        enabled: false
      truefoundryBootstrap:
        enabled: true

      truefoundryFrontendApp:
        istio:
          virtualservice:
            enabled: true
            hosts:
            - "tfy-vedant-rds-upgrade.devtest.truefoundry.tech"
            gateways:
            - "istio-system/tfy-wildcard"

      tfyNats:
        podTemplate:
          patch:
            - op: add
              path: /spec/volumes/-
              value:
                name: resolver-volume
                configMap:
                  name: tfy-nats-accounts
                  defaultMode: 420
            - op: add
              path: /spec/imagePullSecrets
              value: []
            - op: add
              path: /spec/tolerations
              value:
                - effect: NoSchedule
                  key: class.truefoundry.com/component
                  value: control-plane
            - op: add
              path: /spec/affinity
              value:
                nodeAffinity:
                  requiredDuringSchedulingIgnoredDuringExecution:
                    nodeSelectorTerms:
                    - matchExpressions:
                      - key: class.truefoundry.com/component
                        operator: In
                        values:
                        - control-plane
            - op: add
              path: /spec/nodeSelector
              value: {}
      tfy-buildkitd-service:
        tolerations:
          - effect: NoSchedule
            key: class.truefoundry.com/component
            value: control-plane
        affinity:
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
              - matchExpressions:
                - key: class.truefoundry.com/component
                  operator: In
                  values:
                  - control-plane
      s3proxy:
        enabled: false
      sparkHistoryServer:
        enabled: false
      tfyWorkflowAdmin:
        enabled: false
      tfy-llm-gateway:
        tolerations:
          - effect: NoSchedule
            key: class.truefoundry.com/component
            value: control-plane
        affinity:
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
              - matchExpressions:
                - key: class.truefoundry.com/component
                  operator: In
                  values:
                  - control-plane
      tfy-otel-collector:
        tolerations:
          - effect: NoSchedule
            key: class.truefoundry.com/component
            value: control-plane
        affinity:
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
              - matchExpressions:
                - key: class.truefoundry.com/component
                  operator: In
                  values:
                  - control-plane
      tfy-clickhouse:
        clickhouse:
          tolerations:
            - effect: NoSchedule
              key: class.truefoundry.com/component
              value: control-plane
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                - matchExpressions:
                  - key: class.truefoundry.com/component
                    operator: In
                    values:
                    - control-plane
        altinity-clickhouse-operator:
          tolerations:
            - effect: NoSchedule
              key: class.truefoundry.com/component
              value: control-plane
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                - matchExpressions:
                  - key: class.truefoundry.com/component
                    operator: In
                    values:
                    - control-plane
        zookeeper:
          tolerations:
            - effect: NoSchedule
              key: class.truefoundry.com/component
              value: control-plane
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                - matchExpressions:
                  - key: class.truefoundry.com/component
                    operator: In
                    values:
                    - control-plane
  chart: truefoundry
destination:
  server: https://kubernetes.default.svc
  namespace: truefoundry
syncPolicy:
  automated: {}
  syncOptions:
    - CreateNamespace=true
    - ServerSideApply=true
