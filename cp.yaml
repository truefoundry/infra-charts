## Control Plane Values
## Version - 0.78.0
global:
  existingTruefoundryCredsSecret: truefoundry-creds
  resourceTier: small
  tenantName: mastercard
  controlPlaneURL: https://tfycp.app.tenant-35.stage.mastercard-uscentral-tst-az1.mks.cloud.zlocal
  serviceAccount:
    automountServiceAccountToken: false
  image:
    registry: "artifacts.mastercard.int/mcr-internal-stable/mastercard"
tags:
  llmGateway: true
  llmGatewayRequestLogging: true
devMode:
  enabled: true
postgresql:
  image:
    registry: artifacts.mastercard.int/mcr-internal-stable/mastercard
truefoundryFrontendApp:
  serviceAccount:
    automountServiceAccountToken: false
  securityContext:
    readOnlyRootFilesystem: true
  ingress:
    enabled: true
    annotations:
      nginx.ingress.kubernetes.io/cors-allow-origin: "*"
      nginx.ingress.kubernetes.io/enable-cors: "true"
      nginx.ingress.kubernetes.io/hsts: "true"
      nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
      nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
    ingressClassName: nginx
    tls:
      - hosts:
          - tfycp.app.tenant-35.stage.mastercard-uscentral-tst-az1.mks.cloud.zlocal
        secretName: truefoundry-ep-cert
    hosts:
      - tfycp.app.tenant-35.stage.mastercard-uscentral-tst-az1.mks.cloud.zlocal
servicefoundryServer:
  serviceAccount:
    automountServiceAccountToken: false
  securityContext:
    readOnlyRootFilesystem: true
  env:
    INTERNAL_JWT_JWKS: ${k8s-secret/truefoundry-creds/INTERNAL_JWT_JWKS}
    OAUTH_PROVIDER_TYPE: INITIAL_ADMIN
    INTERNAL_JWT_SERVICE_ENABLED: true
    INITIAL_ADMIN_OAUTH_USER_PASSWORD: ${k8s-secret/truefoundry-creds/INITIAL_ADMIN_OAUTH_USER_PASSWORD}
    INITIAL_ADMIN_OAUTH_ACCESS_TOKEN_EXPIRY_SECONDS: 72000
    INCLUDE_TRUEFOUNDRY_MANAGED_JWKS: false
    FE_LLM_GATEWAY_URL: "https://tfygw.app.tenant-35.stage.mastercard-uscentral-tst-az1.mks.cloud.zlocal/api/llm"
tfyK8sController:
  serviceAccount:
    automountServiceAccountToken: false
  securityContext:
    readOnlyRootFilesystem: true
tfy-llm-gateway:
  # enabled: false
  autoscaling:
    enabled: false
  serviceAccount:
    automountServiceAccountToken: false
  securityContext:
    readOnlyRootFilesystem: true
  env:
    CONTROL_PLANE_NATS_URL: wss://tfycp.app.tenant-35.stage.mastercard-uscentral-tst-az1.mks.cloud.zlocal
    SERVICEFOUNDRY_SERVER_URL: https://tfycp.app.tenant-35.stage.mastercard-uscentral-tst-az1.mks.cloud.zlocal/api/svc
tfyNats:
  serviceAccount:
    automountServiceAccountToken: false
  securityContext:
    enabled: true
    podSecurityContext: {}
    containerSecurityContext:
      readOnlyRootFilesystem: true
  podTemplate:
    patch:
      - op: add
        path: /spec/volumes/-
        value:
          name: resolver-volume
          secret:
            secretName: tfy-nats-accounts
            defaultMode: 420
      - op: add
        path: /spec/containers/0/securityContext
        value:
          readOnlyRootFilesystem: true
tfy-clickhouse:
  enabled: false
  altinity-clickhouse-operator:
    metrics:
      containerSecurityContext:
        readOnlyRootFilesystem: true
      image:
        repository: artifacts.mastercard.int/mcr-internal-stable/mastercard/tfy-mirror/altinity/metrics-exporter
    operator:
      containerSecurityContext:
        readOnlyRootFilesystem: true
      image:
        repository: artifacts.mastercard.int/mcr-internal-stable/mastercard/tfy-mirror/altinity/clickhouse-operator
  zookeeper:
    serviceAccount:
      automountServiceAccountToken: false
    containerSecurityContext:
      readOnlyRootFilesystem: true
    image:
      repository: tfy-mirror/bitnami/zookeeper
      registry: "artifacts.mastercard.int/mcr-internal-stable/mastercard"
  clickhouse:
    serviceAccount:
      automountServiceAccountToken: false
    podSecurityContext:
      capabilities:
        add:
          - CAP_NICE
          - CAP_IPC_LOCK
    containerSecurityContext:
      capabilities:
        drop:
          - ALL
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true

extraResources:
  enabled: true
  manifests:
    - apiVersion: cert-manager.io/v1
      kind: Certificate
      metadata:
        name: truefoundry-certificates
      spec:
        commonName: truefoundry-cert
        dnsNames:
          - tfycp.app.tenant-35.stage.mastercard-uscentral-tst-az1.mks.cloud.zlocal
        issuerRef:
          group: certificates.mastercard.int
          kind: ClusterIssuer
          name: mc-internal-tst-server
        privateKey:
          algorithm: RSA
          encoding: PKCS1
          size: 2048
        secretName: truefoundry-ep-cert
        subject:
          organizations:
            - mastercard

truefoundryBootstrap:
  enabled: false
tfyBuild:
  enabled: false
tfy-buildkitd-service:
  enabled: false
mlfoundryServer:
  enabled: false
sfyManifestService:
  enabled: false
tfyController:
  enabled: false
